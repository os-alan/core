!function o(s,a,l){function c(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[t]={exports:{}};s[t][0].call(r.exports,function(e){return c(s[t][1][e]||e)},r,r.exports,o,s,a,l)}return a[t].exports}for(var h="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,i){"use strict";var r=(window.fin=window.fin||{}).Hypergrid=e("fin-hypergrid");r.require=e("./module-loader"),r.src={};var n={};function o(e,t){var i;switch(t=t||"src"){case"src":i="Reference to the `Hypergrid."+e+"` namespace has been deprecated as of v3.0.0 and will be removed in a future release. Update dereferencing of this namespace such as `Hypergrid."+e+".modulename` to `Hypergrid.require('fin-hypergrid/src/"+e+"/modulename')`. See https://fin-hypergrid.github.io#internal-modules.";break;case"modules":i="Reference to the `"+e+"` external module through `Hypergrid."+e+"` has been deprecated as of v3.0.0 in favor of `Hypergrid.require('"+e+"')`. The deprecated usage will be removed in a future release. See https://fin-hypergrid.github.io#external-dependencies."}o.warned[e]||(console.warn(i),o.warned[e]=!0);var n=r[t];return(n.items||n)[e]}Object.defineProperties(r.src,{lib:{value:{assignOrDelete:e("fin-hypergrid/src/lib/assignOrDelete"),cellEventFactory:e("fin-hypergrid/src/lib/cellEventFactory"),dynamicProperties:e("fin-hypergrid/src/lib/dynamicProperties"),dispatchGridEvent:e("fin-hypergrid/src/lib/dispatchGridEvent"),fields:e("fin-hypergrid/src/lib/fields"),graphics:e("fin-hypergrid/src/lib/graphics"),Canvas:e("fin-hypergrid/src/lib/Canvas"),InclusiveRectangle:e("fin-hypergrid/src/lib/InclusiveRectangle"),Registry:e("fin-hypergrid/src/lib/Registry"),get DataSourceOrigin(){return n.DataSourceOrigin||(console.warn("The `DataSourceOrigin` module has been retired as of v3.0.0. The new default data model, `datasaur-local`, will be returned instead. Note, however, that it may be removed from the build in a future release. Developers are advised and encouraged to provide their own data model going forward. For example: `new Hypergrid({ DataSource: require('datasaur-local') })`; or provide a live data model instance in the `dataSource` (small \"d\") option."),n.DataSourceOrigin=!0),e("datasaur-local")},get dynamicPropertyDescriptors(){return n.dynamicPropertyDescriptors||(console.warn("The `dynamicPropertyDescriptors` module has been renamed as of v3.0.0 to `dynamicProperties`. (This legacy name will be removed in a future version.)"),n.dynamicPropertyDescriptors=!0),e("fin-hypergrid/src/lib/dynamicProperties")}}},behaviors:{value:{Behavior:e("fin-hypergrid/src/behaviors/Behavior"),Local:e("fin-hypergrid/src/behaviors/Local"),Column:e("fin-hypergrid/src/behaviors/Column"),get JSON(){return n.behaviorsJSON||console.warn("fin-hypergrid/src/behaviors/src/behaviors/JSON has been renamed to Local as of v3.0.0. (Will be removed in a future release.)"),n.behaviorsJSON=!0,e("fin-hypergrid/src/behaviors/Local")}}},cellEditors:{value:e("fin-hypergrid/src/cellEditors")},cellRenderers:{value:e("fin-hypergrid/src/cellRenderers")},dataModels:{value:e("fin-hypergrid/src/dataModels")},features:{value:e("fin-hypergrid/src/features")},Base:{value:e("fin-hypergrid/src/Base")},defaults:{value:e("fin-hypergrid/src/defaults")}}),Object.defineProperties(r,{lib:{get:o.bind(null,"lib")},behaviors:{get:o.bind(null,"behaviors")},dataModels:{get:function(){return o("dataModels").items}},features:{get:o.bind(null,"features")},rectangular:{get:o.bind(null,"rectangular","modules")}}),o.warned={}},{"./module-loader":2,"datasaur-local":108,"fin-hypergrid":23,"fin-hypergrid/src/Base":21,"fin-hypergrid/src/behaviors/Behavior":29,"fin-hypergrid/src/behaviors/Column":30,"fin-hypergrid/src/behaviors/Local":37,"fin-hypergrid/src/cellEditors":52,"fin-hypergrid/src/cellRenderers":63,"fin-hypergrid/src/dataModels":65,"fin-hypergrid/src/defaults":66,"fin-hypergrid/src/features":80,"fin-hypergrid/src/lib/Canvas":81,"fin-hypergrid/src/lib/InclusiveRectangle":83,"fin-hypergrid/src/lib/Registry":85,"fin-hypergrid/src/lib/assignOrDelete":88,"fin-hypergrid/src/lib/cellEventFactory":89,"fin-hypergrid/src/lib/dispatchGridEvent":91,"fin-hypergrid/src/lib/dynamicProperties":92,"fin-hypergrid/src/lib/fields":94,"fin-hypergrid/src/lib/graphics":95}],2:[function(e,t,i){"use strict";var o=e("fin-hypergrid"),s=e("fin-hypergrid/images"),a=/^fin-hypergrid\/src\/(Base|defaults|cellEditors|cellRenderers|dataModels|features)$/,l=/^fin-hypergrid\/src\/(lib|behaviors|cellEditors|cellRenderers|dataModels|features)\/(\w+)$/,c=/^\.\.?\/(((\.\.?)|(\w[.\w]*))\/)*(\w[.\w]*)$/,h=/(\/(index(\.js)?)?|\.js)$/;t.exports=function(e){var t,i;switch(e){case"fin-hypergrid":t=o;break;case"fin-hypergrid/images":t=s;break;default:t=(i=e.match(a))?o.src[i[1]]:(i=e.match(l))?((t=o.src[i[1]]).items||t)[i[2]]:(i=e.match(c))?o.modules[i[5]]:o.modules[e]}if(!t){var n="Unknown module "+e,r=e.match(h);throw r&&(n+=' (try omitting the trailing "'+r[1]+'")'),n}return t}},{"fin-hypergrid":23,"fin-hypergrid/images":5}],3:[function(e,t,i){"use strict";i.grid=[".hypergrid-container {","\tposition: relative;","\theight: 500px;","}",".hypergrid-container > div:first-child {","\tposition: absolute;","\tleft: 0;","\ttop: 0;","\tright: 0;","\tbottom: 0;","}",".hypergrid-container > div:first-child > div.info {","\tposition: absolute;","\tdisplay: none; /* initially hidden */","\tmargin-top: 150px; /* to place below headers */","\tcolor: #eee;","\ttext-shadow: 1px 1px #ccc;","\tfont-size: 36pt;","\tfont-weight: bold;","\ttext-align: center;","\ttop: 0; right: 0; bottom: 0; left: 0;","}",".hypergrid-textfield {","\tposition: absolute;","\tfont-size: 12px;","\tcolor: black;","\tbackground-color: ivory;","\tbox-sizing: border-box;","\tmargin: 0;","\tpadding: 0 5px;","\tborder: 0; /*border: 1px solid #777;*/","\toutline: 0;","}","",""].join("\n")},{}],4:[function(e,t,i){t.exports={calendar:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAc0lEQVR4nIXQwQkCMRSE4U9ZLMCT9Xjaq2AfNhfYU5oQLMAOtoN48EWei5iBIRPe/yYQ3qrhf1lFG7iKcEaJxSfukUvMWgdHavt0uWHtg2QwxXnAnJZ2uOLyVZtybzzhgWNmfoFl0/YB87NbzR1cjP9xeQHSDC6mcL1xFQAAAABJRU5ErkJggg=="},checked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDMwMiwgMjAxNy8wMy8wMi0xNjo1OTozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZmM0YjdjYS01N2U3LTRjZTUtYWE3Zi1kYmFjZTU0ODJmZjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkIzRUM3OEQzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkIzRUM3OEMzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIEVsZW1lbnRzIDE2LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphZjdjMDA1NS1mMzJlLTQ1NjAtOGQxOS1lYTU1NGVhNDkzMmEiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0YmZiODQwOS03ZWY0LTExN2ItYjI4MS05MDYxODEwMDAwMDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5PI8IaAAAAkFBMVEVOTk5NTU29vb1paWnPz8/AwMC7u7u5ublDQ0NSUlJFRUVfX1/IyMixsbHi4uKFhYXT09PDw8NXV1fKysrMzMxYWFhzc3N7e3ve3t6ioqK+vr7Ly8uhoaHa2tqysrKurq7s7Oyvr6/Jycm2trbt7e3X19fh4eG1tbW/v7+3t7fo6OhERES6urrW1tbd3d0AAADC/hfQAAAAMHRSTlP//////////////////////////////////////////////////////////////wBipdB4AAAAcElEQVR42hTIRRbDMAwAUYVTZoa4ZleyfP/btZrVfwOlq4l66utlge5lrbIqq0cL9JX07Onv8PZr791pvm8H+DBrbhBiTn9f4IzjjcW6Qhw3zNnAxLHChln+iq9xsRUPQNFlyYUjlF0KwZiQDuUnwACjfw8FagWYLwAAAABJRU5ErkJggg=="},"down-rectangle":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAABpJREFUGFdjgIL/eDAKIKgABggqgAE0BQwMAPTlD/Fpi0JfAAAAAElFTkSuQmCC"},"filter-off":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAChSURBVChTzZHBCoUgFET9TqEiskgyWoutQvRLRIr+cR7XQAjiJW/1BgZmMUevXsY5xy9OoDEGMcYiUzeB67qibVuwQjVNA6311V+WBeM4vsLDMEApde/1fY9pmtI453neHEKAlBJd1z0fXtc16PbjODK07zvmeUZVVd8nooc75zJIOX3Gm6i0bVsGKf8xKIRIuyJTLgJJ3nvQzsjW2geIsQ/pr9hMVrSncAAAAABJRU5ErkJggg=="},"filter-on":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAACoSURBVChTY3BqfP2fHAzWmDbj7f8p294RhVOBasEa02e+/e/VBmQQCTxaX/9PnvYGoj5ywpv/Qd2ENft3vv4f1gfVBAP+nW/+h/a+ATtn1q73KHjytvdgg3070DTBgHvL6/8g22fsQGiaDmSHA21xaybgIpDHixa8hWssnA8NDEIApCh3LkIjiD2INYJCL2X6W3B8gdhEaQQBUOCA4gyE8+e9xaKJgQEA/74BNE3cElkAAAAASUVORK5CYII="},unchecked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDMwMiwgMjAxNy8wMy8wMi0xNjo1OTozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphNDQ3MTQ0Zi0wYmFmLTQ3YzMtYjBmNi1kODRlNDI0MjU4ZDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkIzRUM3OTEzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkIzRUM3OTAzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIEVsZW1lbnRzIDE2LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OWY2YWVhMC0xZjJkLTRjM2UtYTRiZi02MWYyMDNlMmI4YjciIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2Nzk3NWVjNC03ZWY0LTExN2ItYjI4MS05MDYxODEwMDAwMDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ywX99AAAAYFBMVEW5ubm/v7/X19fLy8vp6ene3t69vb2xsbG6urq+vr6urq7a2tq4uLji4uLIyMjBwcHDw8PJycnPz8/V1dW1tbWvr6/t7e23t7e7u7vs7Oy2trbo6Ojh4eHW1tbd3d0AAAAm0pqPAAAAIHRSTlP/////////////////////////////////////////AFxcG+0AAABZSURBVHjaTIqHDoAgEEOLC9wL5RTP+/+/VIIxdCTNSyFjZQwR1YNAtftxhOQLUHjvQ68K+orqW2C7P7FL9okmrjLl5cv1/+lAKuOVmTObQyZ32tdulkeAAQCpggrEM7zMmAAAAABJRU5ErkJggg=="},"up-down-spin":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGJJREFUOE+lkwEKACEIBH2Zb/PnHsoGeaVJDUjGOgRRpKpkiIj+y4MME3eDR7kaKOVNsJyMNjIHzGy9YnW6J7qIcrriQimeCqORNABd0fpRTkt8uVUj7EsxC6vs/q3e/Q6iD2bwnByjPXHNAAAAAElFTkSuQmCC"},"up-down":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGFJREFUOE+lkkEKQCEIRD2ZJ3Ph3iN4WD9GflpYhj0YYowpGgJmbikd3gjMDFokwbuT1iAiurG5nomgqo5QaPo9ERQRI6Jf7sfGjudy2je23+i0Wl2oQ85TOdlfrJQOazF8br+rqTXQKn0AAAAASUVORK5CYII="}}},{}],5:[function(e,t,i){"use strict";var n=e("object-iterators"),r=e("./images");n(r).each(function(e,t){var i=new Image;i.src="data:"+e.type+";base64,"+e.data,r[t]=i}),r["checkbox-on"]=r.checked,r["checkbox-off"]=r.unchecked,r.add=function(e,t){return r[e]=t},r.checkbox=function(e){return r[e?"checked":"unchecked"]},r.filter=function(e){return r[e?"filter-on":"filter-off"]},t.exports=r},{"./images":4,"object-iterators":14}],6:[function(e,t,i){"use strict";function o(e,t){var i=1<arguments.length;if("function"==typeof e&&(e=e.call(this)),i){var n=arguments;e=(e=e.replace(o.replacersRegex,function(e,t){return t-=-1,n.length>t?n[t]:""})).replace(o.encodersRegex,function(e,t){if(t-=-1,n.length>t){var i=document.createElement("DIV");return i.textContent=n[t],i.innerHTML}return""})}return e}function a(e,t,i){var n="object"!=typeof t,r=Array.prototype.slice.call(arguments,1);return n?(t=document.createElement("DIV"),r.unshift(e)):r[0]=e,t.innerHTML=o.apply(null,r),t}o.encodersRegex=/%\{(\d+)\}/g,o.replacersRegex=/\$\{(.*?)\}/g,(o.format=o).replace=a,o.append=function(e,t,i,n){var r=3;"object"!=typeof i&&(i=null,r=2),n=Array.prototype.slice.call(arguments,r);for(var o=[],s=a.apply(null,[e].concat(n));s.childNodes.length;)o.push(s.firstChild),t.insertBefore(s.firstChild,i);return o},o.firstChild=function(e,t){return a.apply(null,arguments).firstChild},o.firstElement=function(e,t){return a.apply(null,arguments).firstElementChild},t.exports=o},{}],7:[function(e,t,i){"use strict";function o(e,t,i){if("string"==typeof i){if(!(i=document.querySelector(i)))throw"Cannot find reference element for CSS injection."}else if(i&&!(i instanceof Element))throw"Given value not a reference element.";var n=i&&i.parentNode||document.head||document.getElementsByTagName("head")[0];if(!t||(t=o.idPrefix+t,!n.querySelector("#"+t))){var r=document.createElement("style");return r.type="text/css",t&&(r.id=t),e instanceof Array&&(e=e.join("\n")),e="\n"+e+"\n",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),void 0===i&&(i=n.firstChild),n.insertBefore(r,i),r}}o.idPrefix="injected-stylesheet-",t.exports=o},{}],8:[function(e,t,i){"use strict";var o=e("extend-me").Base.extend("DatasaurBase",{isNullObject:!0,drillDownCharMap:{true:"▼",false:"▶",undefined:"",null:"   "},DataError:n,initialize:function(e,t){if(e)for(this.handlers=e.handlers,this.next=e;e;)e=(this.source=e).next;else this.handlers=[],this.source=this;this.install(Object.getPrototypeOf(this))},install:function(t,i){i=i||{};var n=this,e=function(t){var e,i=t.hasOwnProperty("!!keys")&&t["!!keys"],n=s.concat(t.hasOwnProperty("!keys")&&t["!keys"]||[]);e=Array.isArray(t)?t:Object.keys(t).filter(function(e){return"function"==typeof Object.getOwnPropertyDescriptor(t,e).value});return e.filter(function(e){return!(i&&i.indexOf(e)<0||0<=n.indexOf(e))})}(t),r=i.inject&&!Array.isArray(t);e.forEach(function(e){r&&(function(e,t,i){do{if(e[t])if(i)for(var n=e;n&&n!==Object.prototype;n=Object.getPrototypeOf(n))delete n[t];else if(e[t]!==o.prototype[t])return e[t];e=e.next}while(e)}(n,e,i.force)||(this.source[e]=t[e])),o.prototype[e]||(o.prototype[e]=function(){if(this.next)return this.next[e].apply(this.next,arguments)})},this)},dispatchEvent:function(t){this.handlers.forEach(function(e){e.call(this,t)},this)},addListener:function(e){this.handlers.indexOf(e)<0&&this.handlers.push(e)},removeListener:function(e){var t=this.handlers.indexOf(e);0<=t&&delete this.handlers[t]},removeAllListeners:function(){this.handlers.length=0},dump:function(e){e=Math.min(this.getRowCount(),e||Math.max(100,this.getRowCount()));for(var t=[],i=this.getSchema(),n=i?i.map(function(e){return e.name}):this.getHeaders(),r=this.getColumnCount(),o=this.viewMakesSense,s=0;s<e;s++){for(var a={},l=0;l<r;l++){var c=this.getValue(l,s);0===l&&o&&(c=this.fixIndentForTableDisplay(c)),a[n[l]]=c}t[s]=a}console.table(t)}});var s=["constructor","initialize","!keys","!!keys"];function n(e){this.message=e}(n.prototype=Object.create(Error.prototype)).name="DataError",t.exports=o},{"extend-me":10}],9:[function(e,t,i){"use strict";var n=e("datasaur-base").extend("DatasaurLocal",{initialize:function(e,t){this.reset()},reset:function(){this.schema=[],this.data=[]},setData:function(e,t){this.data=e||[],t?this.setSchema(t):this.data.length&&!this.schema.length&&this.setSchema([]),this.dispatchEvent("fin-hypergrid-data-loaded")},getSchema:function(){return this.schema},setSchema:function(e){if(!e.length){var t=this.getFirstRow();t&&(e=Object.keys(t))}this.schema=e,this.dispatchEvent("fin-hypergrid-schema-loaded")},getFirstRow:function(){for(var e in this.data)if(this.data[e])return this.data[e]},getRow:function(e){return this.data[e]},setRow:function(e,t){this.data[e]=t||void 0},getRowMetadata:function(e,t){var i=this.data[e];return i&&(i.__META||void 0!==t&&(i.__META=Object.create(t)))},setRowMetadata:function(e,t){var i=this.data[e];return i&&(t?i.__META=t:delete i.__META),!!i},addRow:function(e,t){1===arguments.length&&(t=e,e=void 0),void 0===e||e>=this.getRowCount()?this.data.push(t):this.data.splice(e,0,t),this.dispatchEvent("fin-hypergrid-data-shape-changed")},delRow:function(e,t){var i=this.data.splice(e,void 0===t?1:t);return i.length&&this.dispatchEvent("fin-hypergrid-data-shape-changed"),i},getValue:function(e,t){var i=this.data[t];return i?i[this.schema[e].name]:null},setValue:function(e,t,i){this.data[t][this.schema[e].name]=i},getRowCount:function(){return this.data.length},getColumnCount:function(){return this.schema.length}});t.exports=n},{"datasaur-base":8}],10:[function(e,t,i){"use strict";function s(e,t){switch(arguments.length){case 0:t={};break;case 1:switch(typeof e){case"object":t=e,e=void 0;break;case"string":t={};break;default:throw"Single-parameter overload must be either string or object."}break;case 2:if("string"!=typeof e||"object"!=typeof t)throw"Two-parameter overload must be string, object.";break;default:throw"Too many parameters"}function i(){this.preInitialize&&this.preInitialize.apply(this,arguments),function(){var n=this,r=arguments;!function e(t){var i=Object.getPrototypeOf(t);i.constructor!==Object&&(e(i),i.hasOwnProperty("initialize")&&i.initialize.apply(n,r))}(n)}.apply(this,arguments),this.postInitialize&&this.postInitialize.apply(this,arguments)}i.extend=s,i.getClassName=a,i.parent=l;var n,r,o=i.prototype=Object.create(this.prototype);for(n in o.constructor=i,(e=e||o.$$CLASS_NAME||o.name)&&(Object.defineProperty(i,"name",{value:e,configurable:!0}),o.$$CLASS_NAME=e),t)(r=Object.getOwnPropertyDescriptor(t,n))&&Object.defineProperty(o,n,r);return"function"==typeof this.postExtend&&this.postExtend(o),i}function n(){}function a(){return this.prototype.$$CLASS_NAME||this.prototype.name||this.name}function l(e){var t=this.prototype;if(t)for(;t=Object.getPrototypeOf(t),e&&t&&t.constructor.name!==e;);return t&&t.constructor}n.prototype={constructor:n.prototype.constructor,getClassName:function(){return this.$$CLASS_NAME||this.name||this.constructor.name},get super(){return Object.getPrototypeOf(Object.getPrototypeOf(this))},superMember:function(e){for(var t=this.super;!(t=Object.getPrototypeOf(t)).hasOwnProperty(e););return t&&t[e]},superMethod:function(e){var t=this.superMember(e);if("function"!=typeof t)throw new TypeError("this."+e+" is not a function");return t},callSuperMethod:function(e){return this.superMethod(e).apply(this,Array.prototype.slice.call(arguments,1))}},(n.extend=s).Base=n,t.exports=s},{}],11:[function(e,t,i){"use strict";var r=e("css-injector");function o(i){var t=this._bound={};Object.keys(l).forEach(function(e){t[e]=l[e].bind(this)},this);var e=this.thumb=document.createElement("div");e.classList.add("thumb"),e.onclick=t.shortStop,e.onmouseover=t.onmouseover,e.onmouseout=this._bound.onmouseout;var n=this.bar=document.createElement("div");n.classList.add("finbar-vertical"),n.onmousedown=this._bound.onmousedown,this.paging&&(n.onclick=t.onclick),n.appendChild(e),i=i||{},this.orientation="vertical",this._min=this._index=0,this._max=100,Object.keys(i).forEach(function(e){var t=i[e];if(void 0!==t)switch(e){case"index":this._index=t;break;case"range":s(t),this._min=t.min,this._max=t.max,this.contentSize=t.max-t.min+1;break;default:"_"!==e.charAt(0)&&"function"!=typeof o.prototype[e]&&(this[e]=t)}},this),r(a,"finbar-base",i.cssStylesheetReferenceElement)}function s(e){2===Object.keys(e).length&&"number"==typeof e.min&&"number"==typeof e.max&&e.min<=e.max||n("Invalid .range object.")}o.prototype={set orientation(e){e!==this._orientation&&(this._orientation=e,this.oh=c[this._orientation],this.oh||n("Invalid value for `options._orientation."),this.deltaProp=this.oh.delta,this.bar.className=this.bar.className.replace(/(vertical|horizontal)/g,e),(this.bar.style.cssText||this.thumb.style.cssText)&&(this.bar.removeAttribute("style"),this.thumb.removeAttribute("style"),this.resize()))},get orientation(){return this._orientation},onchange:null,set classPrefix(e){this._classPrefix&&this.bar.classList.remove(this._classPrefix+this.orientation),(this._classPrefix=e)&&this.bar.classList.add(e+"-"+this.orientation)},get classPrefix(){return this._classPrefix},increment:1,deltaXFactor:1,deltaYFactor:1,deltaZFactor:1,barStyles:null,set style(r){var e=Object.keys(r=function(e){for(var t=1;t<arguments.length;++t){var i=arguments[t];if(i)for(var n in i)e[n]=i[n]}return e}({},r,this._auxStyles));if(e.length){var o=this.bar,s=o.getBoundingClientRect(),a=(this.container||o.parentElement).getBoundingClientRect(),l=this.oh;o.removeAttribute("style"),e.forEach(function(e){var t=r[e];if(e in l&&(e=l[e]),isNaN(Number(t))){if(/%$/.test(t)){var i=h[e],n=s[i.marginLeading]+s[i.marginTrailing];n&&(t=parseInt(t,10)/100*a[i.size]-n+"px")}}else t=(t||0)+"px";o.style[e]=t})}},paging:!0,set range(e){s(e),this._min=e.min,this._max=e.max,this.contentSize=e.max-e.min+1,this.index=this.index},get range(){return{min:this._min,max:this._max}},set index(e){e=Math.min(this._max,Math.max(this._min,e)),this._setScroll(e)},get index(){return this._index},_setScroll:function(e,t){this._index=e,this.testPanelItem&&this.testPanelItem.index instanceof Element&&(this.testPanelItem.index.innerHTML=Math.round(e)),this.onchange&&this.onchange.call(this,Math.round(e)),void 0===t&&(t=(e-this._min)/(this._max-this._min)*this._thumbMax),this.thumb.style[this.oh.leading]=t+"px"},scrollRealContent:function(e){var t=this.content.parentElement.getBoundingClientRect(),i=this.oh.size,n=Math.max(0,this.content[i]-t[i]),r=(e-this._min)/(this._max-this._min)*n;this.content.style[this.oh.leading]=-r+"px"},resize:function(e,t){var i=this.bar;if(i.parentNode){var n=this.container||i.parentElement,r=n.getBoundingClientRect();"object"==typeof e&&(t=e,e=void 0),this.style=this.barStyles=t||this.barStyles,this.content&&(this.onchange||(this.onchange=this.scrollRealContent,this.contentSize=this.content[this.oh.size],this._min=0,this._max=this.contentSize-1)),this.onchange===this.scrollRealContent?(this.containerSize=r[this.oh.size],this.increment=this.containerSize/(this.contentSize-this.containerSize)*(this._max-this._min)):(this.containerSize=1,this.increment=e||this.increment);var o=this.index;return this.testPanelItem=this.testPanelItem||this._addTestPanelItem(),this._setThumbSize(),this.index=o,null!==this.deltaProp&&n.addEventListener("wheel",this._bound.onwheel),this}},shortenBy:function(e){return this.shortenEndBy("trailing",e)},foreshortenBy:function(e){return this.shortenEndBy("leading",e)},shortenEndBy:function(e,t){if(t){if(t instanceof o&&t.orientation!==this.orientation){var i=window.getComputedStyle(t.bar),n=c[t.orientation];this._auxStyles={},this._auxStyles[e]=i[n.thickness]}}else delete this._auxStyles;return this},_setThumbSize:function(){var e=this.oh,t=window.getComputedStyle(this.thumb),i=parseInt(t[e.marginLeading]),n=i+parseInt(t[e.marginTrailing]),r=this.bar.getBoundingClientRect()[e.size],o=Math.max(20,r*this.containerSize/this.contentSize);this.containerSize<this.contentSize?(this.bar.style.visibility="visible",this.thumb.style[e.size]=o+"px"):this.bar.style.visibility="hidden",this._thumbMax=r-o-n,this._thumbMarginLeading=i},remove:function(){this.bar.onmousedown=null,this._removeEvt("mousemove"),this._removeEvt("mouseup"),(this.container||this.bar.parentElement)._removeEvt("wheel",this._bound.onwheel),this.bar.onclick=this.thumb.onclick=this.thumb.onmouseover=this.thumb.transitionend=this.thumb.onmouseout=null,this.bar.remove()},_addTestPanelItem:function(){var t,e=document.querySelector("."+this._classPrefix+".test-panel")||document.querySelector(".test-panel");if(e){var i=["mousedown","mousemove","mouseup","index"],n=document.createElement("li");i.forEach(function(e){n.innerHTML+='<span class="'+e+'">'+e.replace("mouse","")+"</span>"}),e.appendChild(n),t={},i.forEach(function(e){t[e]=n.getElementsByClassName(e)[0]})}return t},_addEvt:function(e){var t=this.testPanelItem&&this.testPanelItem[e];t&&t.classList.add("listening"),window.addEventListener(e,this._bound["on"+e])},_removeEvt:function(e){var t=this.testPanelItem&&this.testPanelItem[e];t&&t.classList.remove("listening"),window.removeEventListener(e,this._bound["on"+e])}};var a,l={shortStop:function(e){e.stopPropagation()},onwheel:function(e){this.index+=e[this.deltaProp]*this[this.deltaProp+"Factor"],e.stopPropagation(),e.preventDefault()},onclick:function(t){var e=this.thumb.getBoundingClientRect(),i=t[this.oh.coordinate]<e[this.oh.leading];"object"==typeof this.paging?this.index=this.paging[i?"up":"down"](Math.round(this.index)):this.index+=i?-this.increment:this.increment,this.thumb.classList.add("hover");var n=this;this.thumb.addEventListener("transitionend",function e(){this.removeEventListener("transitionend",e),n._bound.onmouseup(t)}),t.stopPropagation()},onmouseover:function(){this.thumb.classList.add("hover")},onmouseout:function(){this.thumb.classList.remove("hover")},onmousedown:function(e){var t=this.thumb.getBoundingClientRect();this.pinOffset=e[this.oh.axis]-t[this.oh.leading]+this.bar.getBoundingClientRect()[this.oh.leading]+this._thumbMarginLeading,document.documentElement.style.cursor="default",this._addEvt("mousemove"),this._addEvt("mouseup"),e.stopPropagation(),e.preventDefault()},onmousemove:function(e){var t=Math.min(this._thumbMax,Math.max(0,e[this.oh.axis]-this.pinOffset)),i=t/this._thumbMax*(this._max-this._min)+this._min;this._setScroll(i,t),e.stopPropagation(),e.preventDefault()},onmouseup:function(e){this._removeEvt("mousemove"),this._removeEvt("mouseup"),document.documentElement.style.cursor="auto";var t=this.thumb.getBoundingClientRect();t.left<=e.clientX&&e.clientX<=t.right&&t.top<=e.clientY&&e.clientY<=t.bottom?this._bound.onmouseover(e):this._bound.onmouseout(e),e.stopPropagation(),e.preventDefault()}},c={vertical:{coordinate:"clientY",axis:"pageY",size:"height",outside:"right",inside:"left",leading:"top",trailing:"bottom",marginLeading:"marginTop",marginTrailing:"marginBottom",thickness:"width",delta:"deltaY"},horizontal:{coordinate:"clientX",axis:"pageX",size:"width",outside:"bottom",inside:"top",leading:"left",trailing:"right",marginLeading:"marginLeft",marginTrailing:"marginRight",thickness:"height",delta:"deltaX"}},h={top:"vertical",bottom:"vertical",height:"vertical",left:"horizontal",right:"horizontal",width:"horizontal"};function n(e){throw"finbars: "+e}a="div.finbar-horizontal,div.finbar-vertical{position:absolute;margin:3px}div.finbar-horizontal>.thumb,div.finbar-vertical>.thumb{position:absolute;background-color:#d3d3d3;-webkit-box-shadow:0 0 1px #000;-moz-box-shadow:0 0 1px #000;box-shadow:0 0 1px #000;border-radius:4px;margin:2px;opacity:.4;transition:opacity .5s}div.finbar-horizontal>.thumb.hover,div.finbar-vertical>.thumb.hover{opacity:1;transition:opacity .5s}div.finbar-vertical{top:0;bottom:0;right:0;width:11px}div.finbar-vertical>.thumb{top:0;right:0;width:7px}div.finbar-horizontal{left:0;right:0;bottom:0;height:11px}div.finbar-horizontal>.thumb{left:0;bottom:0;height:7px}",t.exports=o},{"css-injector":7}],12:[function(e,t,i){"use strict";var c=e("automat");function h(e,t){var i,n,r,o,s,a,l=h.prefix;if("boolean"==typeof e?i=2:(t=e,e=h.before,i=1),!(n=document.getElementById(l+t))){if(r=document.querySelector("head"),e&&(o=Array.prototype.slice.call(r.children).find(function(e){var t=e.getAttribute("id");return"STYLE"===e.tagName&&(!t||t.indexOf(l)!==l)||"LINK"===e.tagName&&"stylesheet"===e.getAttribute("rel")})),!(s=this[t]))throw"Expected to find member `"+t+"` in calling context.";a=["<style>\n"+s+"\n</style>\n",r,o||null],1<arguments.length&&(a=a.concat(Array.prototype.slice.call(arguments,i))),(n=c.append.apply(null,a)[0]).id=l+t}return n}h.before=!0,h.prefix="injected-stylesheet-",t.exports=h},{automat:6}],13:[function(e,t,i){var n,r;n=this,r=function(y){var t=Object.prototype.toString,x=Array.isArray||function(e){return"[object Array]"===t.call(e)};function c(e){return"function"==typeof e}function S(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var n=RegExp.prototype.test;var r=/\S/;function R(e){return t=r,i=e,!n.call(t,i);var t,i}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var E=/\s*/,A=/\s+/,M=/\s*=/,D=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;function P(e){this.string=e,this.tail=e,this.pos=0}function o(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.cache={}}P.prototype.eos=function(){return""===this.tail},P.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},P.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},o.prototype.push=function(e){return new o(e,this)},o.prototype.lookup=function(e){var t,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var n,r,o=this,s=!1;o;){if(0<e.indexOf("."))for(t=o.view,n=e.split("."),r=0;null!=t&&r<n.length;)r===n.length-1&&(s=a(t,n[r])),t=t[n[r++]];else t=o.view[e],s=a(o.view,e);if(s)break;o=o.parent}i[e]=t}return c(t)&&(t=t.call(this.view)),t},e.prototype.clearCache=function(){this.cache={}},e.prototype.parse=function(e,t){var i=this.cache,n=i[e];return null==n&&(n=i[e]=function(e,t){if(!e)return[];var i,n,r,o=[],s=[],a=[],l=!1,c=!1;function h(){if(l&&!c)for(;a.length;)delete s[a.pop()];else a=[];c=l=!1}function u(e){if("string"==typeof e&&(e=e.split(A,2)),!x(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(S(e[0])+"\\s*"),n=new RegExp("\\s*"+S(e[1])),r=new RegExp("\\s*"+S("}"+e[1]))}u(t||y.tags);for(var d,f,g,p,m,v,b=new P(e);!b.eos();){if(d=b.pos,g=b.scanUntil(i))for(var C=0,w=g.length;C<w;++C)R(p=g.charAt(C))?a.push(s.length):c=!0,s.push(["text",p,d,d+1]),d+=1,"\n"===p&&h();if(!b.scan(i))break;if(l=!0,f=b.scan(k)||"name",b.scan(E),"="===f?(g=b.scanUntil(M),b.scan(M),b.scanUntil(n)):"{"===f?(g=b.scanUntil(r),b.scan(D),b.scanUntil(n),f="&"):g=b.scanUntil(n),!b.scan(n))throw new Error("Unclosed tag at "+b.pos);if(m=[f,g,d,b.pos],s.push(m),"#"===f||"^"===f)o.push(m);else if("/"===f){if(!(v=o.pop()))throw new Error('Unopened section "'+g+'" at '+d);if(v[1]!==g)throw new Error('Unclosed section "'+v[1]+'" at '+d)}else"name"===f||"{"===f||"&"===f?c=!0:"="===f&&u(g)}if(v=o.pop())throw new Error('Unclosed section "'+v[1]+'" at '+b.pos);return function(e){for(var t,i=[],n=i,r=[],o=0,s=e.length;o<s;++o)switch((t=e[o])[0]){case"#":case"^":n.push(t),r.push(t),n=t[4]=[];break;case"/":r.pop()[5]=t[2],n=0<r.length?r[r.length-1][4]:i;break;default:n.push(t)}return i}(function(e){for(var t,i,n=[],r=0,o=e.length;r<o;++r)(t=e[r])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}(s))}(e,t)),n},e.prototype.render=function(e,t,i){var n=this.parse(e),r=t instanceof o?t:new o(t);return this.renderTokens(n,r,i,e)},e.prototype.renderTokens=function(e,t,i,n){for(var r,o,s,a="",l=0,c=e.length;l<c;++l)s=void 0,"#"===(o=(r=e[l])[0])?s=this.renderSection(r,t,i,n):"^"===o?s=this.renderInverted(r,t,i,n):">"===o?s=this.renderPartial(r,t,i,n):"&"===o?s=this.unescapedValue(r,t):"name"===o?s=this.escapedValue(r,t):"text"===o&&(s=this.rawValue(r)),void 0!==s&&(a+=s);return a},e.prototype.renderSection=function(e,t,i,n){var r=this,o="",s=t.lookup(e[1]);if(s){if(x(s))for(var a=0,l=s.length;a<l;++a)o+=this.renderTokens(e[4],t.push(s[a]),i,n);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)o+=this.renderTokens(e[4],t.push(s),i,n);else if(c(s)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(t.view,n.slice(e[3],e[5]),function(e){return r.render(e,t,i)}))&&(o+=s)}else o+=this.renderTokens(e[4],t,i,n);return o}},e.prototype.renderInverted=function(e,t,i,n){var r=t.lookup(e[1]);if(!r||x(r)&&0===r.length)return this.renderTokens(e[4],t,i,n)},e.prototype.renderPartial=function(e,t,i){if(i){var n=c(i)?i(e[1]):i[e[1]];return null!=n?this.renderTokens(this.parse(n),t,i,n):void 0}},e.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},e.prototype.escapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return y.escape(i)},e.prototype.rawValue=function(e){return e[1]},y.name="mustache.js",y.version="2.3.0",y.tags=["{{","}}"];var s=new e;return y.clearCache=function(){return s.clearCache()},y.parse=function(e,t){return s.parse(e,t)},y.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(x(n=e)?"array":typeof n)+'" was given as the first argument for mustache#render(template, view, partials)');var n;return s.render(e,t,i)},y.to_html=function(e,t,i,n){var r=y.render(e,t,i);if(!c(n))return r;n(r)},y.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return i[e]})},y.Scanner=P,y.Context=o,y.Writer=e,y},"object"==typeof i&&i&&"string"!=typeof i.nodeName?r(i):"function"==typeof define&&define.amd?define(["exports"],r):(n.Mustache={},r(n.Mustache))},{}],14:[function(e,t,i){"use strict";function n(e){return e instanceof n?e:this instanceof n?(this.originalValue=e,void(this.o=e||{})):new n(e)}n.chain=function(e){var t=n(e);return t.chaining=!0,t},n.prototype={value:function(){return this.originalValue},each:function(t,e){var i=this.o;return Object.keys(i).forEach(function(e){t.call(this,i[e],e,i)},e||i),this},find:function(t,e){var i,n=this.o;return n&&void 0!==(i=Object.keys(n).find(function(e){return t.call(this,n[e],e,n)},e||n))&&(i=n[i]),i},filter:function(t,e){var i=this.o,n=[];return i&&Object.keys(i).forEach(function(e){t.call(this,i[e],e,i)&&n.push(i[e])},e||i),n},map:function(t,e){var i=this.o,n=[];return i&&Object.keys(i).forEach(function(e){n.push(t.call(this,i[e],e,i))},e||i),n},reduce:function(i,n,e){var r=this.o;return r&&Object.keys(r).forEach(function(e,t){n=t||void 0!==n?i(n,r[e],e,r):r[e]},e||r),n},extend:function(e){var i=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){if(e)for(var t in e)i[t]=e[t]}),this.chaining?this:i},extendOwn:function(e){var i=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){n(e).each(function(e,t){i[t]=e})}),this.chaining?this:i}},Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,r=arguments[1],o=0;o<n;o++)if(t=i[o],e.call(r,t,o,i))return t}),t.exports=n},{}],15:[function(e,t,i){"use strict";function n(e,t){for(var i=1;i<arguments.length;++i)r.call(e,arguments[i]);return e}function r(e){var t;for(var i in e)(t=Object.getOwnPropertyDescriptor(e,i))&&Object.defineProperty(this,i,t);return this}n.mixInTo=function(e){var t;for(var i in this)(t=Object.getOwnPropertyDescriptor(this,i))&&Object.defineProperty(e,i,t);return e},n.mixIn=r,t.exports=n},{}],16:[function(e,t,i){"use strict";function r(e,t){Object.defineProperty(this,e,{value:t,writable:!1,enumerable:!0,configurable:!1})}function o(e,t){r.call(this,"x",Number(e)||0),r.call(this,"y",Number(t)||0)}function s(e,t,i,n){e=Number(e)||0,t=Number(t)||0,(i=Number(i)||0)<0&&(e+=i,i=-i),(n=Number(n)||0)<0&&(t+=n,n=-n),r.call(this,"origin",new o(e,t)),r.call(this,"extent",new o(i,n)),r.call(this,"corner",new o(e+i,t+n)),r.call(this,"center",new o(e+i/2,t+n/2))}(o.prototype={plus:function(e){return new o(this.x+e.x,this.y+e.y)},plusXY:function(e,t){return new o(this.x+(e||0),this.y+(t||0))},minus:function(e){return new o(this.x-e.x,this.y-e.y)},min:function(e){return new o(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new o(Math.max(this.x,e.x),Math.max(this.y,e.y))},distance:function(e){var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){var t=!1;return e&&(t=this.x===e.x&&this.y===e.y),t},greaterThan:function(e){return this.x>e.x&&this.y>e.y},lessThan:function(e){return this.x<e.x&&this.y<e.y},greaterThanOrEqualTo:function(e){return this.x>=e.x&&this.y>=e.y},lessThanOrEqualTo:function(e){return this.x<=e.x&&this.y<=e.y},within:function(e){var t=e.origin.x,i=t+e.extent.x,n=e.origin.y,r=n+e.extent.y;return e.extent.x<0&&(t=i,i=e.origin.x),e.extent.y<0&&(n=r,r=e.origin.y),t<=this.x&&this.x<i&&n<=this.y&&this.y<r}}).EQ=o.prototype.equals,o.prototype.GT=o.prototype.greaterThan,o.prototype.LT=o.prototype.lessThan,o.prototype.GE=o.prototype.greaterThanOrEqualTo,o.prototype.LE=o.prototype.lessThanOrEqualTo,s.prototype={get top(){return this.origin.y},get left(){return this.origin.x},get bottom(){return this.corner.y},get right(){return this.corner.x},get width(){return this.extent.x},get height(){return this.extent.y},get area(){return this.width*this.height},flattenXAt:function(e){return new s(e,this.origin.y,0,this.extent.y)},flattenYAt:function(e){return new s(this.origin.x,e,this.extent.x,0)},contains:function(e){return e.within(this)},within:function(e){return e.origin.lessThanOrEqualTo(this.origin)&&e.corner.greaterThanOrEqualTo(this.corner)},growBy:function(e){return new s(this.origin.x+e,this.origin.y+e,this.extent.x-e-e,this.extent.y-e-e)},shrinkBy:function(e){return this.growBy(-e)},union:function(e){var t=this.origin.min(e.origin),i=this.corner.max(e.corner).minus(t);return new s(t.x,t.y,i.x,i.y)},forEach:function(e,t){t=t||this;for(var i=this.origin.x,n=this.corner.x;i<n;i++)for(var r=this.origin.y,o=this.corner.y;r<o;r++)e.call(t,i,r)},intersect:function(e,t,i){var n=null,r=this.origin.max(e.origin),o=this.corner.min(e.corner).minus(r);return 0<o.x&&0<o.y?n=new s(r.x,r.y,o.x,o.y):"function"==typeof t&&(n=t.call(i||this,e)),n},intersects:function(e){return e.corner.x>this.origin.x&&e.corner.y>this.origin.y&&e.origin.x<this.corner.x&&e.origin.y<this.corner.y}},i.Point=o,i.Rectangle=s},{}],17:[function(e,t,i){"use strict";(function(e){function t(){this.selection=[],this.states=[],this.storeState=function(){for(var e,t=this.selection,i=[],n=0;n<t.length;n++)e=[].concat(t[n]),i.push(e);this.states.push(i)}}function r(e,t){return e instanceof Array?r.apply(this,e):void 0===t?[e,e]:e<=t?[e,t]:[t,e]}function c(e,t){return e[0]<=t[0]&&t[0]<=e[1]||e[0]<=t[1]&&t[1]<=e[1]||t[0]<e[0]&&e[1]<t[1]}t.prototype={select:function(e,t){this.storeState();var a=r(e,t),l=[0,1];return this.selection.forEach(function(e){var t,i,n,r,o,s;c(e,a)||(s=a,(o=e)[1]===s[0]-1||s[1]===o[0]-1)?(t=e,i=a,n=Math.min(Math.min.apply(Math,t),Math.min.apply(Math,i)),r=Math.max(Math.max.apply(Math,t),Math.max.apply(Math,i)),a=[n,r]):l.push(e)}),l.push(a),l[1]=this.selection.length,this.selection.splice.apply(this.selection,l),this},deselect:function(e,t){var i=r(e,t),n=[0,0];return this.selection.forEach(function(e){if(c(e,i)){var t=function(e,t){var i=e[0],n=e[1],r=t[0],o=t[1],s=[];r<=i&&o<n?s.push([o+1,n]):i<r&&n<=o?s.push([i,r-1]):i<r&&o<n?(s.push([i,r-1]),s.push([o+1,n])):(o<i||n<r)&&s.push(e);return s}(e,i);n=n.concat(t)}else n.push(e)}),n[1]=this.selection.length,this.selection.splice.apply(this.selection,n),this},clear:function(){return this.states.length=0,this.selection.length=0,this},clearMostRecentSelection:function(){0!==this.states.length&&(this.selection=this.states.pop())},isSelected:function(t){return this.selection.some(function(e){return e[0]<=t&&t<=e[1]})},isEmpty:function(){return 0===this.selection.length},getSelections:function(){var i=[];return this.selection.forEach(function(e){for(var t=e[0];t<=e[1];t++)i.push(t)}),i.sort(function(e,t){return e-t}),i}},e.exports=t})("object"==typeof t&&t||(window.RangeSelectionModel={}),"object"==typeof t&&t.exports||(window.RangeSelectionModel.exports={}))||"object"==typeof t||(window.RangeSelectionModel=window.RangeSelectionModel.exports)},{}],18:[function(e,t,i){"use strict";var l=e("./transformers"),s=/^\d+$/,n=["transformations","propPath","dictPath","force"];function r(t){t&&n.forEach(function(e){t[e]&&(this[e]=t[e])},this)}function c(e,t){return t.reduce(function(e,t){return e[t]||(e[t]=Object.create(null))},e)}function o(e){return(e=e?Array.isArray(e)?e.slice():(e+"").split("."):[]).toString=a,e}function a(){return this.join(".")}(r.prototype={constructor:r,transformations:["verbatim","toCamelCase"],set propPath(e){this._propPath=o(e)},get propPath(){return this._propPath},_propPath:["name"],set dictPath(e){this._dictPath=o(e)},get dictPath(){return this._dictPath},_dictPath:[],getSynonyms:function(i,e){var n=[];return"string"==typeof i&&i&&(e=e||this.transformations,Array.isArray(e)||(e=Object.keys(e)),e.forEach(function(e){if("function"!=typeof l[e])throw new ReferenceError('Unknown transformer "'+e+'"');var t=l[e](i);""===t||t in n||n.push(t)})),n},decorate:function(e,t,i){var n=c(e,this.dictPath),r=n===e,o=this.force;return t.forEach(function(e){r&&s.test(e)||!o&&e in n||(n[e]=i)}),e},decorateList:function(e,n,r){var t;return"number"==typeof e?t=[n[e]]:(n=t=e,r=n),r=r?o(r):this.propPath,t.forEach(function(e){var t=void 0!==r&&"object"==typeof e?c(e,r):e;if(Array.isArray(this.transformations)){var i=this.getSynonyms(t);this.decorate(n,i,e)}else Object.keys(this.transformations).forEach(function(e,t,i){var n=l[i],r=this.transformations[i],o=Array.isArray(r)?r.slice():r.split("."),s=o.splice(o.length-1,1)[0],a=c(e,o);!this.force&&s in a||(a[s]=n(t))}.bind(this,e,t))},this),n}}).decorateObject=r.prototype.decorate,r.prototype.decorateArray=r.prototype.decorateList,t.exports=r},{"./transformers":19}],19:[function(e,t,i){"use strict";var n=/([^_A-Z])([A-Z]+)/g,r=/[^a-z0-9]+/gi,o=/[^a-z0-9]+([a-z0-9])?/gi;function s(e,t){return void 0===t?"":t.toUpperCase()}var a=/^(\d)/,l=/^([A-Z])/;function c(e,t){return t.toLowerCase()}var h=/[a-z]/,u=/[\s\-_]*([^\s\-_])([^\s\-_]+)/g,d=function(e,t,i){return t.toUpperCase()+i},f=/[A-Z]+/g,g=/([A-Z]+)([A-Z][a-z])/g;t.exports={verbatim:function(e){return e+""},toCamelCase:function(e){return e.replace(o,s).replace(a,"$$$1").replace(l,c)},toAllCaps:function(e){return e.replace(r,"_").replace(n,"$1_$2").replace(a,"$$$1").toUpperCase()},toTitle:function(e){return(h.test(e)?e:e.toLowerCase()).replace(u,d).replace(f," $&").replace(g,"$1 $2").trim()}}},{}],20:[function(e,t,i){t.exports={name:"fin-hypergrid",version:"3.0.2",description:"Canvas-based high-performance grid",main:"src/Hypergrid",repository:{type:"git",url:"git://github.com/fin-hypergrid/core.git"},author:"SWirts, JEiten, DJones, NMichaud",license:"MIT",readmeFilename:"README.md",gitHead:"",keywords:["spreadsheet","grid"],dependencies:{"datasaur-base":"^3.0.0","datasaur-local":"^3.0.0","extend-me":"^2.7.0",finbars:"^1.6.0","inject-stylesheet-template":"^1.0.1",mustache:"^2.3.0","object-iterators":"1.3.0",overrider:"^0",rectangular:"1.0.1","sparse-boolean-array":"1.0.1",synonomous:"^2.1.2"},devDependencies:{gulp:"^3.9.0","gulp-concat":"^2.6.0","gulp-each":"^0.1.1","gulp-eslint":"^4.0.2","gulp-footer":"^1.1.1","gulp-header":"^1.8.2","gulp-imagine-64":"^1.0.1","gulp-load-plugins":"^1.1.0","gulp-mocha":"^6.0.0","run-sequence":"^1.1.4"}}},{}],21:[function(e,t,i){"use strict";var n=e("extend-me").Base;Object.defineProperty(n.prototype,"version",{enumerable:!0,writable:!1,configurable:!1,value:e("../package.json").version}),n.prototype.atLeastVersion=function(e){var i,t=e.split("."),n=this.version.split(".");return t.find(function(e,t){return i=e-n[t]}),0<=i},n.prototype.deprecated=e("./lib/deprecated"),n.prototype.HypergridError=e("./lib/error"),n.prototype.notify=function(e,t){switch(t){case"warn":console.warn(e);break;case"alert":alert(e);break;default:throw new this.HypergridError(e)}},n.prototype.unwrap=function(e){return"f"===(typeof e)[0]&&(e=e()),e},n.prototype.mixIn=e("overrider").mixIn,n.prototype.createApply=function(e,t,i){var n=Array.prototype.slice.call(arguments,2),r=[null].concat(n).concat(t);return new(e.bind.apply(e,r))},t.exports=n},{"../package.json":20,"./lib/deprecated":90,"./lib/error":93,"extend-me":10,overrider:15}],22:[function(e,t,i){"use strict";var r=e("../lib/dispatchGridEvent"),n=e("../cellRenderers/Button");i.mixin={addEventListener:function(e,t,i){var n=this,r=this.listeners[e]=this.listeners[e]||[];if(!r.find(function(e){return e.listener===t})){var o={internal:i,listener:t,decorator:function(e){n.allowEventHandlers&&t(e)}};r.push(o),this.canvas.addEventListener(e,o.decorator)}},addInternalEventListener:function(e,t){this.addEventListener(e,t,!0)},removeEventListener:function(i,n){var r=this.listeners[i];r&&r.find(function(e,t){if(e.listener===n)return 1===r.length?delete this.listeners[i]:r.splice(t,1),this.canvas.removeEventListener(i,e.decorator),!0},this)},removeAllEventListeners:function(i){Object.keys(this.listeners).forEach(function(t){this.listeners[t].slice().forEach(function(e){!i&&e.internal||this.removeEventListener(t,e.listener)},this)},this)},allowEvents:function(e){this.allowEventHandlers=!!e,this.behavior.featureChain&&(e?this.behavior.featureChain.attachChain():this.behavior.featureChain.detachChain()),this.behavior.changed()},fireSyntheticColumnSortEvent:function(e,t){return r.call(this,"fin-column-sort",{column:e,keys:t})},fireSyntheticEditorKeyUpEvent:function(e,t){return r.call(this,"fin-editor-keyup",{input:e,keyEvent:t,char:this.canvas.getKeyChar(t),legacyChar:t.legacyKey})},fireSyntheticEditorKeyDownEvent:function(e,t){return r.call(this,"fin-editor-keydown",{input:e,keyEvent:t,char:this.canvas.getKeyChar(t),legacyChar:t.legacyKey})},fireSyntheticEditorKeyPressEvent:function(e,t){return r.call(this,"fin-editor-keypress",{input:e,keyEvent:t,char:this.canvas.getKeyChar(t),legacyChar:t.legacyKey})},fireSyntheticEditorDataChangeEvent:function(e,t,i){return r.call(this,"fin-editor-data-change",!0,{input:e,oldValue:t,newValue:i})},fireSyntheticRowHeaderClickedEvent:function(e){return r.call(this,"fin-row-header-clicked",!0,{},e)},fireSyntheticRowSelectionChangedEvent:function(){return r.call(this,"fin-row-selection-changed",this.selectionDetailGetters)},fireSyntheticColumnSelectionChangedEvent:function(){return r.call(this,"fin-column-selection-changed",this.selectionDetailGetters)},fireSyntheticContextMenuEvent:function(e){return Object.defineProperties(e,this.selectionDetailGetterDescriptors),r.call(this,"fin-context-menu",{},e)},fireSyntheticMouseUpEvent:function(e){return Object.defineProperties(e,this.selectionDetailGetterDescriptors),r.call(this,"fin-mouseup",{},e)},fireSyntheticMouseDownEvent:function(e){return Object.defineProperties(e,this.selectionDetailGetterDescriptors),r.call(this,"fin-mousedown",{},e)},fireSyntheticMouseMoveEvent:function(e){return r.call(this,"fin-mousemove",{},e)},fireSyntheticButtonPressedEvent:function(e){if(e.cellRenderer instanceof n){if(e.value&&e.value.subrows){var t=e.primitiveEvent.detail.mouse.y-e.bounds.y,i=e.bounds.height/e.value.subrows;e.subrow=Math.floor(t/i)}return r.call(this,"fin-button-pressed",{},e)}},fireSyntheticOnColumnsChangedEvent:function(){return r.call(this,"fin-column-changed-event",{})},fireSyntheticKeydownEvent:function(e){return r.call(this,"fin-keydown",e.detail)},fireSyntheticKeyupEvent:function(e){return r.call(this,"fin-keyup",e.detail)},fireSyntheticFilterAppliedEvent:function(){return r.call(this,"fin-filter-applied",{})},fireSyntheticOnCellEnterEvent:function(e){return r.call(this,"fin-cell-enter",e)},fireSyntheticOnCellExitEvent:function(e){return r.call(this,"fin-cell-exit",e)},fireSyntheticClickEvent:function(e){return r.call(this,"fin-click",{},e)},fireSyntheticDoubleClickEvent:function(e){if(this.abortEditing())return r.call(this,"fin-double-click",{},e)},fireSyntheticGridRenderedEvent:function(){return r.call(this,"fin-grid-rendered",{source:this})},fireSyntheticTickEvent:function(){return r.call(this,"fin-tick",{source:this})},fireSyntheticGridResizedEvent:function(e){return r.call(this,"fin-grid-resized",e)},fireScrollEvent:function(e,t,i){return r.call(this,e,{oldValue:t,value:i})},fireRequestCellEdit:function(e,t){return r.call(this,"fin-request-cell-edit",!0,{value:t},e)},fireBeforeCellEdit:function(e,t,i,n){return r.call(this,"fin-before-cell-edit",!0,{oldValue:t,newValue:i,input:n},e)},fireAfterCellEdit:function(e,t,i,n){return r.call(this,"fin-after-cell-edit",{newValue:i,oldValue:t,input:n},e)},delegateCanvasEvents:function(){var o=this;function i(e,t){if(0!==o.getLogicalRowCount()){var i,n,r=o.getGridCellFromMousePoint(e.detail.mouse);r.fake&&!e.detail.dragstart||(i=r.cellEvent),i&&(n=Object.defineProperty(i,"primitiveEvent",{value:e,enumerable:!1,configurable:!0,writable:!0}),t.call(o,n))}}this.addInternalEventListener("fin-canvas-resized",function(e){o.resized(),o.fireSyntheticGridResizedEvent(e)}),this.addInternalEventListener("fin-canvas-mousemove",function(e){o.properties.readOnly||i(e,function(e){this.delegateMouseMove(e),this.fireSyntheticMouseMoveEvent(e)})}),this.addInternalEventListener("fin-canvas-mousedown",function(t){o.properties.readOnly||(o.abortEditing()?i(t,function(e){e.keys=t.detail.keys,this.mouseDownState=e,this.delegateMouseDown(e),this.fireSyntheticMouseDownEvent(e),this.repaint()}):t.stopPropagation())}),this.addInternalEventListener("fin-canvas-click",function(t){o.properties.readOnly||i(t,function(e){this.mouseDownState&&this.mouseDownState.gridCell.equals(e.gridCell)&&e.mousePointInClickRect&&(e.keys=t.detail.keys,this.mouseDownState&&this.fireSyntheticButtonPressedEvent(this.mouseDownState),this.fireSyntheticClickEvent(e),this.delegateClick(e)),this.mouseDownState=null})}),this.addInternalEventListener("fin-canvas-mouseup",function(e){o.properties.readOnly||(o.dragging=!1,o.isScrollingNow()&&o.setScrollingNow(!1),o.columnDragAutoScrolling&&(o.columnDragAutoScrolling=!1),i(e,function(e){this.delegateMouseUp(e),this.fireSyntheticMouseUpEvent(e)}))}),this.addInternalEventListener("fin-canvas-dblclick",function(t){o.properties.readOnly||i(t,function(e){this.fireSyntheticDoubleClickEvent(e,t),this.delegateDoubleClick(e)})}),this.addInternalEventListener("fin-canvas-drag",function(e){o.properties.readOnly||(o.dragging=!0,i(e,o.delegateMouseDrag))}),this.addInternalEventListener("fin-canvas-keydown",function(e){o.properties.readOnly||(o.fireSyntheticKeydownEvent(e),o.delegateKeyDown(e))}),this.addInternalEventListener("fin-canvas-keyup",function(e){o.properties.readOnly||(o.fireSyntheticKeyupEvent(e),o.delegateKeyUp(e))}),this.addInternalEventListener("fin-canvas-wheelmoved",function(e){i(e,o.delegateWheelMoved)}),this.addInternalEventListener("fin-canvas-mouseout",function(e){o.properties.readOnly||i(e,o.delegateMouseExit)}),this.addInternalEventListener("fin-canvas-context-menu",function(e){i(e,function(e){o.delegateContextMenu(e),o.fireSyntheticContextMenuEvent(e)})}),document.body.addEventListener("copy",function(e){o.checkClipboardCopy(e)})},delegateWheelMoved:function(e){this.behavior.onWheelMoved(this,e)},delegateMouseExit:function(e){this.behavior.handleMouseExit(this,e)},delegateContextMenu:function(e){this.behavior.onContextMenu(this,e)},delegateMouseMove:function(e){this.behavior.onMouseMove(this,e)},delegateMouseDown:function(e){this.behavior.handleMouseDown(this,e)},delegateMouseUp:function(e){this.behavior.onMouseUp(this,e)},delegateClick:function(e){this.behavior.onClick(this,e)},delegateMouseDrag:function(e){this.behavior.onMouseDrag(this,e)},delegateDoubleClick:function(e){this.behavior.onDoubleClick(this,e)},delegateKeyDown:function(e){this.behavior.onKeyDown(this,e)},delegateKeyUp:function(e){this.behavior.onKeyUp(this,e)}}},{"../cellRenderers/Button":53,"../lib/dispatchGridEvent":91}],23:[function(e,t,i){"use strict";e("../lib/polyfills");var n=e("rectangular").Point,r=e("rectangular").Rectangle,o=e("object-iterators"),s=e("inject-stylesheet-template").bind(e("../../css")),a=e("../Base"),l=e("../defaults"),c=e("../lib/dynamicProperties"),h=e("../lib/Canvas"),u=e("../renderer"),d=e("../lib/SelectionModel"),f=e("../lib/Localization"),g=e("../behaviors/Behavior"),p=e("../behaviors/Local"),m=e("../cellRenderers"),v=e("../cellEditors"),b=e("./modules"),C=["top","bottom","left","right"],w=C.concat(["width","height","position"]),y=a.extend("Hypergrid",{initialize:function(e,t){this.selectionInitialize(),"string"==typeof e||e instanceof HTMLElement||(t=e,e=null),t=t||{},this.clearState(),this.setContainer(e||t.container||function(e){var t=document.getElementById("hypergrid");t&&!t.firstElementChild||(S(t=document.createElement("div"),e,w),document.body.appendChild(t));return t}(t.boundingRect)),y.prototype.installPlugins(t.plugins),this.lastEdgeSelection=[0,0],this.isWebkit=-1<navigator.userAgent.toLowerCase().indexOf("webkit"),this.selectionModel=new d(this),this.renderOverridesCache={},this.allowEventHandlers=!0,this.dragExtent=new n(0,0),this.numRows=0,this.numColumns=0,this.clearMouseDown(),this.setFormatter(t.localization),this.listeners={},this.cellRenderers=m,this.cellEditors=Object.create(v),Object.defineProperty(this.cellEditors,"create",{value:function(e,t){var i=v.get(e);if(i)return new i(this,t)}.bind(this)}),this.initCanvas(t),t.data?this.setData(t.data,t):(t.Behavior||t.dataModel||t.DataModel)&&this.setBehavior(t),t.state&&this.loadState(t.state),this.plugins={},this.installPlugins(t.plugins),document.addEventListener("mousedown",this.mouseCatcher=function(){this.abortEditing()}.bind(this)),setTimeout(this.repaint.bind(this)),y.grids.push(this),this.resetGridBorder("Top"),this.resetGridBorder("Right"),this.resetGridBorder("Bottom"),this.resetGridBorder("Left")},terminate:function(){document.removeEventListener("mousedown",this.mouseCatcher),this.behavior.dataModel.removeListener(this.behavior.boundDispatchEvent),this.removeAllEventListeners(!0),this.canvas.stop();for(var e=this.div;e.hasChildNodes();)e.removeChild(e.firstChild);y.grids.splice(y.grids.indexOf(this),1)},resetGridBorder:function(e){var t="gridBorder"+(e=e||""),i="border"+e,n=this.properties,r=n[t];switch(r){case!0:r=n.lineWidth+"px solid "+n.lineColor;break;case!1:r=null}this.canvas.canvas.style[i]=r},modules:b,behavior:null,isWebkit:!0,mouseDown:[],dragExtent:null,selectionModel:null,cellEditor:null,renderOverridesCache:{},hoverCell:null,lastEdgeSelection:null,setAttribute:function(e,t){this.div.setAttribute(e,t)},clearState:function(){this.properties=Object.defineProperties(this.initThemeLayer(),{grid:{value:this},var:{value:new function(){this.gridRenderer=l.gridRenderer,this.rowHeaderCheckboxes=l.rowHeaderCheckboxes,this.rowHeaderNumbers=l.rowHeaderNumbers,this.gridBorder=l.gridBorder,this.gridBorderTop=l.gridBorderTop,this.gridBorderRight=l.gridBorderRight,this.gridBorderBottom=l.gridBorderBottom,this.gridBorderLeft=l.gridBorderLeft}}}),Object.keys(l).forEach(function(e){var t=l[e];"object"==typeof t&&(c[e]?this[e]=t:this[e]=function i(e){var n=(t=e,Array.isArray(t)?t.slice():"object"==typeof t?Object.defineProperties({},Object.getOwnPropertyDescriptors(t)):t);var t;Object.keys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);"object"==typeof t.value&&(n[e]=i(t.value))});return n}(t))},this.properties)},reset:function(e){this.clearState(),this.removeAllEventListeners(),this.lastEdgeSelection=[0,0],this.selectionModel.reset(),this.renderOverridesCache={},this.clearMouseDown(),this.dragExtent=new n(0,0),this.numRows=0,this.numColumns=0,this.vScrollValue=0,this.hScrollValue=0,this.cancelEditing(),this.sbPrevVScrollValue=null,this.sbPrevHScrollValue=null,this.hoverCell=null,this.scrollingNow=!1,this.lastEdgeSelection=[0,0],this.behavior.reset({subgrids:e&&e.subgrids}),this.renderer.reset(),this.canvas.resize(),this.behaviorChanged(),this.refreshProperties()},installPlugins:function(e){var r=this===y.prototype;e&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){var t,i,n;if(e&&(i=[this],r&&i.push(g.prototype),Array.isArray(e)&&(e.length?"string"!=typeof e[0]?(i=i.concat(e.slice(1)),e=e[0]):2<=e.length?(i=i.concat(e.slice(2)),t=e[0],e=e[1]):e=void 0:e=void 0),e)){if((t=t||e.name||e.$$CLASS_NAME)&&(t=t.substr(0,1).toLowerCase()+t.substr(1)),r)n=this.constructor.plugins,e.preinstall&&!n[t]&&e.preinstall.apply(e,i);else if(n=this.plugins,"function"==typeof e)e=this.createApply(e,i);else if(e.install)e.install.apply(e,i);else if(!e.preinstall)throw new a.prototype.HypergridError("Expected plugin (a constructor; or an API with a `preinstall` method and/or an `install` method).");t&&(n[t]=e)}},this))},uninstallPlugins:function(n){n?Array.isArray(n)||(n=[n]):n=[],o(this.plugins).each(function(e,t,i){i.hasOwnProperty(t)&&0<=n.indexOf(t)&&e.uninstall&&e.uninstall(this,t,i)},this)},computeCellsBounds:function(){this.renderer.computeCellsBounds()},setFormatter:function(e){e=e||{},this.localization=new f(e.locale||y.localization.locale,e.numberOptions||y.localization.numberOptions,e.dateOptions||y.localization.dateOptions)},getFormatter:function(e){return this.localization.get(e).format},formatValue:function(e,t){return this.getFormatter(e)(t)},setHoverCell:function(e){var t=this.hoverCell;t&&t.equals(e.gridCell)||(this.hoverCell=e.gridCell,t&&this.fireSyntheticOnCellExitEvent(e),this.fireSyntheticOnCellEnterEvent(e),this.repaint())},addProperties:function(e){Object.assign(this.properties,e),this.refreshProperties()},refreshProperties:function(){this.behaviorShapeChanged(),this.behavior.defaultRowHeight=null,this.behavior.autosizeAllColumns()},setState:function(e){this.addState(e,!0)},addState:function(e,t){this.behavior.addState(e,t),this.refreshProperties(),this.behaviorChanged()},getState:function(){return this.behavior.getState()},loadState:function(e){this.behavior.setState(e)},saveState:function(i){var e=void 0===(i=i||{}).space?"\t":i.space,n=this.properties,r=n.calculators;if((i.blacklist=i.blacklist||[]).push("columnProperties"),r){if(i.compact){var o=this.behavior.getColumns();Object.keys(r).forEach(function(t){o.find(function(e){return e.properties.calculator===r[t]})||delete r[t]})}r.toJSON=R}this.headerify=i.headerify;var t=JSON.stringify(n,function(e,t){return this===n&&0<=i.blacklist.indexOf(e)?t=void 0:"calculator"===e&&(t=r?Object.keys(r).find(function(e){return r[e]===t}):t.toString()),t},e);return delete this.headerify,t},getMouseDown:function(){if(this.mouseDown.length)return this.mouseDown[this.mouseDown.length-1]},popMouseDown:function(){var e;return this.mouseDown.length&&(e=this.mouseDown.pop()),e},clearMouseDown:function(){this.mouseDown=[new n(-1,-1)],this.dragExtent=null},setMouseDown:function(e){this.mouseDown.push(e)},getDragExtent:function(){return this.dragExtent},setDragExtent:function(e){this.dragExtent=e},gridRenderedNotification:function(){this.cellEditor&&this.cellEditor.gridRenderedNotification(),this.checkColumnAutosizing()&&this.paintNow(),this.fireSyntheticGridRenderedEvent()},tickNotification:function(){this.fireSyntheticTickEvent()},checkColumnAutosizing:function(){var e=this.behavior.checkColumnAutosizing(!1);return e&&this.behaviorShapeChanged(),e},checkClipboardCopy:function(e){if(this.hasFocus()){e.preventDefault();var t=this.getSelectionAsTSV();e.clipboardData.setData("text/plain",t)}},hasFocus:function(){return this.canvas.hasFocus()},setBehavior:function(e){var t=e&&e.Behavior||p;this.behavior=new t(this,e),this.initScrollbars(),this.refreshProperties(),this.behavior.reindex()},getColumnCount:function(){return this.behavior.getActiveColumnCount()},getRowCount:function(){return this.behavior.getRowCount()},getRow:function(e){return this.behavior.getRow(e)},getValue:function(e,t,i){return this.behavior.getValue(e,t,i)},setValue:function(e,t,i,n){this.behavior.setValue(e,t,i,n)},setData:function(e,t){this.behavior||this.setBehavior(t),this.behavior.setData(e,t),this.setInfo(e.length?"":this.properties.noDataMessage),this.behavior.shapeChanged()},setInfo:function(e){this.renderer.setInfo(e)},reindex:function(){x.call(this)?this.needsReindex=!0:this.behavior.reindex(),this.behaviorShapeChanged()},behaviorChanged:function(){this.divCanvas&&(this.numColumns!==this.getColumnCount()||this.numRows!==this.getRowCount()?(this.numColumns=this.getColumnCount(),this.numRows=this.getRowCount(),this.behaviorShapeChanged()):this.behaviorStateChanged())},behaviorShapeChanged:function(){x.call(this)?(this.needsShapeChanged=!0,this.canvas.requestRepaint()):this.divCanvas&&(this.synchronizeScrollingBoundaries(),this.repaint())},behaviorStateChanged:function(){x.call(this)?(this.needsStateChanged=!0,this.canvas.requestRepaint()):this.divCanvas&&(this.computeCellsBounds(),this.repaint())},deferredBehaviorChange:function(){this.needsReindex&&(this.behavior.reindex(),this.needsReindex=!1),this.needsShapeChanged?this.divCanvas&&this.synchronizeScrollingBoundaries():this.needsStateChanged&&this.divCanvas&&this.computeCellsBounds(),this.needsShapeChanged=this.needsStateChanged=!1},getBounds:function(){return this.renderer.getBounds()},repaint:function(){var e=this.canvas;e&&(this.properties.repaintImmediately?this.paintNow():e.repaint())},paintNow:function(){this.behavior.columnsCreated&&this.canvas.paintNow()},setContainer:function(e){this.initContainer(e),this.initRenderer()},initContainer:function(e){"string"==typeof e&&(e=document.querySelector(e)),e.style.position||(e.style.position=null),e.clientHeight<1&&(e.style.height=null),s("grid"),e.oncontextmenu=function(e){return e.stopPropagation(),e.preventDefault(),!1},e.removeAttribute("tabindex"),e.classList.add("hypergrid-container"),e.id=e.id||"hypergrid"+(document.querySelectorAll(".hypergrid-container").length-1||""),this.div=e},initCanvas:function(e){if(!this.divCanvas){var t=document.createElement("div");S(t,e&&e.margin,C),this.div.appendChild(t);var i=new h(t,this.renderer,e&&e.contextAttributes);i.canvas.classList.add("hypergrid"),this.divCanvas=t,this.canvas=i,this.delegateCanvasEvents()}},convertViewPointToDataPoint:function(e){return this.behavior.convertViewPointToDataPoint(e)},convertDataPointToViewPoint:function(e){return this.behavior.convertDataPointToViewPoint(e)},beCursor:function(e){e?Array.isArray(e)||(e=[e]):e=["default"],e.forEach(function(e){this.cursor=e},this.div.style)},stopEditing:function(){return!this.cellEditor||this.cellEditor.stopEditing()},cancelEditing:function(){return!this.cellEditor||this.cellEditor.cancelEditing()},abortEditing:function(){return!this.cellEditor||(this.cellEditor.abortEditing?this.cellEditor.abortEditing():this.cellEditor.stopEditing())},getDataBounds:function(){var e=this.canvas.bounds;return new r(0,0,e.origin.x+e.extent.x,e.origin.y+e.extent.y)},editAt:function(e){var t;return this.abortEditing(),e.isDataColumn&&e.properties[e.isDataRow?"editable":"filterable"]&&(t=this.getCellEditorAt(e))&&t.beginEditing(),t},isColumnVisible:function(e){return this.renderer.isColumnVisible(e)},isDataRowVisible:function(e){return this.renderer.isDataRowVisible(e)},isDataVisible:function(e,t){return this.isDataRowVisible(t)&&this.isColumnVisible(e)},insureModelColIsVisible:function(e,t){var i=this.getColumnCount()-1,n=e+Math.sign(t),r=!this.isColumnVisible(n)||e===i;return r&&this.scrollBy(t,0),r},insureModelRowIsVisible:function(e,t){var i=this.getRowCount()-1,n=e+(-1<t?1:0),r=!this.isDataRowVisible(n)||e===i;return r&&this.scrollBy(0,t),r},getGridCellFromMousePoint:function(e){return this.renderer.getGridCellFromMousePoint(e)},getBoundsOfCell:function(e){var t=this.renderer.getBoundsOfCell(e.x,e.y);return new r(t.x,t.y,t.width,t.height)},resized:function(){this.behaviorShapeChanged()},cellClicked:function(e){return this.behavior.cellClicked(e)},windowOpen:function(e,t,i,n){return window.open.apply(window,arguments)},getColumns:function(e,t){var i=this.behavior.getColumns();return i.slice.apply(i,arguments)},getActiveColumns:function(e,t){var i=this.behavior.getActiveColumns();return i.slice.apply(i,arguments)},getHiddenColumns:function(){return this.behavior.getHiddenColumns()},takeFocus:function(){var e=this.cellEditor;this.stopEditing(),e||this.canvas.takeFocus()},editorTakeFocus:function(){if(this.cellEditor)return this.cellEditor.takeFocus()},getVisibleRows:function(){return this.renderer.getVisibleRows()},getVisibleColumns:function(){return this.renderer.getVisibleColumns()},initRenderer:function(){this.renderer=this.renderer||new u(this)},getColumnWidth:function(e){return this.behavior.getColumnWidth(e)},setColumnWidth:function(e,t){this.abortEditing()&&this.behavior.setColumnWidth(e,t)},getFixedColumnsWidth:function(){return this.behavior.getFixedColumnsWidth()},getRowHeight:function(e,t){return this.behavior.getRowHeight(e,t)},setRowHeight:function(e,t,i){this.abortEditing()&&this.behavior.setRowHeight(e,t,i)},getFixedRowsHeight:function(){return this.behavior.getFixedRowsHeight()},getFixedColumnCount:function(){return this.behavior.getFixedColumnCount()},getFixedRowCount:function(){return this.behavior.getFixedRowCount()},topLeftClicked:function(e){this.behavior.topLeftClicked(this,e)},rowHeaderClicked:function(e){this.behavior.rowHeaderClicked(this,e)},columnHeaderClicked:function(e){this.behavior.columnHeaderClicked(this,e)},onEditorActivate:function(e){return this.editAt(e)},getCellEditorAt:function(e){return this.behavior.getCellEditorAt(e)},toggleHiDPI:function(){this.properties.useHiDPI?this.removeAttribute("hidpi"):this.setAttribute("hidpi",null),this.canvas.resize()},getHiDPI:function(e){if(window.devicePixelRatio&&this.properties.useHiDPI)var t=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);else t=1;return t},getRenderedWidth:function(e){return this.renderer.getRenderedWidth(e)},getRenderedHeight:function(e){return this.renderer.getRenderedHeight(e)},updateCursor:function(){var e=this.behavior.getCursorAt(-1,-1),t=this.hoverCell;if(t&&-1<t.x&&-1<t.y){var i=t.x+this.getHScrollValue();e=this.behavior.getCursorAt(i,t.y+this.getVScrollValue())}this.beCursor(e)},repaintCell:function(e,t){this.renderer.repaintCell(e,t)},isDraggingColumn:function(){return!!this.renderOverridesCache.dragger},getRenderedData:function(){return this.renderer.getVisibleCellMatrix()},autosizeColumn:function(e){(-2<=e?this.behavior.getActiveColumn(e):e).checkColumnAutosizing(!0),this.computeCellsBounds()},setFocusable:function(e){this.canvas.setFocusable(e)},getVisibleColumnsCount:function(){return this.renderer.getVisibleColumnsCount()},getVisibleRowsCount:function(){return this.renderer.getVisibleRowsCount()},updateSize:function(){this.canvas.checksize()},stopPaintThread:function(){this.canvas.stopPaintThread()},stopResizeThread:function(){this.canvas.stopResizeThread()},restartResizeThread:function(){this.canvas.restartResizeThread()},restartPaintThread:function(){this.canvas.restartPaintThread()},swapColumns:function(e,t){this.behavior.swapColumns(e,t)},endDragColumnNotification:function(){this.behavior.endDragColumnNotification()},getFixedColumnsMaxWidth:function(){return this.behavior.getFixedColumnsMaxWidth()},isMouseDownInHeaderArea:function(){var e=this.getHeaderRowCount(),t=this.getMouseDown();return t.x<0||t.y<e},getColumnProperties:function(e){return this.behavior.getColumnProperties(e)},setColumnProperties:function(e,t){this.behavior.setColumnProperties(e,t)},clearAllCellProperties:function(e){this.behavior.clearAllCellProperties(e),this.renderer.resetAllCellPropertiesCaches()},isGridRow:function(e){return new this.behavior.CellEvent(0,e).isDataRow},getHeaderRowCount:function(){return this.behavior.getHeaderRowCount()},getFooterRowCount:function(){return this.behavior.getFooterRowCount()},getLogicalRowCount:function(){return this.behavior.getLogicalRowCount()},hasTreeColumn:function(){return this.behavior.hasTreeColumn()},lookupFeature:function(e){return this.behavior.lookupFeature(e)},newPoint:function(e,t){return new n(e,t)},newRectangle:function(e,t,i,n){return new r(e,t,i,n)},get charMap(){return this.behavior.charMap},decorateColumnArray:function(e){if(!this.columnArrayDecorations){var n=this;this.columnArrayDecorations={findWithNeg:{value:function(e,t){for(var i=n.behavior.leftMostColIndex;i<0;i++)if(this[i]&&e.call(t,this[i],i,this))return this[i];return this.find(e,t)}},forEachWithNeg:{value:function(e,t){for(var i=n.behavior.leftMostColIndex;i<0;i++)this[i]&&e.call(t,this[i],i,this);return this.forEach(e,t)}}}}return Object.defineProperties(e||[],this.columnArrayDecorations)}});function x(){return!this.properties.repaintImmediately&&this.canvas.paintLoopRunning()}function S(e,t,i){if(t){var n=e.style;i.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])})}}function R(){var i=this;return Object.keys(this).reduce(function(e,t){return"toJSON"!==t&&(e[t]=/^function /.test(t)?null:i[t].toString().replace(/^function anonymous\(/,"function(").replace("\n/*``*/)",")")),e},{})}function E(e,t){if(!E.warned[e]){var i=e.match(/\w+$/)[0];console.warn("Reference to "+i+" external module using `Hypergrid."+i+".` has been deprecated as of v3.0.0 in favor of `require('"+e+"')` from within a Hypergrid Client Module (otherwise use `Hypergrid.require(...)`) and will be removed in a future release. See https://github.com/fin-hypergrid/core/wiki/Client-Modules#internal-modules."),E.warned[e]=!0}return t}y.plugins={},y.localization={locale:"en-US",numberOptions:{maximumFractionDigits:0}},y.mixIn=y.prototype.mixIn,y.mixIn(e("./themes").sharedMixin),y.prototype.mixIn(e("./themes").mixin),y.prototype.mixIn(e("./events").mixin),y.prototype.mixIn(e("./selection").mixin),y.prototype.mixIn(e("./stash-selections").mixin),y.prototype.mixIn(e("./scrolling").mixin),E.warned={},Object.defineProperties(y,{Base:{get:function(){return E("fin-hypergrid/src/Base",e("../Base"))}},images:{get:function(){return E("fin-hypergrid/images",e("../../images"))}}}),y.grids=[],y.defaults=y.properties=l,y.modules=b,t.exports=y},{"../../css":3,"../../images":5,"../Base":21,"../behaviors/Behavior":29,"../behaviors/Local":37,"../cellEditors":52,"../cellRenderers":63,"../defaults":66,"../lib/Canvas":81,"../lib/Localization":84,"../lib/SelectionModel":86,"../lib/dynamicProperties":92,"../lib/polyfills":96,"../renderer":105,"./events":22,"./modules":24,"./scrolling":25,"./selection":26,"./stash-selections":27,"./themes":28,"inject-stylesheet-template":12,"object-iterators":14,rectangular:16}],24:[function(e,t,i){"use strict";t.exports={Scrollbar:e("finbars"),templater:e("mustache")},Object.defineProperties(t.exports,{"datasaur-base":{value:e("datasaur-base")},"datasaur-local":{value:e("datasaur-local")},"extend-me":{value:e("extend-me")},"object-iterators":{value:e("object-iterators")},overrider:{value:e("overrider")},rectangular:{value:e("rectangular")},"sparse-boolean-array":{value:e("sparse-boolean-array")},synonomous:{value:e("synonomous")}})},{"datasaur-base":8,"datasaur-local":9,"extend-me":10,finbars:11,mustache:13,"object-iterators":14,overrider:15,rectangular:16,"sparse-boolean-array":17,synonomous:18}],25:[function(e,t,i){"use strict";var o=e("./modules").Scrollbar;i.mixin={vScrollValue:0,hScrollValue:0,sbVScroller:null,sbHScroller:null,sbPrevVScrollValue:null,sbPrevHScrollValue:null,scrollingNow:!1,setScrollingNow:function(e){this.scrollingNow=e},isScrollingNow:function(){return this.scrollingNow},scrollBy:function(e,t){this.scrollHBy(e),this.scrollVBy(t)},scrollVBy:function(e){var t=this.sbVScroller.range.max,i=this.getVScrollValue(),n=Math.min(t,Math.max(0,i+e));n!==i&&this.setVScrollValue(n)},scrollHBy:function(e){var t=this.sbHScroller.range.max,i=this.getHScrollValue(),n=Math.min(t,Math.max(0,i+e));n!==i&&this.setHScrollValue(n)},scrollToMakeVisible:function(e,t){var i,n=this.renderer.dataWindow,r=this.properties.fixedColumnCount,o=this.properties.fixedRowCount;r<=e&&((i=e-n.origin.x)<0?this.sbHScroller.index+=i:0<e-n.corner.x&&(this.sbHScroller.index=this.renderer.getMinimumLeftPositionToShowColumn(e))),o<=t&&((i=t-n.origin.y-1)<0||0<(i=t-n.corner.y))&&(this.sbVScroller.index+=i)},selectCellAndScrollToMakeVisible:function(e,t){this.scrollToMakeVisible(e,t),this.selectCell(e,t,!0)},setVScrollValue:function(e){var t=this;if((e=Math.min(this.sbVScroller.range.max,Math.max(0,Math.round(e))))!==this.vScrollValue){this.behavior.setScrollPositionY(e),this.behavior.changed();var i=this.vScrollValue;this.vScrollValue=e,this.scrollValueChangedNotification(),setTimeout(function(){t.fireScrollEvent("fin-scroll-y",i,e)})}},getVScrollValue:function(){return this.vScrollValue},setHScrollValue:function(e){var t=this;if((e=Math.min(this.sbHScroller.range.max,Math.max(0,Math.round(e))))!==this.hScrollValue){this.behavior.setScrollPositionX(e),this.behavior.changed();var i=this.hScrollValue;this.hScrollValue=e,this.scrollValueChangedNotification(),setTimeout(function(){t.fireScrollEvent("fin-scroll-x",i,e)})}},getHScrollValue:function(){return this.hScrollValue},initScrollbars:function(){if(!this.sbHScroller||!this.sbVScroller){var e=this,t=new o({orientation:"horizontal",deltaXFactor:this.constructor.defaults.wheelHFactor,onchange:e.setHScrollValue.bind(e),cssStylesheetReferenceElement:this.div}),i=new o({orientation:"vertical",deltaYFactor:this.constructor.defaults.wheelVFactor,onchange:e.setVScrollValue.bind(e),paging:{up:e.pageUp.bind(e),down:e.pageDown.bind(e)}});this.sbHScroller=t,this.sbVScroller=i;var n=this.properties.hScrollbarClassPrefix,r=this.properties.vScrollbarClassPrefix;n&&""!==n&&(this.sbHScroller.classPrefix=n),r&&""!==r&&(this.sbVScroller.classPrefix=r),this.div.appendChild(t.bar),this.div.appendChild(i.bar),this.resizeScrollbars()}},resizeScrollbars:function(){this.sbHScroller.shortenBy(this.sbVScroller).resize(),this.sbVScroller.resize()},setVScrollbarValues:function(e){this.sbVScroller.range={min:0,max:e}},setHScrollbarValues:function(e){this.sbHScroller.range={min:0,max:e}},scrollValueChangedNotification:function(){this.hScrollValue===this.sbPrevHScrollValue&&this.vScrollValue===this.sbPrevVScrollValue||(this.sbPrevHScrollValue=this.hScrollValue,this.sbPrevVScrollValue=this.vScrollValue,this.cellEditor&&this.cellEditor.scrollValueChangedNotification(),this.computeCellsBounds())},synchronizeScrollingBoundaries:function(){var e=this.getBounds();if(e){for(var t=this.getFixedColumnCount(),i=this.getColumnCount(),n=this.getRowCount(),r=e.width-this.behavior.getFixedColumnsMaxWidth(),o=this.properties,s="border-box"===o.boxSizing,a=s?0:o.gridLinesVWidth,l=0,c=0;c<i&&l<r;c++)l+=this.getColumnWidth(i-c-1)+a;r<l&&c--;var h=this.renderer.getVisibleScrollHeight();a=s?0:o.gridLinesHWidth;for(var u=0,d=0;d<n&&u<h;d++)u+=this.getRowHeight(n-d-1)+a;if(h<u&&d--,this.sbHScroller){var f=Math.max(0,i-t-c);this.setHScrollbarValues(f),this.setHScrollValue(Math.min(this.getHScrollValue(),f))}if(this.sbVScroller){var g=Math.max(0,n-o.fixedRowCount-d);this.setVScrollbarValues(g),this.setVScrollValue(Math.min(this.getVScrollValue(),g))}this.computeCellsBounds(),setTimeout(this.resizeScrollbars.bind(this))}},pageUp:function(){var e=this.renderer.getPageUpRow();return this.setVScrollValue(e),e},pageDown:function(){var e=this.renderer.getPageDownRow();return this.setVScrollValue(e),e},pageLeft:function(){throw"page left not yet implemented"},pageRight:function(){throw"page right not yet implemented"}}},{"./modules":24}],26:[function(e,t,i){"use strict";var a=e("../lib/SelectionRectangle");function h(e){var n,r=this.behavior.getColumns(),o=this.behavior.getActiveColumns();return Array.isArray(e)?(n=[],e.forEach(function(t){var i="number"==typeof t?"index":"name",e=r.find(function(e){return e[i]===t});o.indexOf(e)<0&&n.push(e)}),n=n.concat(o)):n=e?r:o,n}function m(e){var t=e.origin,i=e.corner,n=Math.min(t.x,i.x),r=Math.min(t.y,i.y),o=Math.max(t.x,i.x),s=Math.max(t.y,i.y);return new a(n,r,o-n,s-r)}function v(e,t){var i,n;return e&&(n="f"===(typeof(i=e[t.name]))[0]&&i||t.calculator)&&(i=n(e,t.name)),i||0===i||!1===i?i:""}i.mixin={selectionInitialize:function(){var e=this;this.selectionDetailGetters={get rows(){return e.getSelectedRows()},get columns(){return e.getSelectedColumns()},get selections(){return e.selectionModel.getSelections()}},this.selectionDetailGetterDescriptors=Object.getOwnPropertyDescriptors(this.selectionDetailGetters)},hasSelections:function(){if(this.getSelectionModel)return this.selectionModel.hasSelections()},getSelectionAsTSV:function(){switch(this.selectionModel.getLastSelectionType()){case"cell":var e=this.getSelectionMatrix();return e=e[e.length-1],this.getMatrixSelectionAsTSV(e);case"row":return this.getMatrixSelectionAsTSV(this.getRowSelectionMatrix());case"column":return this.getMatrixSelectionAsTSV(this.getColumnSelectionMatrix())}},getMatrixSelectionAsTSV:function(e){var t="";if(e.length){var i=e.length,n=e[0].length,r=i-1,o=1<n?"\n":"";if(2e4<i*n)return alert("selection size is too big to copy to the paste buffer"),"";for(var s=0;s<n;s++)for(var a=0;a<i;a++)t+=e[a][s]+(a<r?"\t":o)}return t},clearSelections:function(){var e=this.properties.checkboxOnlyRowSelections;this.selectionModel.clear(e),this.clearMouseDown()},clearMostRecentSelection:function(){var e=this.properties.checkboxOnlyRowSelections;this.selectionModel.clearMostRecentSelection(e)},clearMostRecentColumnSelection:function(){this.selectionModel.clearMostRecentColumnSelection()},clearMostRecentRowSelection:function(){},clearRowSelection:function(){this.selectionModel.clearRowSelection()},select:function(e,t,i,n){e<0||t<0||this.selectionModel.select(e,t,i,n)},isSelected:function(e,t){return this.selectionModel.isSelected(e,t)},isCellSelectedInRow:function(e){return this.selectionModel.isCellSelectedInRow(e)},isCellSelectedInColumn:function(e){return this.selectionModel.isCellSelectedInColumn(e)},getRowSelection:function(e){for(var n=this.behavior.dataModel,t=this.selectionModel.getSelectedRows(),i=h.call(this,e),r={},o=0,s=i.length;o<s;o++){var a=i[o],l=r[a.name]=new Array(t.length);t.forEach(c)}function c(e,t){var i=n.getRow(e);l[t]=v(i,a)}return r},getRowSelectionMatrix:function(e){for(var n=this.behavior.dataModel,t=this.selectionModel.getSelectedRows(),i=h.call(this,e),r=new Array(i.length),o=0,s=i.length;o<s;o++){var a=i[o];r[o]=new Array(t.length),t.forEach(l)}function l(e,t){var i=n.getRow(e);r[o][t]=v(i,a)}return r},getColumnSelectionMatrix:function(){var s=this.behavior,a=s.dataModel,l=this.getHeaderRowCount(),e=this.getSelectedColumns(),c=this.getRowCount(),h=new Array(e.length);return e.forEach(function(e,t){for(var i=s.getActiveColumn(e),n=h[t]=new Array(c),r=l;r<c;r++){var o=a.getRow(r);n[r]=v(o,i)}}),h},getColumnSelection:function(){var o=this.behavior,s=o.dataModel,a=this.getHeaderRowCount(),e=this.getSelectedColumns(),l={},c=this.getRowCount();return e.forEach(function(e){for(var t=o.getActiveColumn(e),i=l[t.name]=new Array(c),n=a;n<c;n++){var r=s.getRow(n);i[n]=v(r,t)}}),l},getSelection:function(){var f=this.behavior,g=f.dataModel,e=this.getSelections(),p=new Array(e.length);return e.forEach(function(e,t){for(var i=m(e),n=i.width,r=i.height,o={},s=0,a=i.origin.x;s<n;s++,a++)for(var l=f.getActiveColumn(a),c=o[l.name]=new Array(r),h=0,u=i.origin.y;h<r;h++,u++){var d=g.getRow(u);c[h]=v(d,l)}p[t]=o}),p},getSelectionMatrix:function(){var f=this.behavior,g=f.dataModel,e=this.getSelections(),p=new Array(e.length);return e.forEach(function(e,t){for(var i=m(e),n=i.width,r=i.height,o=[],s=0,a=i.origin.x;s<n;s++,a++)for(var l=o[s]=new Array(r),c=f.getActiveColumn(a),h=0,u=i.origin.y;h<r;h++,u++){var d=g.getRow(u);l[h]=v(d,c)}p[t]=o}),p},selectCell:function(e,t,i){var n=this.properties.checkboxOnlyRowSelections;this.selectionModel.clear(n),this.selectionModel.select(e,t,0,0,i)},toggleSelectColumn:function(e,t){t=t||[];var i=this.selectionModel,n=i.isColumnSelected(e),r=-1<t.indexOf("CTRL"),o=-1<t.indexOf("SHIFT");r||o?(r&&(n?i.deselectColumn(e):i.selectColumn(e)),o&&(i.clear(),i.selectColumn(this.lastEdgeSelection[0],e))):(i.clear(),n||i.selectColumn(e)),n||o||(this.lastEdgeSelection[0]=e),this.repaint(),this.fireSyntheticColumnSelectionChangedEvent()},toggleSelectRow:function(e,t){t=t||[];var i=this.selectionModel,n=i.isRowSelected(e),r=0<=t.indexOf("SHIFT");n?i.deselectRow(e):(this.singleSelect(),i.selectRow(e)),r&&(i.clear(),i.selectRow(this.lastEdgeSelection[1],e)),n||r||(this.lastEdgeSelection[1]=e),this.repaint()},singleSelect:function(){var e=this.properties.singleRowSelectionMode;return e&&this.selectionModel.clearRowSelection(),e},selectViewportCell:function(e,t){var i,n;this.getRowCount()&&(i=this.renderer.visibleColumns[e])&&(n=this.renderer.visibleRows[t+this.getHeaderRowCount()])&&(e=i.columnIndex,t=n.rowIndex,this.clearSelections(),this.select(e,t,0,0),this.setMouseDown(this.newPoint(e,t)),this.setDragExtent(this.newPoint(0,0)),this.repaint())},selectToViewportCell:function(e,t){var i,n,r;if((i=this.getSelections())&&i.length&&(n=this.renderer.visibleColumns[e])&&(r=this.renderer.visibleRows[t+this.getHeaderRowCount()])){var o=i[0].origin;e=n.columnIndex,t=r.rowIndex,this.setDragExtent(this.newPoint(e-o.x,t-o.y)),this.select(o.x,o.y,e-o.x,t-o.y),this.repaint()}},selectToFinalCellOfCurrentRow:function(){this.selectFinalCellOfCurrentRow(!0)},selectFinalCellOfCurrentRow:function(e){if(this.getRowCount()){var t=this.getSelections();if(t&&t.length){var i=t[0],n=i.origin,r=i.extent,o=this.getColumnCount();this.scrollBy(o,0),this.clearSelections(),e?this.select(n.x,n.y,o-n.x-1,r.y):this.select(o-1,n.y,0,0),this.repaint()}}},selectToFirstCellOfCurrentRow:function(){this.selectFirstCellOfCurrentRow(!0)},selectFirstCellOfCurrentRow:function(e){if(this.getRowCount()){var t=this.getSelections();if(t&&t.length){var i=t[0],n=i.origin,r=i.extent;this.clearSelections(),e?this.select(n.x,n.y,-n.x,r.y):this.select(0,n.y,0,0),this.setHScrollValue(0),this.repaint()}}},selectFinalCell:function(){this.getRowCount()&&(this.selectCellAndScrollToMakeVisible(this.getColumnCount()-1,this.getRowCount()-1),this.repaint())},selectToFinalCell:function(){if(this.getRowCount()){var e=this.getSelections();if(e&&e.length){var t=e[0].origin,i=this.getColumnCount(),n=this.getRowCount();this.clearSelections(),this.select(t.x,t.y,i-t.x-1,n-t.y-1),this.repaint()}}},getSelectedRow:function(){var e=this.selectionModel.getSelections();if(e.length){for(var t=this.behavior,i=this.getColumnCount(),n=e[0].origin.y,r={},o=0;o<i;o++)r[t.getActiveColumn(o).header]=t.getValue(o,n);return r}},selectionChanged:function(){this.selectRowsFromCells(),this.selectColumnsFromCells();var e=new CustomEvent("fin-selection-changed",{detail:this.selectionDetailGetters});this.canvas.dispatchEvent(e)},isColumnOrRowSelected:function(){return this.selectionModel.isColumnOrRowSelected()},selectColumn:function(e,t){this.selectionModel.selectColumn(e,t)},selectRow:function(e,t){var i=this.selectionModel;this.singleSelect()?e=t:void 0===t&&(t=e),i.selectRow(Math.min(e,t),Math.max(e,t))},selectRowsFromCells:function(){var e;!this.properties.checkboxOnlyRowSelections&&this.properties.autoSelectRows&&(this.properties.singleRowSelectionMode?(e=this.selectionModel.getLastSelection())?this.selectRow(null,e.corner.y):this.clearRowSelection():this.selectionModel.selectRowsFromCells(0,!0),this.fireSyntheticRowSelectionChangedEvent())},selectColumnsFromCells:function(){this.properties.autoSelectColumns&&this.selectionModel.selectColumnsFromCells()},getSelectedRows:function(){return this.behavior.getSelectedRows()},getSelectedColumns:function(){return this.behavior.getSelectedColumns()},getSelections:function(){return this.behavior.getSelections()},getLastSelectionType:function(e){return this.selectionModel.getLastSelectionType(e)},isInCurrentSelectionRectangle:function(e,t){return this.selectionModel.isInCurrentSelectionRectangle(e,t)},selectAllRows:function(){this.selectionModel.selectAllRows()},areAllRowsSelected:function(){return this.selectionModel.areAllRowsSelected()},toggleSelectAllRows:function(){this.areAllRowsSelected()?this.selectionModel.clear():this.selectAllRows(),this.repaint()},moveSingleSelect:function(e,t){var i=this.getMouseDown().plus(this.getDragExtent());this.moveToSingleSelect(i.x+e,i.y+t)},moveToSingleSelect:function(e,t){var i=this.getColumnCount()-1,n=this.getRowCount()-1,r=this.getVisibleColumnsCount()-1,o=this.getVisibleRowsCount()-1;this.properties.scrollingEnabled||(i=Math.min(i,r),n=Math.min(n,o)),e=Math.min(i,Math.max(0,e)),t=Math.min(n,Math.max(0,t)),this.clearSelections(),this.select(e,t,0,0),this.setMouseDown(this.newPoint(e,t)),this.setDragExtent(this.newPoint(0,0)),this.selectCellAndScrollToMakeVisible(e,t),this.repaint()},extendSelect:function(e,t){var i=this.getColumnCount()-1,n=this.getRowCount()-1,r=this.renderer.visibleColumns.length-1,o=this.renderer.visibleRows.length-1,s=this.getMouseDown(),a=this.getDragExtent(),l=a.x+e,c=a.y+t;this.properties.scrollingEnabled||(i=Math.min(i,r),n=Math.min(n,o)),l=Math.min(i-s.x,Math.max(-s.x,l)),c=Math.min(n-s.y,Math.max(-s.y,c)),this.clearMostRecentSelection(),this.select(s.x,s.y,l,c),this.setDragExtent(this.newPoint(l,c));var h=this.insureModelColIsVisible(l+s.x,e),u=this.insureModelRowIsVisible(c+s.y,t);return this.repaint(),h||u},getGridCellFromLastSelection:function(e){var t=this.selectionModel.getLastSelection();return t&&(new this.behavior.CellEvent).resetGridXDataY(t.origin.x,t.origin.y,null,e)}}},{"../lib/SelectionRectangle":87}],27:[function(e,t,i){"use strict";i.mixin={stashRowSelections:function(){if(this.properties.restoreRowSelections){var t=this.behavior.dataModel;return this.selectedDataRowIndexes=this.getSelectedRows().map(function(e){return t.getRowIndex(e)}),this.selectedDataRowIndexes.length}},unstashRowSelections:function(){var e=this.selectedDataRowIndexes;if(e){delete this.selectedDataRowIndexes;var t,i,n=this.behavior.dataModel,r=this.getRowCount(),o=e.length,s=[],a=this.selectionModel;for(i=0;o&&i<r;++i)0<=(t=e.indexOf(n.getRowIndex(i)))&&(s.push(i),delete e[t],o--);return s.forEach(function(e){a.selectRow(e)}),s.length}},stashColumnSelections:function(){if(this.properties.restoreColumnSelections){var t=this.behavior;return this.selectedColumnNames=this.getSelectedColumns().map(function(e){return t.getActiveColumn(e).name}),this.selectedColumnNames.length}},unstashColumnSelections:function(e){var t=this.selectedColumnNames;if(t){delete this.selectedColumnNames;var n=this.behavior,r=this.selectionModel;return t.reduce(function(e,t){var i=n.getActiveColumnIndex(t);return i&&(r.selectColumn(i),e++),e},0)}}}},{}],28:[function(e,t,i){"use strict";var n=e("object-iterators"),o=e("../defaults"),s=e("../lib/dynamicProperties"),a=e("../lib/error"),r=["BackgroundColor","Color","Font"],l=r.concat(["Halign"]),c=[{prefix:"",props:l.concat(["cellPadding","iconPadding"])},{prefix:"foregroundSelection",props:r},{prefix:"columnHeader",props:l},{prefix:"columnHeaderForegroundSelection",props:r},{prefix:"rowHeader",props:r},{prefix:"rowHeaderForegroundSelection",props:r}],h={rowHeaderCheckboxes:o.rowHeaderCheckboxes,rowHeaderNumbers:o.rowHeaderNumbers,gridBorder:o.gridBorder,gridBorderTop:o.gridBorderTop,gridBorderRight:o.gridBorderRight,gridBorderBottom:o.gridBorderBottom,gridBorderLeft:o.gridBorderLeft,gridRenderer:o.gridRenderer},u=Object.assign({},h,{themeName:o.themeName});c.reduce(function(e,i){return i.props.reduce(function(e,t){return e[t=(t=(t=i.prefix+t).replace("ForegroundSelectionBackground","BackgroundSelection"))[0].toLowerCase()+t.substr(1)]=o[t],e},e)},u);var d=Object.create(null,{default:{value:u}}),f={showRowNumbers:"rowHeaderCheckboxes and rowHeaderNumbers",lineColor:"gridLinesHColor and gridLinesVColor",lineWidth:"gridLinesHWidth and gridLinesVWidth",gridBorder:"gridBorderLeft, gridBorderRight, gridBorderTop, and gridBorderBottom"};function g(i){var t,n,r;if(i&&"object"==typeof i&&!Object.getOwnPropertyNames(i).length&&(i=null),this._theme?(n=[this],t=this._theme,r=this.properties,i||(Object.keys(t).forEach(function(e){e in s||delete r[e]}),Object.keys(h).forEach(function(e){r.var[e]=o[e]})),Object.keys(t).forEach(function(e){delete t[e]})):(n=this.grids,t=o,i=i||"default"),"string"==typeof i){if(!d[i])throw new a('Unknown theme "'+i+'"');i=d[i]}i&&(i.themeName||(i.themeName=void 0),Object.keys(i).forEach(function(t){if(t in s)if(t in h)n.forEach(function(e){e.properties[t]=i[t]});else{var e=f[t];e=e?"Ignoring unexpected pseudo-prop "+t+" in theme object. Use actual props "+e+" instead.":"Ignoring invalid property "+t+" in theme object.",console.warn(e),delete i[t]}}),Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))),n.forEach(function(e){e.repaint()})}var p={initThemeLayer:function(){return this._theme=Object.create(o),Object.create(this._theme,s)},applyTheme:g,getTheme:function(){var e=this._theme,t=e.themeName;return"default"!==t&&Object.getOwnPropertyNames(e).length?t in d?t:e:void 0}};Object.defineProperty(p,"theme",{enumerable:!0,set:p.applyTheme,get:p.getTheme});var m={registerTheme:function(e,t){if("object"==typeof e&&(e=(t=e).themeName),!e)throw new a("Cannot register an anonymous theme.");if("default"===e)throw new a('Cannot register or unregister the "default" theme.');t?(t.themeName=e,d[e]=t):delete d[e]},registerThemes:function(e){e?n(e).each(function(e,t){this.registerTheme(t,e)},this):Object.keys(d).forEach(function(e){this.registerTheme(e)},this)},applyTheme:g};Object.defineProperty(m,"theme",{enumerable:!0,set:g,get:function(){return o}}),t.exports={mixin:p,sharedMixin:m}},{"../defaults":66,"../lib/dynamicProperties":92,"../lib/error":93,"object-iterators":14}],29:[function(i,e,t){"use strict";var n=i("rectangular").Point,r=i("../Base"),o=i("./Column"),s=i("../lib/cellEventFactory"),a=i("../lib/fields"),l=i("../features"),c=i("synonomous"),h=i("../lib/assignOrDelete"),u=i("../lib/dispatchGridEvent"),d=["columnHeader","columnHeaderColumnSelection","filterProperties","rowHeader","rowHeaderRowSelection","rowNumbersProperties","treeColumnProperties","treeColumnPropertiesColumnSelection"],f=r.extend("Behavior",{initialize:function(e,t){this.grid=e,this.initializeFeatureChain(),(this.grid.behavior=this).reset(t)},initializeFeatureChain:function(e){var t;if(this.featureChain=void 0,this.featureMap={},this.featureRegistry=this.featureRegistry||l,this.grid.properties.features){var i=this.featureRegistry.get.bind(this.featureRegistry);t=this.grid.properties.features.map(i)}else this.features&&(t=this.features,function(){var o=[],s=[],a=0;if(this.features.forEach(function(e){var t=e.prototype.$$CLASS_NAME||e.name,i=t||"feature"+a++;if(o.push(i),!this.featureRegistry.get(i,!0)){var n=e.name||e.prototype.$$CLASS_NAME||"FeatureConstructor"+a,r=[];t||r.push("'"+i+"'"),r.push(n),s.push(r.join(", "))}},this),o.length){var e="Hypergrid.defaults.features = [\n"+g("\t'",o,"',\n")+"];";s.length&&(e+="\n\nThe following custom features are unregistered and will need to be registered prior to behavior instantiation:\n\n"+g("Features.add(",s,");\n")),a&&(e+="\n\n(You should provide meaningful names for your custom features rather than the generated names above.)"),console.warn("`grid.behavior.features` (array of feature constructors) has been deprecated as of version 2.1.0 in favor of `grid.properties.features` (array of feature names). Remove `features` array from your behavior and add `features` property to your grid state object (or Hypergrid.defaults), e.g.:\n\n"+e)}}.call(this));t.forEach(function(e,t){var i=new e;this.featureMap[i.$$CLASS_NAME]=i,t?this.featureChain.setNext(i):this.featureChain=i},this),this.featureChain&&this.featureChain.initializeOn(this.grid)},features:[],reset:function(e){var t=this.resetDataModel(e);t&&(this.CellEvent=s(this.grid)),this.scrollPositionX=this.scrollPositionY=0,this.rowPropertiesPrototype=Object.create(this.grid.properties,i("./rowProperties").rowPropertiesPrototypeDescriptors),this.clearColumns(),this.createColumns(),this.subgrids=e&&e.subgrids||!t&&this.subgrids||this.grid.properties.subgrids,this.setData(e)},setHeaders:function(t){if(t instanceof Array){var i=this.allColumns;t.forEach(function(e,t){i[t].header=e})}else"object"==typeof t&&this.allColumns.forEach(function(e){t[e.name]&&(e.header=t[e.name])})},setData:function(t,e){if(Array.isArray(t)||"function"==typeof t||(t=(e=t)&&e.data),void 0!==(t=this.unwrap(t))){if(!Array.isArray(t))throw"Expected data to be an array (of data row objects).";e=e||{};var i=this.unwrap(e.schema);this.subgrids.forEach(function(e){e.setData(t,i)}),this.grid.cellEditor&&this.grid.cellEditor.cancelEditing(),(e.apply||void 0===e.apply)&&this.reindex(),this.grid.allowEvents(this.getRowCount())}},get renderedColumnCount(){return this.grid.renderer.visibleColumns.length},get renderedRowCount(){return this.grid.renderer.visibleRows.length},get leftMostColIndex(){return this.grid.properties.showRowNumbers?this.rowColumnIndex:this.hasTreeColumn()?this.treeColumnIndex:0},clearColumns:function(){var e=this.schema,t=this.treeColumnIndex,i=this.rowColumnIndex;this.columnsCreated=!1,e[t]=e[t]||{},e[t].index=t,void 0===e[t].name&&(e[t].name=this.treeColumnNameDefault),void 0===e[t].header&&(e[t].header=this.treeColumnHeaderDefault),e[i]=e[i]||{},e[i].index=i,void 0===e[i].name&&(e[i].name=this.rowColumnNameDefault),void 0===e[i].header&&(e[i].header=""),this.columns=this.grid.decorateColumnArray(),this.allColumns=this.grid.decorateColumnArray(),this.allColumns[t]=this.columns[t]=this.newColumn(e[t]),this.allColumns[i]=this.columns[i]=this.newColumn(e[i]),this.columns[t].properties.propClassLayers=this.columns[i].properties.propClassLayers=this.grid.properties.propClassLayersMap.NO_ROWS,this.grid.renderer.resetRowHeaderColumnWidth()},getActiveColumn:function(e){return this.columns[e]},getActiveColumnIndex:function(e){var t=e instanceof o?e.index:e,i="number"==typeof index?"index":"name";return this.columns.findIndex(function(e){return e[i]===t})},getColumn:function(e){return this.allColumns[e]},newColumn:function(e){return new o(this,e)},addColumn:function(e){var t=this.newColumn(e),i=new c,n=i.getSynonyms(t.name);return this.columns.push(t),i.decorateObject(this.columns,n,t),this.allColumns.push(t),i.decorateObject(this.allColumns,n,t),t},createColumns:function(e){var t=this.dataModel.getSchema();a.normalizeSchema(t),a.decorateSchema(t),a.decorateColumnSchema(t,this.grid.properties.headerify),this.createDataRowProxy(),this.clearColumns(),e&&e.call(this),this.columnsCreated=!0,this.changed(),u.call(this.grid,"fin-hypergrid-columns-created")},createDataRowProxy:function(){},getColumnWidth:function(e){var t=(e!==this.treeColumnIndex||this.hasTreeColumn())&&this.getActiveColumn(e);return t?t.getWidth():0},setColumnWidth:function(e,t){(-2<=e?this.getActiveColumn(e):e).setWidth(t),this.stateChanged()},reindex:function(){this.dataModel.reindex()},clearObjectProperties:function(e,t){for(var i in e)e.hasOwnProperty(i)&&(void 0===t||!t&&0<=d.indexOf(i)||t&&d.indexOf(i)<0)&&delete e[i]},getState:function(){var e=JSON.parse(JSON.stringify(this.grid.properties));return this.clearObjectProperties(e.columnProperties,!1),e},clearState:function(){this.grid.clearState(),this.createColumns()},setState:function(e){this.addState(e,!0)},addState:function(e,t){t&&this.clearState();var i=this.grid.properties;i.settingState=t,h(i,e),delete i.settingState,this.reindex()},setAllColumnProperties:function(e){this.addAllColumnProperties(e,!0)},addAllColumnProperties:function(i,n){if(i){var r=this.grid.behavior.getColumns();Object.keys(i).forEach(function(e){var t=r[e];t&&t.addProperties(i[e],n)})}},setColumnOrder:function(e){if(Array.isArray(e)){var t=this.columns,i=this.allColumns,n=new c;t.length=0;var r=this.treeColumnIndex.toString(),o=this.rowColumnIndex.toString();Object.keys(t).forEach(function(e){switch(e){case r:case o:break;default:delete t[e]}}),e.forEach(function(e){t.push(i[e])}),n.decorateArray(t)}},setColumnOrderByName:function(e){if(Array.isArray(e)){var t=this.allColumns;this.setColumnOrder(e.map(function(e){return t[e].index}))}},setColumnIndexes:function(e,t){this.grid.properties.columnIndexes=e,t||this.grid.fireSyntheticOnColumnsChangedEvent()},showColumns:function(e,t,i,n){("number"==typeof e||Array.isArray(e))&&(n=i,i=t,t=e,e=!1);var r=this.columns,o=e?r:this.allColumns;"number"==typeof t&&(t=[t]);var s=t.map(function(e){return o[e]}).filter(function(e){return e});"number"!=typeof i&&(n=i,i=r.length),n||s.forEach(function(e){var t=r.indexOf(e);0<=t&&(r.splice(t,1),t<i&&--i)}),0<=i&&r.splice.apply(r,[i,0].concat(s)),this.grid.properties.columnIndexes=r.map(function(e){return e.index})},hideColumns:function(e,t){var i=Array.prototype.slice.call(arguments);i.push(-1),this.showColumns.apply(this,i)},resolveProperty:function(e){return this.grid.resolveProperty(e)},lookupFeature:function(e){return this.featureMap[e]},getFixedColumnsWidth:function(){for(var e,t=this.getFixedColumnCount(),i=0,n=this.leftMostColIndex,r=this.grid.properties,o="border-box"!==r.boxSizing,s=r.gridLinesVWidth;n<t;n++)(e=this.getColumnWidth(n))&&(i+=e,o&&(i+=s));return r.fixedLinesVWidth&&(i+=r.fixedLinesHWidth-s),i},getFixedColumnsMaxWidth:function(){return this.getFixedColumnsWidth()},setCursor:function(e){e.updateCursor(),this.featureChain.setCursor(e)},onMouseMove:function(e,t){this.featureChain&&(this.featureChain.handleMouseMove(e,t),this.setCursor(e))},onClick:function(e,t){this.featureChain&&(this.featureChain.handleClick(e,t),this.setCursor(e))},onContextMenu:function(e,t){this.featureChain&&(this.featureChain.handleContextMenu(e,t),this.setCursor(e))},onWheelMoved:function(e,t){this.featureChain&&(this.featureChain.handleWheelMoved(e,t),this.setCursor(e))},onMouseUp:function(e,t){this.featureChain&&(this.featureChain.handleMouseUp(e,t),this.setCursor(e))},onMouseDrag:function(e,t){this.featureChain&&(this.featureChain.handleMouseDrag(e,t),this.setCursor(e))},onKeyDown:function(e,t){this.featureChain&&(this.featureChain.handleKeyDown(e,t),this.setCursor(e))},onKeyUp:function(e,t){this.featureChain&&(this.featureChain.handleKeyUp(e,t),this.setCursor(e))},onDoubleClick:function(e,t){this.featureChain&&(this.featureChain.handleDoubleClick(e,t),this.setCursor(e))},handleMouseDown:function(e,t){this.featureChain&&(this.featureChain.handleMouseDown(e,t),this.setCursor(e))},handleMouseExit:function(e,t){this.featureChain&&(this.featureChain.handleMouseExit(e,t),this.setCursor(e))},changed:function(){this.grid.behaviorChanged()},shapeChanged:function(){this.grid.behaviorShapeChanged()},stateChanged:function(){this.grid.behaviorStateChanged()},isColumnReorderable:function(){return this.deprecated("isColumnReorderable()","grid.properties.columnsReorderable","2.1.3")},getColumnProperties:function(e){var t=(e!==this.treeColumnIndex||this.hasTreeColumn())&&this.getColumn(e);return t&&t.properties},setColumnProperties:function(e,t){var i=this.getColumn(e);if(!i)throw"Expected column.";var n=Object.assign(i.properties,t);return this.changed(),n},clearAllCellProperties:function(e){var t;for(void 0===e?(e=0,t=this.columns.length):t=e+1;e<t;e++){var i=this.getColumn(e);i&&i.clearAllCellProperties()}},getHiddenColumnDescriptors:function(){for(var e=this.grid.properties.columnIndexes,t=[],i=this.getActiveColumnCount(),n=0;n<i;n++)if(-1===e.indexOf(n)){var r=this.getActiveColumn(n);t.push({id:n,header:r.header,field:r.name})}return t},getFixedColumnCount:function(){return this.grid.properties.fixedColumnCount},setFixedColumnCount:function(e){this.grid.properties.fixedColumnCount=e},getFixedRowCount:function(){return this.getHeaderRowCount()+this.grid.properties.fixedRowCount},setFixedRowCount:function(e){this.grid.properties.fixedRowCount=e},endDragColumnNotification:function(){},getCursorAt:function(e,t){return null},getActiveColumnCount:function(){return this.columns.length},setScrollPositionX:function(e){this.scrollPositionX=e},getScrollPositionX:function(){return this.scrollPositionX},setScrollPositionY:function(e){this.scrollPositionY=e},getScrollPositionY:function(){return this.scrollPositionY},getCellEditorAt:function(e){return e.isDataColumn&&e.column.getCellEditorAt(e)},highlightCellOnHover:function(e,t){return e&&t},set cellPropertiesPrePaintNotification(e){throw new this.HypergridError("cellPropertiesPrePaintNotification has been deprecated as of v3.0.0. Code to inspect or mutate the render config object should be moved to the getCell hook.")},swapColumns:function(e,t){var i=this.columns,n=i[e];i[e]=i[t],i[t]=n,this.changed()},convertViewPointToDataPoint:function(e){return new n(this.getActiveColumn(e.x).index,e.y)},hasTreeColumn:function(e){return!1},getSelectionMatrixFunction:function(e){return function(){return null}},getRowHeaderColumn:function(){return this.allColumns[this.rowColumnIndex]},getTreeColumn:function(){return this.allColumns[this.treeColumnIndex]},autosizeAllColumns:function(){this.checkColumnAutosizing(!0),this.changed()},checkColumnAutosizing:function(t){var i=this.autoSizeRowNumberColumn(t)||this.autoSizeTreeColumn(t);return this.allColumns.findWithNeg(function(e){i=e.checkColumnAutosizing(t)||i}),i},autoSizeRowNumberColumn:function(e){if(this.grid.properties.showRowNumbers&&this.grid.properties.rowNumberAutosizing)return this.getRowHeaderColumn().checkColumnAutosizing(e)},autoSizeTreeColumn:function(e){if(this.grid.properties.showTreeColumn&&this.grid.properties.treeColumnAutosizing)return this.getTreeColumn().checkColumnAutosizing(e)},getColumns:function(){return this.allColumns},getActiveColumns:function(){return this.columns},getHiddenColumns:function(){for(var e=this.columns,t=this.allColumns,i=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&i.push(t[n]);return i.sort(function(e,t){return e.header<t.header}),i},getSelectedRows:function(){return this.grid.selectionModel.getSelectedRows()},getSelectedColumns:function(){return this.grid.selectionModel.getSelectedColumns()},getSelections:function(){return this.grid.selectionModel.getSelections()},getIndexedData:function(){return this.deprecated("getIndexedData()","getData()","3.0.0")}});function g(e,t,i){return e+t.join(i+e)+i}Object.defineProperties(f.prototype,{treeColumnIndex:{value:-1},treeColumnNameDefault:{value:"Tree",writable:!0},treeColumnHeaderDefault:{value:"Tree",writable:!0},rowColumnIndex:{value:-2},rowColumnNameDefault:{value:"RowHeader",writable:!0}}),f.prototype.applyAnalytics=f.prototype.reindex,f.prototype.mixIn(i("./rowProperties").mixin),f.prototype.mixIn(i("./gridCellProperties").mixin),f.prototype.mixIn(i("./dataModel").mixin),f.prototype.mixIn(i("./subgrids").mixin),e.exports=f},{"../Base":21,"../features":80,"../lib/assignOrDelete":88,"../lib/cellEventFactory":89,"../lib/dispatchGridEvent":91,"../lib/fields":94,"./Column":30,"./dataModel":41,"./gridCellProperties":42,"./rowProperties":43,"./subgrids":44,rectangular:16,synonomous:18}],30:[function(e,t,i){"use strict";var n=e("overrider"),o=e("../lib/toFunction"),r=e("../lib/assignOrDelete"),s=e("../lib/error"),a=e("../../images"),l={};function c(e,t){switch(typeof t){case"number":l.number||(console.warn("Column(behavior: object, index: number) overload has been deprecated as of v2.1.6 in favor of Column(behavior: object, columnSchema: object) overload with defined columnSchema.index. (Will be removed in a future release.)"),l.number=!0),t={index:t};break;case"string":var i,n;if(l.string||(console.warn("Column(behavior:object, name: string) overload (where name is sought in schema) has been deprecated as of v2.1.6 in favor of Column(behavior: object, columnSchema: object) overload with defined columnSchema.index. (Will be removed in a future release.)"),l.string=!0),i=t,(n=e.dataModel.schema.findIndex(function(e){return e.name===i}))<0)throw new this.HypergridError('Column named "'+i+'" not found in schema.');t={name:i,index:n};break;case"object":if(void 0===t.index){if(l.object||(console.warn("Column(behavior:object, columnSchema: object) overload (where columnSchema.index is undefined but columnSchema.name is sought in schema) has been deprecated as of v2.1.6 in favor of defined columnSchema.index. (Will be removed in a future release.)"),l.object=!0),i=t.name,(n=e.dataModel.schema.findIndex(function(e){return e.name===i}))<0)throw new this.HypergridError('Column named "'+i+'" not found in schema.');t.index=n}}if(void 0===t.index)throw new s("Column index required.");switch(this.behavior=e,this.dataModel=e.dataModel,Object.defineProperties(this,{index:{value:t.index},name:{enumerable:!0,value:t.name||t.index.toString()}}),this.properties=this.schema=t,t.index){case this.behavior.treeColumnIndex:var r=a[Object.create(this.properties.treeHeader,{isDataRow:{value:!0}}).leftIcon];this.properties.minimumColumnWidth=r?r.width+3:0;break;case this.behavior.rowColumnIndex:break;default:if(t.index<0)throw new this.HypergridError("New column index "+t.index+" out of range.")}}c.prototype={constructor:c.prototype.constructor,$$CLASS_NAME:"Column",HypergridError:s,mixIn:n.mixIn,set header(e){this.schema.header=e,this.behavior.grid.repaint()},get header(){return this.schema.header},set calculator(e){(e=function(e){if(!e)return;var t=' (for column "'+this.name+'").';if("function"==typeof e)e=e.toString();else if("string"!=typeof e)throw new s("Expected calculator function OR string containing calculator function OR calculator name"+t);var i,n,r=this.behavior.grid.properties.calculators||(this.behavior.grid.properties.calculators={});if(/^\w+$/.test(e)){if(!r[n=e])throw new s('Unknown calculator name "'+n+t)}else if(i=e.match(u))n=i[1];else if(e.test(d))n=e;else if(h.test(e))throw new s("Arrow function not permitted as column calculator "+t);r[n]||(r[n]=e);return r[n]=o(r[n]),r[n]}.call(this,e))!==this.schema.calculator&&(this.schema.calculator=e,this.behavior.grid.reindex())},get calculator(){return this.schema.calculator},set type(e){this.schema.type=e,this.behavior.reindex()},get type(){return this.schema.type},getValue:function(e,t){return this.dataModel.getValue(this.index,e,t)},setValue:function(e,t,i){return this.dataModel.setValue(this.index,e,t,i)},getWidth:function(){return this.properties.width||this.behavior.grid.properties.defaultColumnWidth},setWidth:function(e){(e=Math.max(this.properties.minimumColumnWidth,e))!==this.properties.width&&(this.properties.width=e,this.properties.columnAutosizing=!1)},checkColumnAutosizing:function(e){var t,i,n,r=this.properties;return r.columnAutosizing&&(t=r.width,i=r.preferredWidth||t,e=e||!r.columnAutosized,(t!==i||e&&void 0!==i)&&(r.width=e?i:Math.max(t,i),r.columnAutosizingMax&&r.width>r.columnAutosizingMax&&(r.width=r.columnAutosizingMax),r.columnAutosized=!isNaN(r.width),n=r.width!==t)),n},getCellType:function(e){var t=this.getValue(e);return this.typeOf(t)},getType:function(){var e=this.properties,t=e.type;return t||"unknown"!==(t=this.computeColumnType())&&(e.type=t),t},computeColumnType:function(){var e=this.behavior.getHeaderRowCount(),t=this.behavior.getRowCount(),i=this.getValue(e),n=this.typeOf(i);if(!n)return"unknown";for(var r=this.typeOf(i),o=e;o<t;o++)i=this.getValue(o),n=this.typeOf(i);return r},typeOf:function(e){if(null==e)return null;var t=typeof e;switch(t){case"object":return e.constructor.name.toLowerCase();case"number":return parseInt(e)===e?"int":"float";default:return t}},get properties(){return this._properties},set properties(e){this.addProperties(e,!0)},addProperties:function(e,t){e&&(!t&&this._properties||(this._properties=this.createColumnProperties()),r(this._properties,e))},setBackgroundColor:function(e){this.properties.backgroundColor!==e&&(this.properties.backgroundColor=e,this.behavior.grid.renderer.rebundleGridRenderers())},getCellEditorAt:function(e){var t=this.index,i=e.gridCell.y,n=e.properties.editor,r=Object.create(e,{format:{writable:!0,enumerable:!0,value:e.properties.format}}),o=e.subgrid.getCellEditorAt(t,i,n,r);return o&&!o.grid&&(o=void 0),o},getFormatter:function(){var e=this.properties.format;return this.behavior.grid.localization.get(e).format}};var h=/^(\(.*\)|\w+)\s*=>/,u=/^function\s+(\w+)\(/,d=/^function\s*\(/;c.prototype.mixIn(e("./cellProperties").mixin),c.prototype.mixIn(e("./columnProperties").mixin),t.exports=c},{"../../images":5,"../lib/assignOrDelete":88,"../lib/error":93,"../lib/toFunction":97,"./cellProperties":39,"./columnProperties":40,overrider:15}],31:[function(e,t,i){"use strict";var n=e("synonomous"),r=e("synonomous/transformers"),o={};function s(e,t){o[e]||(console.warn("."+e+" has been deprecated as of v3.0.0. (Will be removed in a future release.) "+(t||"")),o[e]=!0)}i.mixin={columnEnumSynchronize:function(){this._columnEnumKey=this._columnEnumKey||"toAllCaps";var t=this._columnEnum||(this._columnEnum={}),e=this.allColumns,i=new n({transformations:[this._columnEnumKey]}).decorateArray(e.slice());i.length=0,Object.keys(i).reduce(function(e,t){return e[t]=i[t].index,e},t),Object.keys(t).forEach(function(e){e in i||delete t[e]})},get columnEnum(){return o.columnEnum||(console.warn(".columnEnum[propName] has been deprecated as of v3.0.0 in favor of either .getColumns()[propName].index or .schema[propName].index. (Will be removed in a future release.)"),o.columnEnum=!0),this._columnEnum},get columnEnumKey(){return s("columnEnumKey"),"verbatim"===this._columnEnumKey?"passThrough":this._columnEnumKey},set columnEnumKey(t){s("columnEnumKey");var e=typeof t,i=Object.keys(r);switch(e){case"string":if("passThrough"===t)t="verbatim";else if(!(t in r))throw new this.HypergridError("Expected registered transformer for .columnEnumKey value from: "+i);this._columnEnumKey=t;break;case"function":if(this._columnEnumKey=i.find(function(e){return t===r[e]}),!this._columnEnumKey)throw new this.HypergridError('.columnEnumKey has been deprecated as of v3.0.0 and now accepts a function reference (or string key) from require("synonmous/transformers"): '+i);break;default:throw new this.HypergridError("Expected string or function for .columnEnumKey assignment but received "+e+".")}}},i.mixInShared={get columnEnumDecorators(){return s("columnEnumDecorators"),r}}},{synonomous:18,"synonomous/transformers":19}],32:[function(e,t,i){"use strict";var n=e("./hooks"),r=e("./fallbacks"),o=e("./polyfills"),s={};var a={true:"OPEN",false:"CLOSE",null:"INDENT"};t.exports={injectPolyfills:function(t){Object.keys(o).forEach(function(e){t[e]||(t[e]=o[e])})},injectCode:function(e){e.install(r,{inject:!0})},addDeprecationWarnings:function(){var e=this.grid;Object.defineProperties(this.dataModel,{grid:{configurable:!0,enumerable:!1,get:function(){return s.grid||(console.warn("dataModel.grid has been deprecated as of v3.0.0. (Will be removed in a future release.) Data models should have no direct knowledge of or access to the grid. (If your data model needs to call grid methods, add a data event to your grid with `grid.addEventListener('fin-hypergrid-data-my-event', myHandler)` and trigger it from your data model with `this.dispatchEvent('fin-hypergrid-data-my-event')` or `this.dispatchEvent({ type: 'fin-hypergrid-data-my-event' })`. If you need access to the grid object from within a `getCell` or `getCellEditAt` override, define `grid` in the same closure as the override.)"),s.grid=!0),e}},dataSource:{configurable:!0,enumerable:!1,get:function(){return s.dataSource||(console.warn("dataModel.dataSource has been deprecated as of 3.0.0 in favor of `dataModel`. (Will be removed in a future release.) The _external_ data model, formerly `grid.behavior.dataModel.dataSource`, is now `grid.behavior.dataModel`."),s.dataSource=!0),this.dataModel}}})},addFriendlierDrillDownMapKeys:function(){var i=this.dataModel.drillDownCharMap;i&&Object.keys(a).forEach(function(t){if(t in i){var e=a[t];e in i||Object.defineProperty(i,e,{get:function(){return this[t]},set:function(e){this[t]=e}})}})},injectDefaulthooks:function(e){e.install(n,{inject:!0})}}},{"./fallbacks":35,"./hooks":36,"./polyfills":38}],33:[function(e,t,i){"use strict";var r=e("./events"),o=e("../../lib/dispatchGridEvent"),s=/^fin-hypergrid-(data|schema)(-[a-z]+)+$/;t.exports=function(e){var t;switch(typeof e){case"string":e={type:t=e};break;case"object":if("type"in e){t=e.type;break}default:throw new this.HypergridError("Expected data model event to be: (string | {type:string})")}if(!s.test(t))throw new this.HypergridError('Expected data model event type "'+t+'" to match '+s+".");var i=r[e.type];if(i)var n=i.call(this,e);return void 0!==n?n:o.call(this,e.type,e)}},{"../../lib/dispatchGridEvent":91,"./events":34}],34:[function(e,t,i){"use strict";t.exports={"fin-hypergrid-schema-loaded":function(e){this.behavior.createColumns()},"fin-hypergrid-data-loaded":function(e){this.repaint()},"fin-hypergrid-data-shape-changed":function(e){this.behaviorShapeChanged()},"fin-hypergrid-data-prereindex":function(e){this.stashRowSelections(),this.stashColumnSelections()},"fin-hypergrid-data-postreindex":function(e){this.selectionModel.reset(),this.unstashRowSelections(),this.unstashColumnSelections(),this.behaviorShapeChanged()}}},{}],35:[function(e,t,i){"use strict";t.exports={apply:function(){},isTree:function(){return!1},isTreeCol:function(e){return!1},toggleRow:function(e,t,i){},getColumnCount:function(){return this.getSchema().length},getRow:function(e){return this.$rowProxy$.$y$=e,this.$rowProxy$},getData:function(e){var t,i,n,r=this.getRowCount(),o=new Array(r);for(t=0;t<r;t++)(i=this.getRow(t))&&(o[t]=Object.assign({},i),e&&(n=this.getRowMetadata(t))&&(o[t][e]=n));return o},setData:function(e){},setValue:function(e,t,i){console.warn("dataModel.setValue("+e+", "+t+', "'+i+'") called but no implementation. Data not saved.')},setSchema:function(e){console.warn("dataModel.setSchema(schema) called but no implementation. Schema not updated.")},getRowIndex:function(e){return e},getRowMetadata:function(e,t){return this.metadata[e]||void 0!==t&&(this.metadata[e]=Object.create(t))},getMetadataStore:function(){return this.metadata},setRowMetadata:function(e,t){return t?this.metadata[e]=t:delete this.metadata[e],t},setMetadataStore:function(e){this.metadata=e||[]}}},{}],36:[function(e,t,i){"use strict";i.getCell=function(e,t){return e.grid.cellRenderers.get(t)},i.getCellEditorAt=function(e,t,i,n){return n.grid.cellEditors.create(i,n)}},{}],37:[function(e,t,i){"use strict";var n=e("../Behavior"),r=e("datasaur-local"),o=e("./decorators"),s=e("./dispatchDataModelEvent"),a=n.extend("Local",{initialize:function(e,t){this.setData(t)},get schema(){return this.dataModel.getSchema()},set schema(e){this.dataModel.setSchema(e)},dataModelEventHandlers:e("./events").dataModelEventHandlers,createColumns:function(){this.super.createColumns.call(this,l)},createDataRowProxy:function(){var i=this.dataModel,n={};Object.defineProperty(n,"$y$",{enumerable:!1,writable:!0}),this.schema.forEach(function(e,t){Object.defineProperty(n,e.name,{enumerable:!0,get:function(){return i.getValue(t,this.$y$)},set:function(e){return i.setValue(t,this.$y$,e)}})}),i.$rowProxy$=n},getNewDataModel:function(e){return(e=e||{}).dataModel?e.dataModel:e.DataModel?new e.DataModel:new r},resetDataModel:function(e){var t=this.getNewDataModel(e),i=t&&t!==this.dataModel;return i&&(this.dataModel=this.decorateDataModel(t,e),o.addDeprecationWarnings.call(this),o.addFriendlierDrillDownMapKeys.call(this)),i},decorateDataModel:function(e,t){return o.injectPolyfills(e),o.injectCode(e),o.injectDefaulthooks(e),e.setMetadataStore(t&&t.metadata),this.boundDispatchEvent=this.boundDispatchEvent||s.bind(this.grid),e.addListener(this.boundDispatchEvent),e},get charMap(){return this.dataModel.drillDownCharMap},cellClicked:function(e){return this.dataModel.toggleRow(e.dataCell.y,e.dataCell.x)},hasTreeColumn:function(){return this.dataModel.isTree()&&this.grid.properties.showTreeColumn}});function l(){this.schema.forEach(function(e){this.addColumn(e)},this),this.columnEnumSynchronize()}a.prototype.mixIn(e("./columnEnum").mixin),a.prototype.mixIn.call(a,e("./columnEnum").mixInShared),t.exports=a},{"../Behavior":29,"./columnEnum":31,"./decorators":32,"./dispatchDataModelEvent":33,"./events":34,"datasaur-local":9}],38:[function(e,t,i){"use strict";function n(){}t.exports={install:function(t){if(t){var i=Array.isArray(t);(i?t:Object.keys(t).filter(function(e){return"function"==typeof t[e]&&"constructor"!==e&&"initialize"!==e})).forEach(function(e){this[e]||(this[e]=i?n:t[e])},this)}},dispatchEvent:function(t){this.handlers&&this.handlers.forEach(function(e){e.call(this,t)},this)},addListener:function(e){this.handlers?this.handlers.indexOf(e)<0&&this.handlers.push(e):this.handlers=[e]},removeListener:function(e){if(this.handlers&&this.handlers.length){var t=this.handlers.indexOf(e);0<=t&&delete this.handlers[t]}},removeAllListeners:function(){this.handlers&&(this.handlers.length=0)}}},{}],39:[function(e,t,i){"use strict";var n=e("../lib/assignOrDelete");function o(e,t){return this.getCellOwnProperties(e,t)||r.call(this,e,t)}function r(e,t){var i=(t||this.dataModel).getRowMetadata(e,null),n=this.properties;switch(this.index){case this.behavior.treeColumnIndex:n=n.treeHeader;break;case this.behavior.rowColumnIndex:n=n.rowHeader;break;default:t&&"filter"===t.type&&(n=this.properties.filterProperties)}return i[this.name]=Object.create(n)}i.mixin={getCellProperties:function(e,t){return this.getCellOwnProperties(e,t)||this.properties},setCellProperties:function(e,t,i){if(t)return Object.assign(r.call(this,e,i),t)},addCellProperties:function(e,t,i){if(t)return n(o.call(this,e,i),t)},getCellOwnProperties:function(e,t){var i;return(i=(t||this.dataModel).getRowMetadata(e))&&i&&i[this.name]||null},deleteCellOwnProperties:function(e,t){var i=(t=t||this.dataModel).getRowMetadata(e);i&&(delete i[this.name],0===Object.keys(i).length&&t.setRowMetadata(e))},getCellProperty:function(e,t,i){return this.getCellProperties(e,i)[t]},setCellProperty:function(e,t,i,n){var r=o.call(this,e,n);return r[t]=i,r},deleteCellProperty:function(e,t,i){var n=this.getCellOwnProperties(e,i);n&&delete n[t]},clearAllCellProperties:function(){this.behavior.subgrids.forEach(function(e){for(var t=e.getRowCount();t--;)this.deleteCellOwnProperties(t,e)},this)}}},{"../lib/assignOrDelete":88}],40:[function(e,t,i){"use strict";function n(){var e,t=this,i=t.behavior.grid.properties;switch(e=Object.create(i,{index:{get:function(){return t.index}},name:{get:function(){return t.name}},field:{get:function(){return t.name}},columnName:{get:function(){return t.name}},header:{get:function(){return t.header},set:function(e){this!==t.properties&&(i.header=e),t.header=e}},type:{get:function(){return t.type},set:function(e){this!==t.properties&&(i.type=e),t.type=e}},calculator:{get:function(){return t.calculator},set:function(e){this!==t.properties&&(i.calculator=e),t.calculator=e}},toJSON:{value:function(){return Object.assign({header:this.header,type:this.type,calculator:this.calculator},this)}}}),Object.defineProperties(e,{rowHeader:{value:Object.create(e,n.rowHeaderDescriptors)},treeHeader:{value:Object.create(e,n.treeHeaderDescriptors)},columnHeader:{value:Object.create(e,n.columnHeaderDescriptors)},filterProperties:{value:Object.create(e,n.filterDescriptors)}}),t.index){case t.behavior.treeColumnIndex:e=e.treeHeader;break;case t.behavior.rowColumnIndex:e=e.rowHeader}return e}n.treeHeaderDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderFont},set:function(e){this.treeHeaderFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderColor},set:function(e){this.treeHeaderColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderBackgroundColor},set:function(e){this.treeHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderForegroundSelectionFont},set:function(e){this.treeHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderForegroundSelectionColor},set:function(e){this.treeHeaderForegroundSelectionColor=e}},renderer:{configurable:!0,enumerable:!0,get:function(){return this.isDataRow?this.treeRenderer:this.grid.properties.renderer},set:function(e){this.treeRenderer=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderBackgroundSelectionColor},set:function(e){this.treeHeaderBackgroundSelectionColor=e}},columnAutosizing:{configurable:!0,enumerable:!0,get:function(){return this.treeColumnAutosizing},set:function(e){this.treeColumnAutosizing=e}},columnAutosizingMax:{configurable:!0,enumerable:!0,get:function(){return this.treeColumnAutosizingMax},set:function(e){this.treeColumnAutosizingMax=e}}},n.rowHeaderDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderFont},set:function(e){this.rowHeaderFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderColor},set:function(e){this.rowHeaderColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderBackgroundColor},set:function(e){this.rowHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderForegroundSelectionFont},set:function(e){this.rowHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderForegroundSelectionColor},set:function(e){this.rowHeaderForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderBackgroundSelectionColor},set:function(e){this.rowHeaderBackgroundSelectionColor=e}},leftIcon:{configurable:!0,enumerable:!0,get:function(){var e;if(this.grid.properties.rowHeaderCheckboxes)return this.isDataRow?e=this.isRowSelected?"checked":"unchecked":this.isHeaderRow?e=this.allRowsSelected?"checked":"unchecked":this.isFilterRow&&(e="filter-off"),e},set:function(e){Object.defineProperty(this,"leftIcon",{configurable:!0,enumerable:!0,writable:!0,value:e})}},columnAutosizing:{configurable:!0,enumerable:!0,get:function(){return this.rowNumberAutosizing},set:function(e){this.rowNumberAutosizing=e}}},n.filterDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.filterFont},set:function(e){this.filterFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.filterColor},set:function(e){this.filterColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.filterBackgroundColor},set:function(e){this.filterBackgroundColor=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.filterForegroundSelectionColor},set:function(e){this.filterForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.filterBackgroundSelectionColor},set:function(e){this.filterBackgroundSelectionColor=e}},halign:{configurable:!0,enumerable:!0,get:function(){return this.filterHalign},set:function(e){this.filterHalign=e}},renderer:{configurable:!0,enumerable:!0,get:function(){return this.filterRenderer},set:function(e){this.filterRenderer=e}},editor:{configurable:!0,enumerable:!0,get:function(){return this.filterEditor},set:function(e){this.filterEditor=e}},rightIcon:{configurable:!0,enumerable:!0,get:function(){var e;return this.filterable&&(e=this.filter?"filter-on":"filter-off"),e},set:function(e){Object.defineProperty(this,"rightIcon",{configurable:!0,enumerable:!0,writable:!0,value:e})}}},n.columnHeaderDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderFont},set:function(e){this.columnHeaderFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderColor},set:function(e){this.columnHeaderColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderBackgroundColor},set:function(e){this.columnHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderForegroundSelectionFont},set:function(e){this.columnHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(e){this.columnHeaderForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(e){this.columnHeaderBackgroundSelectionColor=e}},halign:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderHalign},set:function(e){this.columnHeaderHalign=e}},format:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderFormat},set:function(e){this.columnHeaderFormat=e}},renderer:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderRenderer},set:function(e){this.columnHeaderRenderer=e}},leftIcon:{writable:!0,value:void 0},centerIcon:{writable:!0,value:void 0},rightIcon:{writable:!0,value:void 0}},i.mixin={createColumnProperties:n}},{}],41:[function(e,t,i){"use strict";i.mixin={getSchema:function(){return this.dataModel.getSchema()},setSchema:function(e){this.dataModel.setSchema(e)},getRowCount:function(){return this.dataModel.getRowCount()},getValue:function(e,t,i){if(i)return i.getValue(e,t);var n=new this.CellEvent;return n.resetDataXY(e,t,i)?n.value:void 0},setValue:function(e,t,i,n){if(n)n.setValue(e,t,i);else{var r=new this.CellEvent;r.resetDataXY(e,t,n)&&(r.value=i)}},reindex:function(){this.dataModel.apply()},getRow:function(e){return this.dataModel.getRow(e)},getData:function(){return this.dataModel.getData()}}},{}],42:[function(e,t,i){"use strict";i.mixin={getCellOwnProperties:function(e,t,i){return 1===arguments.length?e.column.getCellOwnProperties(e.dataCell.y,e.subgrid):this.getColumn(e).getCellOwnProperties(t,i)},getCellProperties:function(e,t,i){return 1===arguments.length?e.properties:this.getColumn(e).getCellProperties(t,i)},getCellProperty:function(e,t,i,n){return"object"==typeof e?(i=t,e.properties[i]):this.getColumn(e).getCellProperty(t,i,n)},setCellProperties:function(e,t,i,n){return"object"==typeof e?(i=t,e.column.setCellProperties(e.dataCell.y,i,e.subgrid)):this.getColumn(e).setCellProperties(t,i,n)},addCellProperties:function(e,t,i,n){return"object"==typeof e?(i=t,e.column.addCellProperties(e.dataCell.y,i,e.subgrid)):this.getColumn(e).addCellProperties(t,i,n)},setCellProperty:function(e,t,i,n,r){var o;return"object"==typeof e?(n=i,i=t,o=e.setCellProperty(i,n)):(o=this.getColumn(e).setCellProperty(t,i,n,r),this.grid.renderer.resetCellPropertiesCache(e,t,r)),o}}},{}],43:[function(e,t,i){"use strict";i.mixin={getFixedRowsHeight:function(){for(var e,t,i,n,r=this.subgrids,o=0,s=this.grid.properties,a="border-box"!==s.boxSizing,l=s.gridLinesHWidth,c=0;c<r.length&&!t;++c){for(n=(t=(e=r[c]).isData)?s.fixedRowCount:e.getRowCount(),i=0;i<n;++i)o+=this.getRowHeight(i,e),a&&(o+=l);t&&s.fixedLinesHWidth&&(o+=s.fixedLinesHWidth-l)}return o},getRowProperties:function(e,t,i){"object"==typeof e&&(i=e.subgrid,e=e.dataCell.y);var n=(i||this.dataModel).getRowMetadata(e,void 0===t?void 0:null);return n&&(n.__ROW||void 0!==t&&(n.__ROW=Object.create(t)))},setRowProperties:function(e,t,i){if(t){"object"==typeof e&&(i=e.subgrid,e=e.dataCell.y);var n=(i||this.dataModel).getRowMetadata(e,null);n&&(n.__ROW=Object.create(this.rowPropertiesPrototype),this.addRowProperties(e,t,i,n.__ROW),this.stateChanged())}},setRowProperty:function(e,t,i,n){var r,o="height"===t;void 0!==i?(r=this.getRowProperties(e,this.rowPropertiesPrototype,n))[t]=i:(r=this.getRowProperties(e,void 0,n))&&delete r[o?"_height":t],o?this.shapeChanged():this.stateChanged()},addRowProperties:function(e,i,t,n){var r,o;i&&((n=n||this.getRowProperties(e,this.rowPropertiesPrototype,t))&&(Object.keys(i).forEach(function(e){var t=i[e];void 0!==t?n[e]=t:(delete n[(r="height"===e)?"_height":e],o=o||r)}),o?this.shapeChanged():this.stateChanged()))},getRowHeight:function(e,t){var i=this.getRowProperties(e,void 0,t);return i&&i.height||this.grid.properties.defaultRowHeight},setRowHeight:function(e,t,i){this.setRowProperty(e,"height",t,i)}},i.rowPropertiesPrototypeDescriptors={height:{enumerable:!0,get:function(){return this._height||this.defaultRowHeight},set:function(e){e=Math.max(5,Math.ceil(e)),isNaN(e)&&(e=void 0),e!==this._height&&(e?Object.defineProperty(this,"_height",{value:e,configurable:!0}):delete this._height,this.grid.behaviorStateChanged())}}}},{}],44:[function(e,t,i){"use strict";var n=e("../dataModels/index");function s(e){var t;switch(typeof e){case"string":t=n.get(e);break;case"function":t=e;break;default:throw new this.HypergridError("Expected subgrid ref to be registered name or constructor, but found "+typeof e+".")}return t}i.mixin={set subgrids(e){var t=this._subgrids=[];t.lookup={},e.forEach(function(e){e&&t.push(this.createSubgrid(e))},this),this.shapeChanged()},get subgrids(){return this._subgrids},createSubgrid:function(e,t){var i,n,r;"data"===e?i=this.dataModel:e instanceof Array&&e.length?(n=s.call(this,e[0]),r=e.slice(1),i=this.createApply(n,r,void 0,{grid:this.grid}),i=this.decorateDataModel(i)):"object"==typeof e?i=e:(n=s.call(this,e),r=Array.prototype.slice.call(arguments,1),i=this.createApply(n,r,void 0,{grid:this.grid}),i=this.decorateDataModel(i)),i.type||(i.type="data");var o="data"===i.type&&i.type||i.name||i.type;return this._subgrids.lookup[o]=this._subgrids.lookup[o]||i,i["is"+i.type[0].toUpperCase()+i.type.substr(1)]=!0,i},getHeaderRowCount:function(){var t=0;return this.subgrids.find(function(e){if(e.isData)return!0;t+=e.getRowCount()}),t},getFooterRowCount:function(){var i;return this.subgrids.reduce(function(e,t){return i&&!t.isData?e+=t.getRowCount():i=t.isData,e},0)},getLogicalRowCount:function(){return this.subgrids.reduce(function(e,t){return e+t.getRowCount()},0)}}},{"../dataModels/index":65}],45:[function(e,t,i){"use strict";var n=e("../Base"),r=e("../lib/DOM/effects"),a=e("../lib/Localization"),o=n.extend("CellEditor",{initialize:function(t,e){for(var i in e)this[i]=e[i];this.event=e;var n=this.event.value;n instanceof Array&&(n=n[1]),this.grid=t,(this.grid.cellEditor=this).locale=t.localization.locale;var r=this.grid.localization.get(e.format);r!==a.prototype.string&&"string"!==e.format&&(this.localizer=r),this.initialValue=n;var o=document.createElement("DIV");o.innerHTML=this.grid.modules.templater.render(this.template,this),this.el=o.firstChild,this.input=this.el,this.errors=0;var s=this;this.el.addEventListener("keyup",this.keyup.bind(this)),this.el.addEventListener("keydown",function(e){9===e.keyCode&&e.preventDefault(),t.fireSyntheticEditorKeyDownEvent(s,e)}),this.el.addEventListener("keypress",function(e){t.fireSyntheticEditorKeyPressEvent(s,e)}),this.el.addEventListener("mousedown",function(e){s.onmousedown(e)})},onmousedown:function(e){e.stopPropagation()},localizer:a.prototype.null,specialKeyups:{9:"stopEditing",13:"stopEditing",27:"cancelEditing"},keyup:function(e){var t,i,n=this.grid,r=this.event.properties,o=r.feedbackCount,s=n.canvas.getKeyChar(e);if((t=this.specialKeyups[e.keyCode])&&(i=this[t](o))&&n.repaint(),r.mappedNavKey(s,e.ctrlKey)&&(!t&&(i=this.stopEditing(o))&&n.repaint(),i)){var a=n.canvas.newEvent(e,"fin-editor-keydown",{grid:n,alt:e.altKey,ctrl:e.ctrlKey,char:s,legacyChar:e.legacyKey,code:e.charCode,key:e.keyCode,meta:e.metaKey,shift:e.shiftKey,identifier:e.key,editor:this});n.delegateKeyDown(a)}return this.grid.fireSyntheticEditorKeyUpEvent(this,e),i},checkEditorPositionFlag:!1,gridRenderedNotification:function(){this.checkEditor()},scrollValueChangedNotification:function(){this.checkEditorPositionFlag=!0},moveEditor:function(){this.setBounds(this.event.bounds)},beginEditing:function(){this.grid.fireRequestCellEdit(this.event,this.initialValue)&&(this.checkEditorPositionFlag=!0,this.checkEditor())},setEditorValue:function(e){this.input.value=this.localizer.format(e)},showEditor:function(){this.el.style.display="inline"},hideEditor:function(){this.el.style.display="none"},stopEditing:function(e){var t=this.input.value;try{var i=this.validateEditorValue(t);if(!i)var n=this.getEditorValue(t)}catch(e){i=e}if(!i&&this.grid.fireSyntheticEditorDataChangeEvent(this,this.initialValue,n))try{this.saveEditorValue(n)}catch(e){i=e}return i?0<=e?this.errorEffectBegin(++this.errors%e==0&&i):this.cancelEditing():(this.hideEditor(),this.grid.cellEditor=null,this.el.remove()),!i},cancelEditing:function(){return this.setEditorValue(this.initialValue),this.hideEditor(),this.grid.cellEditor=null,this.el.remove(),!0},errorEffectBegin:function(e){if(!this.effecting){var t=this.grid.properties.feedbackEffect,i=r[t.name||t];if(i){var n=Object.assign({},t.options);n.callback=this.errorEffectEnd.bind(this,e),this.effecting=!0,i.call(this,n)}}},errorEffectEnd:function(e,t){if(e){var i='Invalid value. To resolve, do one of the following:\n\n   * Correct the error and try again.\n         - or -\n   * Cancel editing by pressing the "esc" (escape) key.';"string"!=typeof(e=e.message||e)&&(e=""),this.localizer.expectation&&(e=e?e+"\n"+this.localizer.expectation:this.localizer.expectation),e&&(/[\n\r]/.test(e)&&(e=(e="\n"+e).replace(/[\n\r]+/g,"\n\n   * ")),i+="\n\nAdditional information about this error: "+e),setTimeout(function(){alert(i)})}this.effecting=!1},saveEditorValue:function(e){var t=!(e&&e===this.initialValue)&&this.grid.fireBeforeCellEdit(this.event.gridCell,this.initialValue,e,this);return t&&(this.event.value=e,this.grid.fireAfterCellEdit(this.event.gridCell,this.initialValue,e,this)),t},getEditorValue:function(e){return this.localizer.parse(e||this.input.value)},validateEditorValue:function(e){return this.localizer.invalid&&this.localizer.invalid(e||this.input.value)},takeFocus:function(){var e=this.el,t=e.style.left,i=e.style.top;e.style.left=e.style.top=0;var n=window.scrollX,r=window.scrollY;this.input.focus(),window.scrollTo(n,r),this.selectAll(),e.style.left=t,e.style.top=i},selectAll:function(){},setBounds:function(e){var t=this.el.style;t.left=s(e.x),t.top=s(e.y),t.width=s(e.width),t.height=s(e.height)},checkEditor:function(){this.checkEditorPositionFlag&&(this.checkEditorPositionFlag=!1,this.event.isCellVisible?(this.setEditorValue(this.initialValue),this.attachEditor(),this.moveEditor(),this.showEditor(),this.takeFocus()):this.hideEditor())},attachEditor:function(){this.grid.div.appendChild(this.el)},template:""});function s(e){return e+"px"}t.exports=o},{"../Base":21,"../lib/DOM/effects":82,"../lib/Localization":84}],46:[function(e,t,i){"use strict";var n=e("./CellEditor").extend("Color",{template:'<input type="color" lang="{{locale}}" style="{{style}}">'});t.exports=n},{"./CellEditor":45}],47:[function(e,t,i){"use strict";var n=e("./CellEditor"),r=window.chrome,o=window.navigator,s=o.vendor,a=-1<o.userAgent.indexOf("OPR"),l=-1<o.userAgent.indexOf("Edge"),c=!o.userAgent.match("CriOS")&&null!=r&&"Google Inc."===s&&0==a&&0==l,h=n.extend("Date",{initialize:function(e){var t;c?(t="chromeDate",this.template='<input type="date">'):(t="date",this.template='<input type="text" lang="{{locale}}">',this.selectAll=function(){var e=this.getEditorValue().length;this.input.setSelectionRange(0,e)}),this.localizer=e.localization.get(t)}});t.exports=h},{"./CellEditor":45}],48:[function(e,t,i){"use strict";var n=e("./Textfield").extend("Number",{initialize:function(e){this.localizer=e.localization.get("number")}});t.exports=n},{"./Textfield":51}],49:[function(e,t,i){"use strict";var n=e("./CellEditor").extend("Slider",{template:'<input type="range" lang="{{locale}}" style="{{style}}">'});t.exports=n},{"./CellEditor":45}],50:[function(e,t,i){"use strict";var n=e("./CellEditor").extend("Spinner",{template:'<input type="number" lang="{{locale}}" style="{{style}}">'});t.exports=n},{"./CellEditor":45}],51:[function(e,t,i){"use strict";var n=e("./CellEditor"),r=e("../lib/Localization"),o=n.extend("Textfield",{template:'<input type="text" lang="{{locale}}" class="hypergrid-textfield" style="{{style}}">',initialize:function(){this.input.style.textAlign=this.event.properties.halign,this.input.style.font=this.event.properties.font},localizer:r.prototype.string,selectAll:function(){this.input.setSelectionRange(0,this.input.value.length)}});t.exports=o},{"../lib/Localization":84,"./CellEditor":45}],52:[function(e,t,i){"use strict";var n,r=e("../lib/Registry"),o=r.extend("CellEditors",{BaseClass:e("./CellEditor"),initialize:function(){this.add(e("./Color")),this.add(e("./Date")),this.add(e("./Number")),this.add(e("./Slider")),this.add(e("./Spinner")),this.add(e("./Textfield"))},get:function(e){if(e&&"celleditor"===e.toLowerCase())return n||(console.warn('grid.cellEditors.get("'+e+'") method call has been deprecated as of v2.1.0 in favor of grid.cellEditors.BaseClass property. (Will be removed in a future release.)'),n=!0),this.BaseClass;try{var t=r.prototype.get.call(this,e)}catch(e){}return t}});t.exports=new o},{"../lib/Registry":85,"./CellEditor":45,"./Color":46,"./Date":47,"./Number":48,"./Slider":49,"./Spinner":50,"./Textfield":51}],53:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("Button",{paint:function(e,t){var i=t.value,n=t.bounds,r=n.x+1,o=n.y+1,s=n.width-2,a=n.height-2,l=a/2,c=e.createLinearGradient(r,o,r,o+a);"border-box"===t.boxSizing&&(s-=t.gridLinesVWidth,a-=t.gridLinesHWidth),t.mouseDown?(c.addColorStop(0,"#B5CBED"),c.addColorStop(1,"#4d74ea")):(c.addColorStop(0,"#ffffff"),c.addColorStop(1,"#aaaaaa")),e.cache.fillStyle=t.backgroundColor,e.fillRect(n.x,n.y,n.width,n.height),e.cache.fillStyle=c,e.cache.strokeStyle="#000000",this.roundRect(e,r,o,s,a,l,c,!0);var h=(s-e.getTextWidth(i))/2,u=(a-e.getTextHeight(e.cache.font).descent)/2;e.cache.textBaseline="middle",e.cache.fillStyle="#333333",e.cache.font=a-2+"px sans-serif",t.backgroundColor="rgba(0,0,0,0)",e.fillText(i,r+h,o+u)}});t.exports=n},{"./CellRenderer":54}],54:[function(e,t,i){"use strict";var n=e("../Base").extend("CellRenderer",{paint:function(e,t){},roundRect:function(e,t,i,n,r,o,s,a){a||(a=!0),o||(o=5),e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+o),e.lineTo(t+n,i+r-o),e.quadraticCurveTo(t+n,i+r,t+n-o,i+r),e.lineTo(t+o,i+r),e.quadraticCurveTo(t,i+r,t,i+r-o),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath(),a&&e.stroke(),s&&e.fill(),e.closePath()}});t.exports=n},{"../Base":21}],55:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("ErrorCell",{paint:function(e,t,i){var n=t.bounds.x,r=t.bounds.y,o=t.bounds.height;e.cache.fillStyle="#FFD500",e.fill(),e.cache.fillStyle="#A00",e.cache.textAlign="start",e.cache.textBaseline="middle",e.cache.font='bold 6pt "arial narrow", verdana, geneva',e.fillText(i,n+4,r+o/2+.5)}});t.exports=n},{"./CellRenderer":54}],56:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("LastSelection",{paint:function(e,t){var i=0<e.alpha(t.selectionRegionOverlayColor),n=0<e.alpha(t.selectionRegionOutlineColor);if(i||n){var r=t.bounds.x,o=t.bounds.y,s=t.bounds.width,a=t.bounds.height;e.beginPath(),e.rect(r,o,s,a),i&&(e.cache.fillStyle=t.selectionRegionOverlayColor,e.fill()),n&&(e.cache.lineWidth=1,e.cache.strokeStyle=t.selectionRegionOutlineColor,e.stroke()),e.closePath()}}});t.exports=n},{"./CellRenderer":54}],57:[function(e,t,i){"use strict";var n=e("./CellRenderer"),O=e("rectangular").Rectangle,T=e("../../images"),H=/\s\s+/g,r=n.extend("SimpleCell",{paint:function(e,t){var i,n,r,o,s,a,l,c,h,u,d,f,g,p,m,v,b=t.value,C=t.bounds,w=C.x,y=C.y,x=C.width,S=C.height,R=t.iconPadding,E=void 0===t.prefillColor,A=t.snapshot,M=A&&E,D=0;b&&b.constructor===Array?(s=b[0],a=b[2],(b=t.exec(b[1]))&&void 0!==b.naturalWidth&&(l=b,b=null)):(s=T[t.leftIcon],l=T[t.centerIcon],a=T[t.rightIcon]);var k=b||t.renderFalsy&&0==b;if(k?(b=t.formatValue(b,t),n=t.isSelected?t.foregroundSelectionFont:t.font,i=e.cache.strokeStyle=t.isSelected?t.foregroundSelectionColor:t.color):b="",M=M&&b===A.value&&n===A.textFont&&i===A.textColor,v=[],m=0,t.isCellHovered&&t.hoverCellHighlight.enabled?d=t.hoverCellHighlight.backgroundColor:t.isRowHovered&&(u=t.hoverRowHighlight).enabled?d=t.isDataColumn||!u.header||void 0===u.header.backgroundColor?u.backgroundColor:u.header.backgroundColor:t.isColumnHovered&&(u=t.hoverColumnHighlight).enabled&&(d=t.isDataRow||!u.header||void 0===u.header.backgroundColor?u.backgroundColor:u.header.backgroundColor),e.alpha(d)<1&&(t.isSelected&&(f=t.backgroundSelectionColor),e.alpha(f)<1&&((p=t.backgroundColor===t.prefillColor)||(g=!0,v.push(t.backgroundColor),M=M&&g===A.foundationColor&&t.backgroundColor===A.colors[m++])),void 0!==f&&(v.push(f),M=M&&f===A.colors[m++])),void 0!==d&&(v.push(d),M=M&&d===A.colors[m++]),!M||m!==A.colors.length){if(t.snapshot={value:b,textColor:i,textFont:n,foundationColor:g,colors:v},I(e,v,w,y,x,S,g),c=s?R+s.width+R:t.cellPadding,h=a?R+a.width+R:t.cellPadding,k&&(e.cache.fillStyle=i,e.cache.font=n,D=t.isHeaderRow&&t.headerTextWrapping?function(e,t,i,n,r){var o=t.bounds.x,s=t.bounds.y,a=t.bounds.width,l=t.bounds.height,c=(i+"").trim().replace(H," "),h=function e(t,i,n,r){if(1===n.length)return n;var o,s=[n.shift()];for(;(o=t.getTextWidth(s.join(" "))<r)&&n.length;)s.push(n.shift());!o&&1<s.length&&n.unshift(s.pop());s=[s.join(" ")];n.length&&(s=s.concat(e(t,i,n,r)));return s}(e,t,c.split(" "),a);if(1===h.length)return F(e,t,c,n,r);var u=n,d=t.voffset,f=t.halign,g=e.getTextHeight(t.font).height;switch(f){case"right":u=a-r;break;case"center":u=a/2}var p=Math.ceil(g/2);d+=Math.ceil((l-(h.length-1)*g)/2),u=Math.max(0,u),d=Math.max(p,d),e.cache.save(),e.beginPath(),e.rect(o,s,a,l),e.clip(),e.cache.textAlign=f,e.cache.textBaseline="middle";for(var m=0;m<h.length;m++)e.simpleText(h[m],o+u,s+d+m*g);return e.cache.restore(),a}(e,t,b,c,h):F(e,t,b,c,h)),l&&(o=Math.round((S-l.height)/2),r=x-Math.round((x-l.width)/2)-l.width,e.drawImage(l,w+r,y+o),D=R+l.width+R,"center"===t.hotIcon&&(t.clickRect=new O(r,o,l.width,l.height))),s&&(o=Math.round((S-s.height)/2),e.drawImage(s,w+R,y+o),"left"===t.hotIcon&&(t.clickRect=new O(R,o,s.width,s.height))),a){var P=w+(r=x-(a.width+R));p&&(g=!0,v.unshift(t.backgroundColor)),I(e,v,P,y,h,S,g),o=Math.round((S-a.height)/2),e.drawImage(a,P,y+o),"right"===t.hotIcon&&(t.clickRect=new O(r,o,a.width,a.height))}t.cellBorderThickness&&(e.beginPath(),e.rect(w,y,x,S),e.cache.lineWidth=t.cellBorderThickness,e.cache.strokeStyle=t.cellBorderStyle,e.stroke(),e.closePath()),t.minWidth=c+D+h}}});function F(e,t,i,n,r){var o,s,a=t.bounds.x,l=t.bounds.y,c=t.bounds.width,h=n,u=t.halign;if(t.columnAutosizing)switch(o=(s=e.getTextWidthTruncated(i,c-n,t.truncateTextWithEllipsis)).width,i=s.string||i,u){case"right":h=c-r-s.width;break;case"center":h=(c-s.width)/2}else if(void(o=0)!==(s=e.getTextWidthTruncated(i,c-n,t.truncateTextWithEllipsis,!0)).string)i=s.string;else switch(u){case"right":h=c-r-s.width;break;case"center":h=(c-s.width)/2}return null!==i&&(a+=Math.max(n,h),l+=Math.floor(t.bounds.height/2),t.isUserDataArea&&(t.link&&(!t.isCellHovered&&t.linkOnHover||(t.linkColor&&(e.cache.strokeStyle=t.linkColor),e.beginPath(),function(e,t,i,n,r,o){var s=t.getTextHeight(e.font).height,a=t.getTextWidth(i);switch(t.cache.textAlign){case"center":n-=a/2;break;case"right":n-=a}r=Math.ceil(r)+Math.round(s/2)-.5,t.cache.lineWidth=o,t.moveTo(n,r),t.lineTo(n+a,r)}(t,e,i,a,l,1),e.stroke(),e.closePath()),!t.linkColor||!t.isCellHovered&&t.linkColorOnHover||(e.cache.fillStyle=t.linkColor)),!0===t.strikeThrough&&(e.beginPath(),function(e,t,i,n,r,o){var s=t.getTextWidth(i);switch(t.cache.textAlign){case"center":n-=s/2;break;case"right":n-=s}r=Math.round(r)+.5,t.cache.lineWidth=o,t.moveTo(n-1,r),t.lineTo(n+s+1,r)}(0,e,i,a,l,1),e.stroke(),e.closePath())),e.cache.textAlign="left",e.cache.textBaseline="middle",e.simpleText(i,a,l)),o}function I(e,t,i,n,r,o,s){for(var a=0;a<t.length;a++)s&&!a?e.clearFill(i,n,r,o,t[a]):(e.cache.fillStyle=t[a],e.fillRect(i,n,r,o))}t.exports=r},{"../../images":5,"./CellRenderer":54,rectangular:16}],58:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("Slider",{paint:function(e,t){var i=t.bounds.x,n=t.bounds.y,r=t.bounds.width,o=t.bounds.height;e.cache.strokeStyle="white";var s=t.value,a=o/2,l=r*s,c=t.isSelected?t.backgroundColor:"#333333",h=e.createLinearGradient(i,n,i,n+o);h.addColorStop(0,c),h.addColorStop(1,"#666666");var u=e.createLinearGradient(i,n,i,n+o);u.addColorStop(0,"#aaaaaa"),u.addColorStop(1,"#777777"),e.cache.fillStyle=h,this.roundRect(e,i,n,r,o,a,h),e.cache.fillStyle=s<1?u:"#eeeeee",e.beginPath(),e.arc(i+Math.max(l-a,a),n+a,a,0,2*Math.PI),e.fill(),e.closePath(),t.minWidth=100}});t.exports=n},{"./CellRenderer":54}],59:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("SparkBar",{paint:function(e,t){var i=t.bounds.x,n=t.bounds.y,r=t.bounds.width,o=t.bounds.height;e.beginPath();var s=t.value;if(s&&s.length){var a=s.length,l=r/a,c=t.isSelected?t.foregroundSelectionColor:t.color;(t.backgroundColor||t.isSelected)&&(e.cache.fillStyle=t.isSelected?"blue":t.backgroundColor,e.fillRect(i,n,r,o)),e.cache.fillStyle=c;for(var h=0;h<s.length;h++){var u=s[h]/110*o;e.fillRect(i+5,n+o-u,.6666*l,u),i+=l}e.closePath(),t.minWidth=10*a}}});t.exports=n},{"./CellRenderer":54}],60:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("SparkLine",{paint:function(e,t){var i=t.bounds.x,n=t.bounds.y,r=t.bounds.width,o=t.bounds.height;e.beginPath();var s=t.value;if(s&&s.length){var a,l=s.length,c=r/l,h=t.isSelected?t.foregroundSelectionColor:t.color;(t.backgroundColor||t.isSelected)&&(e.cache.fillStyle=t.isSelected?t.backgroundSelectionColor:t.backgroundColor,e.fillRect(i,n,r,o)),e.cache.strokeStyle=h,e.cache.fillStyle=h,e.beginPath();for(var u=0;u<s.length;u++){var d=s[u]/110*o;a||(a=d),e.lineTo(i+5,n+o-d),e.arc(i+5,n+o-d,1,0,2*Math.PI,!1),i+=c}t.minWidth=10*l,e.stroke(),e.closePath()}}});t.exports=n},{"./CellRenderer":54}],61:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("Tag",{paint:function(e,t){if(t.tagbands){var i=t.tagbands.find(function(e){return t.value>=e.floor}),n=i&&i.fillStyle;if(n){var r=t.bounds,o=r.x+r.width-1,s=r.y;e.beginPath(),e.moveTo(o,s),e.lineTo(o,s+8),e.lineTo(o-8,s),e.closePath(),e.cache.fillStyle=n,e.fill()}}}});t.exports=n},{"./CellRenderer":54}],62:[function(e,t,i){"use strict";var n=e("./CellRenderer").extend("TreeCell",{paint:function(e,t){var i=t.bounds.x,n=t.bounds.y,r=t.value.data,o=t.value.indent,s=t.value.icon;if((t.backgroundColor||t.isSelected)&&(e.cache.fillStyle=(t.isSelected,t.backgroundColor),e.fillRect(i,n,t.bounds.width,t.bounds.height)),r&&r.length){e.cache.fillStyle=(t.isSelected,t.backgroundColor);var a=Math.ceil(t.bounds.height/2);e.fillText(s+r,i+o,n+a),t.minWidth=i+o+e.getTextWidth(s+r)+10}}});t.exports=n},{"./CellRenderer":54}],63:[function(e,t,i){"use strict";var n,r=e("../lib/Registry"),o=r.extend("CellRenderers",{BaseClass:e("./CellRenderer"),initialize:function(){this.add(e("./Button")),this.add(e("./SimpleCell")),this.add(e("./SliderCell")),this.add(e("./SparkBar")),this.add(e("./LastSelection")),this.add(e("./SparkLine")),this.add(e("./ErrorCell")),this.add(e("./Tag")),this.add(e("./TreeCell")),this.add("emptycell",this.BaseClass)},add:function(e,t){return 1===arguments.length?(t=e,r.prototype.add.call(this,new t)):r.prototype.add.call(this,e,new t)},get:function(e){if(e.map)return e.map(function(e){return r.prototype.get.call(this,e)},this);var t=r.prototype.get.call(this,e);return t===this.items.emptycell&&(n||(console.warn('grid.cellRenderers.get("'+e+'").constructor has been deprecated as of v2.1.0 in favor of grid.cellRenderers.BaseClass property. (Will be removed in a future release.)'),n=!0),this.BaseClass.constructor=this.BaseClass),t}});t.exports=new o},{"../lib/Registry":85,"./Button":53,"./CellRenderer":54,"./ErrorCell":55,"./LastSelection":56,"./SimpleCell":57,"./SliderCell":58,"./SparkBar":59,"./SparkLine":60,"./Tag":61,"./TreeCell":62}],64:[function(e,t,i){"use strict";var n=e("datasaur-base").extend("HeaderSubgrid",{type:"header",initialize:function(e,t){this.grid=t.grid},getRowCount:function(){return this.grid.properties.showHeaderRow?1:0},getValue:function(e,t){var i=this.grid.behavior.getColumn(e);return i.header||i.name},setValue:function(e,t,i){t<this.getRowCount()&&(this.grid.behavior.getColumn(e).header=i)},getRow:function(e){return this.dataRow}});t.exports=n},{"datasaur-base":8}],65:[function(e,t,i){"use strict";var n=e("../lib/Registry").extend("DataModels",{BaseClass:e("datasaur-base"),initialize:function(){this.add(e("./HeaderSubgrid"))}});t.exports=new n},{"../lib/Registry":85,"./HeaderSubgrid":64,"datasaur-base":8}],66:[function(e,t,i){"use strict";var n=e("../package.json").version,r=e("./lib/error"),o={COLUMNS:1,STRIPES:2,ROWS:3,CELLS:4},s={DEFAULT:[o.COLUMNS,o.STRIPES,o.ROWS,o.CELLS],NO_ROWS:[o.COLUMNS,o.CELLS]},a={themeName:"default",noDataMessage:"",wheelHFactor:.01,wheelVFactor:.05,subgrids:["HeaderSubgrid","data"],font:"13px Tahoma, Geneva, sans-serif",color:"rgb(25, 25, 25)",backgroundColor:"rgb(241, 241, 241)",foregroundSelectionFont:"bold 13px Tahoma, Geneva, sans-serif",foregroundSelectionColor:"rgb(0, 0, 128)",backgroundSelectionColor:"rgba(147, 185, 255, 0.625)",columnHeaderFont:"12px Tahoma, Geneva, sans-serif",columnHeaderColor:"rgb(25, 25, 25)",columnHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",columnHeaderBackgroundColor:"rgb(223, 227, 232)",columnHeaderForegroundSelectionColor:"rgb(80, 80, 80)",columnHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",columnHeaderHalign:"center",columnHeaderRenderer:"SimpleCell",columnHeaderFormat:"header",rowHeaderFont:"12px Tahoma, Geneva, sans-serif",rowHeaderColor:"rgb(25, 25, 25)",rowHeaderBackgroundColor:"rgb(223, 227, 232)",rowHeaderForegroundSelectionColor:"rgb(80, 80, 80)",rowHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",rowHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",backgroundColor2:"rgb(201, 201, 201)",treeHeaderFont:"12px Tahoma, Geneva, sans-serif",treeHeaderColor:"rgb(25, 25, 25)",treeHeaderBackgroundColor:"rgb(223, 227, 232)",treeHeaderForegroundSelectionColor:"rgb(80, 80, 80)",treeHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",treeHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",filterFont:"12px Tahoma, Geneva, sans-serif",filterColor:"rgb(25, 25, 25)",filterBackgroundColor:"white",filterForegroundSelectionColor:"rgb(25, 25, 25)",filterBackgroundSelectionColor:"rgb(255, 220, 97)",filterHalign:"center",filterRenderer:"SimpleCell",filterEditor:"TextField",filterable:!0,showFilterRow:!1,voffset:0,scrollbarHoverOver:"visible",scrollbarHoverOff:"hidden",scrollingEnabled:!0,vScrollbarClassPrefix:"",hScrollbarClassPrefix:"",halign:"center",cellPadding:5,iconPadding:3,leftIcon:void 0,centerIcon:void 0,rightIcon:void 0,renderFalsy:!1,headerify:"toTitle",gridLinesH:!0,gridLinesHWidth:1,gridLinesHColor:"rgb(199, 199, 199)",gridLinesV:!0,gridLinesVWidth:1,gridLinesVColor:"rgb(199, 199, 199)",gridLinesColumnHeader:!0,gridLinesRowHeader:!0,gridLinesUserDataArea:!0,gridBorder:!1,gridBorderLeft:!1,gridBorderRight:!1,gridBorderTop:!1,gridBorderBottom:!1,fixedLinesHWidth:2,fixedLinesHEdge:void 0,fixedLinesHColor:"rgb(164,164,164)",fixedLinesVWidth:2,fixedLinesVEdge:void 0,fixedLinesVColor:"rgb(164,164,164)",boxSizing:2<n?"content-box":"border-box",defaultRowHeight:2<n?14:15,defaultColumnWidth:100,minimumColumnWidth:5,repaintIntervalRate:60,repaintImmediately:!1,useBitBlit:!1,useHiDPI:!0,navKeyMap:{RETURN:"DOWN",RETURNSHIFT:"UP",TAB:"RIGHT",TABSHIFT:"LEFT"},feedbackCount:3,feedbackEffect:"shaker",readOnly:!1,fixedColumnCount:0,fixedRowCount:0,rowHeaderNumbers:!0,rowHeaderCheckboxes:!0,showTreeColumn:!0,treeRenderer:"SimpleCell",showHeaderRow:!0,cellSelection:!0,columnSelection:!0,rowSelection:!0,singleRowSelectionMode:!0,selectionRegionOverlayColor:"transparent",selectionRegionOutlineColor:"rgb(69, 69, 69)",columnAutosizing:!0,rowNumberAutosizing:!0,treeColumnAutosizing:!0,columnAutosizingMax:400,treeColumnAutosizingMax:400,headerTextWrapping:!1,rowResize:!1,editable:!0,editOnDoubleClick:!0,editOnKeydown:!0,editOnNextCell:!1,unsortable:!1,sortOnDoubleClick:!0,maxSortColumns:3,sortOnHiddenColumns:!0,checkboxOnlyRowSelections:!1,autoSelectRows:!1,autoSelectColumns:!1,collapseCellSelections:!1,format:void 0,editor:void 0,renderer:"SimpleCell",gridRenderer:"by-columns-and-rows",hoverCellHighlight:{enabled:!0,backgroundColor:"rgba(160, 160, 40, 0.45)"},hoverRowHighlight:{enabled:!0,backgroundColor:"rgba(100, 100, 25, 0.30)"},hoverColumnHighlight:{enabled:!0,backgroundColor:"rgba(60, 60, 15, 0.15)"},link:!1,linkTarget:"_blank",linkOnHover:!1,linkColor:"blue",linkVisitedColor:"purple",linkColorOnHover:!1,strikeThrough:!1,multipleSelections:!1,enableContinuousRepaint:!1,columnsReorderable:!0,columnGrabMargin:5,columnClip:!0,rowStripes:void 0,propClassLayers:s.DEFAULT,features:["filters","cellselection","keypaging","columnresizing","rowselection","columnselection","columnmoving","columnsorting","cellclick","cellediting","onhover"],restoreRowSelections:!0,restoreColumnSelections:!0,truncateTextWithEllipsis:!0},l={};function c(){l.rowProperties||(l.rowProperties=!0,console.warn("The `rowProperties` property has been deprecated as of v2.1.0 in favor of `rowStripes`. (Will be removed in a future release.)"))}function h(){throw new r("Attempt to set/get column-only property on a non-column properties object.")}Object.defineProperties(a,{rowProperties:{get:function(){return c(),this.rowStripes},set:function(e){c(),this.rowStripes=e}}}),["name","type","header","calculator"].forEach(function(e){Object.defineProperty(a,e,{set:h})}),Object.defineProperties(a,{mixIn:{value:e("overrider").mixIn},delete:{value:function(e){var t=Object.getOwnPropertyDescriptor(this,e);return!!t&&(t.get?!t.get.toString().indexOf(".var.")||(this.var[e]=Object.getPrototypeOf(this)[e],this.grid.repaint(),!1):delete this[e])}},propClassEnum:{value:o},propClassLayersMap:{value:s},navKey:{value:function(e,t){var i;return(1<e.length||!this.editOnKeydown||t)&&(i=e),i}},mappedNavKey:{value:function(e,t){return(e=this.navKeyMap[e])&&this.navKey(e)}},reapplyCellProperties:{set:function(e){l.reapplyCellProperties||(console.warn("The `.reapplyCellProperties` property has been deprecated as of v2.1.3 in favor of using the new `.propClassLayers` property. (May be removed in a future release.) This property is now a setter which sets `.propClassLayers` to `.propClassLayersMap.DEFAULT` (grid ← columns ← stripes ← rows ← cells) on truthy or `propClassLayersMap.NO_ROWS` (grid ← columns ← cells) on falsy, which is what you will see on properties stringification. This will give the same effect in most cases as the former property implementation, but not in all cases due to it no longer being applied dynamically. Developers should discontinue use of this property and start specifying `.propClassLayers` instead."),l.reapplyCellProperties=!0),this.propClassLayers=e?s.NO_ROWS:s.DEFAULT}},exec:{value:function(e){if(this.dataRow){var t="f"===(typeof e)[0]&&e||this.calculator;t&&(e=t(this.dataRow,this.name,this.subrow))}return e}}}),t.exports=a},{"../package.json":20,"./lib/error":93,overrider:15}],67:[function(e,t,i){"use strict";var n=e("./Feature").extend("CellClick",{handleMouseMove:function(e,t){var i=t.properties.link,n=i&&"boolean"!=typeof i;this.cursor=n?"pointer":null,this.next&&this.next.handleMouseMove(e,t)},handleClick:function(e,t){!((t.isDataCell||t.isTreeColumn)&&(void 0!==this.openLink(e,t)||e.cellClicked(t)))&&this.next&&this.next.handleClick(e,t)},openLink:function(e,t){var i,n,r=t.dataRow,o=Object.create(t.properties,{dataRow:{value:r}}),s=o.exec(t.value),a=t.properties.link,l=a instanceof Array,c=l?a[0]:a;switch(typeof c){case"string":"*"===c?n=s:/^\w+$/.test(c)&&(n=r[c]);break;case"function":n=c(t)}return n&&(n=n.toString().replace(/%name/g,o.name).replace(/%value/g,s),l?((a=a.slice())[0]=n,i=e.windowOpen.apply(e,a)):i=e.windowOpen(n,t.properties.linkTarget)),i&&(t.setCellProperty("linkColor",e.properties.linkVisitedColor),e.renderer.resetCellPropertiesCache(t),e.repaint()),i}});t.exports=n},{"./Feature":74}],68:[function(e,t,i){"use strict";var n=e("./Feature"),a=e("../cellEditors/CellEditor"),r=n.extend("CellEditing",{handleClick:function(e,t){o.call(this,e,t)},handleDoubleClick:function(e,t){o.call(this,e,t,!0)},handleKeyDown:function(e,t){var i,n,r,o,s;(s=e.getGridCellFromLastSelection())&&s.properties.editOnKeydown&&!e.cellEditor&&("F2"===(i=t.detail.char)||(n=1===i.length&&!(t.detail.meta||t.detail.ctrl))||(r="DELETE"===i||"BACKSPACE"===i))?(o=e.onEditorActivate(s))instanceof a&&(n?o.input.value=i:r&&o.setEditorValue(""),t.detail.primitiveEvent.preventDefault()):this.next&&this.next.handleKeyDown(e,t)}});function o(e,t,i){!t.isDataCell||t.getCellProperty("editOnDoubleClick")^i||e.onEditorActivate(t),this.next&&this.next[i?"handleDoubleClick":"handleClick"](e,t)}t.exports=r},{"../cellEditors/CellEditor":45,"./Feature":74}],69:[function(e,t,i){"use strict";var n=e("./Feature").extend("CellSelection",{currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(e,t){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(e,t)},handleMouseDown:function(e,t){var i=t.gridCell.x,n=t.dataCell.y;if(e.behavior.getCellProperty(t.dataCell.x,t.gridCell.y,"cellSelection")&&t.isDataCell&&!t.primitiveEvent.detail.isRightClick){var r=e.newPoint(i,n),o=t.primitiveEvent.detail.keys;this.dragging=!0,this.extendSelection(e,r,o)}else this.next&&this.next.handleMouseDown(e,t)},handleMouseDrag:function(e,t){this.dragging&&e.properties.cellSelection&&!t.primitiveEvent.detail.isRightClick?(this.currentDrag=t.primitiveEvent.detail.mouse,this.lastDragCell=e.newPoint(t.gridCell.x,t.dataCell.y),this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,this.lastDragCell,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){var i=t.detail,n=e.getGridCellFromLastSelection(!0),r=this["handle"+(n&&(n.properties.mappedNavKey(i.char,i.ctrl)||n.properties.navKey(i.char,i.ctrl)))];r?(r.call(this,e,i),(n=e.getGridCellFromLastSelection(!0)).properties.editOnNextCell&&e.editAt(n),e.cellEditor||e.takeFocus()):this.next&&this.next.handleKeyDown(e,t)},handleMouseDragCellSelection:function(e,t,i){var n=Math.max(0,t.x),r=Math.max(0,t.y),o=e.getDragExtent(),s=e.getMouseDown(),a=n-s.x,l=r-s.y;o.x===a&&o.y===l||(e.clearMostRecentSelection(),e.select(s.x,s.y,a,l),e.setDragExtent(e.newPoint(a,l)),e.repaint())},checkDragScroll:function(e,t){e.properties.scrollingEnabled&&(e.getDataBounds().contains(t)?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e)))},scrollDrag:function(e){if(e.isScrollingNow()){var t=e.isMouseDownInHeaderArea(),i=this.lastDragCell,n=e.getDataBounds(),r=0,o=0,s=e.getFixedColumnCount(),a=e.getFixedRowCount(),l=i.x<s,c=i.y<a;t||(this.currentDrag.x<n.origin.x&&(r=-1),this.currentDrag.y<n.origin.y&&(o=-1)),this.currentDrag.x>n.origin.x+n.extent.x&&(r=1),this.currentDrag.y>n.origin.y+n.extent.y&&(o=1);var h=r,u=o;l&&(h=0),c&&(u=0),this.lastDragCell=i.plusXY(h,u),e.scrollBy(r,o),this.handleMouseDragCellSelection(e,i,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,i){var n=0<=i.indexOf("CTRL"),r=0<=i.indexOf("SHIFT"),o=e.getMouseDown(),s=t.x,a=t.y;if(!(s<0||a<0)){if(n&&s===o.x&&a===o.y)return e.clearMostRecentSelection(),e.popMouseDown(),void e.repaint();n||r||e.clearSelections(),r?(e.clearMostRecentSelection(),e.select(o.x,o.y,s-o.x,a-o.y),e.setDragExtent(e.newPoint(s-o.x,a-o.y))):(e.select(s,a,0,0),e.setMouseDown(e.newPoint(s,a)),e.setDragExtent(e.newPoint(0,0))),e.repaint()}},handleDOWNSHIFT:function(e){this.moveShiftSelect(e,0,1)},handleUPSHIFT:function(e){this.moveShiftSelect(e,0,-1)},handleLEFTSHIFT:function(e){this.moveShiftSelect(e,-1,0)},handleRIGHTSHIFT:function(e){this.moveShiftSelect(e,1,0)},handleDOWN:function(e,t){t.primitiveEvent.preventDefault();var i=this.getAutoScrollAcceleration();e.moveSingleSelect(0,i)},handleUP:function(e,t){t.primitiveEvent.preventDefault();var i=this.getAutoScrollAcceleration();e.moveSingleSelect(0,-i)},handleLEFT:function(e){e.moveSingleSelect(-1,0)},handleRIGHT:function(e){e.moveSingleSelect(1,0)},getAutoScrollAcceleration:function(){var e=this.getAutoScrollDuration()/2e3;return Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){500<Date.now()-this.sbLastAuto&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return 500<Date.now()-this.sbLastAuto?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t,i){e.extendSelect(t,i)&&this.pingAutoScroll()}});t.exports=n},{"./Feature":74}],70:[function(e,t,i){"use strict";var d,f,u,g,n=e("./Feature"),r=["grab","-moz-grab","-webkit-grab"],p=["grabbing","-moz-grabbing","-webkit-grabbing"],m=function(e){this.cursor=e},o=n.extend("ColumnMoving",{floaterAnimationQueue:[],columnDragAutoScrollingRight:!1,columnDragAutoScrollingLeft:!1,dragArmed:!1,dragging:!1,dragCol:-1,dragOffset:0,initializeOn:function(e){this.isFloatingNow=!1,this.initializeAnimationSupport(e),this.next&&this.next.initializeOn(e)},initializeAnimationSupport:function(e){d||((d=document.createElement("canvas")).setAttribute("width","0px"),d.setAttribute("height","0px"),d.style.position="fixed",document.body.appendChild(d),f=d.getContext("2d",{alpha:!1})),u||((u=document.createElement("canvas")).setAttribute("width","0px"),u.setAttribute("height","0px"),u.style.position="fixed",document.body.appendChild(u),g=u.getContext("2d",{alpha:!1}))},handleMouseDrag:function(e,t){var i,n=t.gridCell;Math.abs(t.primitiveEvent.detail.dragstart.x-t.primitiveEvent.detail.mouse.x)<10||t.isColumnFixed?this.next&&this.next.handleMouseDrag(e,t):(t.isHeaderCell&&this.dragArmed&&!this.dragging?(this.dragging=!0,this.dragCol=n.x,this.dragOffset=t.mousePoint.x,this.detachChain(),i=t.primitiveEvent.detail.mouse.x-this.dragOffset,this.createDragColumn(e,i,this.dragCol)):this.next&&this.next.handleMouseDrag(e,t),this.dragging&&(i=t.primitiveEvent.detail.mouse.x-this.dragOffset,this.dragColumn(e,i)))},handleMouseDown:function(e,t){e.properties.columnsReorderable&&!t.isColumnFixed&&t.isHeaderCell&&(this.dragArmed=!0,this.cursor=p,e.clearSelections()),this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){if(this.dragging){this.cursor=null;var i=this;this.endDragColumn(e),setTimeout(function(){i.attachChain()},200)}this.dragCol=-1,this.dragging=!1,this.dragArmed=!1,this.cursor=null,e.repaint(),this.next&&this.next.handleMouseUp(e,t)},handleMouseMove:function(e,t){e.properties.columnsReorderable&&!t.isColumnFixed&&!this.dragging&&t.isHeaderCell&&t.mousePoint.y<e.properties.columnGrabMargin?this.cursor=r:this.cursor=null,this.next&&this.next.handleMouseMove(e,t),t.isHeaderCell&&this.dragging&&(this.cursor=p)},floatColumnTo:function(e,t){this.floatingNow=!0;var i,n,r=e.renderer.visibleColumns,o=e.getHScrollValue(),s=e.renderOverridesCache.floater.columnIndex,a=e.renderOverridesCache.dragger.columnIndex,l=e.renderOverridesCache.dragger.hdpiratio,c=e.getFixedColumnCount(),h=e.getColumnWidth(a),u=e.getColumnWidth(s),d=e.getVisibleColumnsCount(),f=0,g=0;c<=a&&(f=o),c<=s&&(g=o),t?(i=r[Math.min(d,a-f)].left,n=r[Math.min(d,s-g)].left,e.renderOverridesCache.dragger.startX=(i+u)*l):(i=(n=r[Math.min(d,s-g)].left)+h,e.renderOverridesCache.dragger.startX=n*l),e.renderOverridesCache.floater.startX=i*l,e.swapColumns(a,s),e.renderOverridesCache.dragger.columnIndex=s,e.renderOverridesCache.floater.columnIndex=a,this.floaterAnimationQueue.unshift(this.doColumnMoveAnimation(e,n,i)),this.doFloaterAnimation(e)},doColumnMoveAnimation:function(t,i,n){var r=this;return function(){var e=u;e.style.display="inline",r.setCrossBrowserProperty(e,"transform","translate("+i+"px, 0px)"),requestAnimationFrame(function(){r.setCrossBrowserProperty(e,"transition",(r.isWebkit?"-webkit-":"")+"transform 150ms ease"),r.setCrossBrowserProperty(e,"transform","translate("+n+"px, "+-2+"px)")}),t.repaint(),setTimeout(function(){r.setCrossBrowserProperty(e,"transition",""),t.renderOverridesCache.floater=null,t.repaint(),r.doFloaterAnimation(t),requestAnimationFrame(function(){e.style.display="none",r.isFloatingNow=!1})},200)}},doFloaterAnimation:function(e){if(0===this.floaterAnimationQueue.length)return this.floatingNow=!1,void e.repaint();this.floaterAnimationQueue.pop()()},createFloatColumn:function(e,t){var i=e.getFixedColumnCount(),n=e.getHScrollValue();t<i&&(n=0);var r=e.getColumnWidth(t),o=e.div.clientHeight,s=u,a=s.style,l=e.div.getBoundingClientRect();a.top=l.top-2+"px",a.left=l.left+"px";var c=e.getHiDPI(g);s.setAttribute("width",Math.round(r*c)+"px"),s.setAttribute("height",Math.round(o*c)+"px"),a.boxShadow="0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)",a.width=r+"px",a.height=o+"px",a.borderTop="1px solid "+e.properties.lineColor,a.backgroundColor=e.properties.backgroundColor;var h=e.renderer.visibleColumns[t-n].left*c;g.scale(c,c),e.renderOverridesCache.floater={columnIndex:t,ctx:g,startX:h,width:r,height:o,hdpiratio:c},a.zIndex="4",this.setCrossBrowserProperty(s,"transform","translate("+h+"px, "+-2+"px)"),p.forEach(m,a),e.repaint()},setCrossBrowserProperty:function(e,t,i){var n=t[0].toUpperCase()+t.substr(1);this.setProp(e,"webkit"+n,i),this.setProp(e,"Moz"+n,i),this.setProp(e,"ms"+n,i),this.setProp(e,"O"+n,i),this.setProp(e,t,i)},setProp:function(e,t,i){t in e.style&&(e.style[t]=i)},createDragColumn:function(e,t,i){var n=e.getFixedColumnCount(),r=e.getHScrollValue();i<n&&(r=0);var o=e.getHiDPI(f),s=e.getColumnWidth(i),a=e.div.clientHeight,l=d,c=e.div.getBoundingClientRect(),h=l.style;h.top=c.top+"px",h.left=c.left+"px",h.opacity=.85,h.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)",h.borderTop="1px solid "+e.properties.lineColor,h.backgroundColor=e.properties.backgroundColor,l.setAttribute("width",Math.round(s*o)+"px"),l.setAttribute("height",Math.round(a*o)+"px"),h.width=s+"px",h.height=a+"px";var u=e.renderer.visibleColumns[i-r].left*o;f.scale(o,o),e.renderOverridesCache.dragger={columnIndex:i,startIndex:i,ctx:f,startX:u,width:s,height:a,hdpiratio:o},this.setCrossBrowserProperty(l,"transform","translate("+t+"px, -5px)"),h.zIndex="5",p.forEach(m,h),e.repaint()},dragColumn:function(e,t){var i=this.columnDragAutoScrollingRight||this.columnDragAutoScrollingLeft,n=e.getHiDPI(f),r=e.renderOverridesCache.dragger.columnIndex,o=e.renderer.getFinalVisibleColumnBoundary();t=Math.min(t,o+15);var s=(t=Math.max(-15,t))<0&&0!==r,a=o<t,l=d;this.setCrossBrowserProperty(l,"transition",(this.isWebkit?"-webkit-":"")+"transform 0ms ease, box-shadow 150ms ease"),this.setCrossBrowserProperty(l,"transform","translate("+t+"px, "+-10+"px)"),requestAnimationFrame(function(){l.style.display="inline"});var c=e.renderer.getColumnFromPixelX(t+l.width/2/n);s&&(c=0),a&&(c=e.getColumnCount()-1);var h=c<r;if((h=h||1<=c-r)&&!i){var u=r<c;if(this.isFloatingNow)return;this.isFloatingNow=!0,this.createFloatColumn(e,c),this.floatColumnTo(e,u)}else{if(t<-10&&this.checkAutoScrollToLeft(e,t),-10<t&&(this.columnDragAutoScrollingLeft=!1),a||o+10<t)return void this.checkAutoScrollToRight(e,t);t<o+10&&(this.columnDragAutoScrollingRight=!1)}},checkAutoScrollToRight:function(e,t){this.columnDragAutoScrollingRight||(this.columnDragAutoScrollingRight=!0,this._checkAutoScrollToRight(e,t))},_checkAutoScrollToRight:function(e,t){if(this.columnDragAutoScrollingRight){var i=e.getHScrollValue();if(e.dragging&&!(i>e.sbHScroller.range.max-2)){var n=e.renderOverridesCache.dragger.columnIndex;e.scrollBy(1,0);var r=n+1;e.swapColumns(r,n),e.renderOverridesCache.dragger.columnIndex=r,setTimeout(this._checkAutoScrollToRight.bind(this,e,t),250)}}},checkAutoScrollToLeft:function(e,t){this.columnDragAutoScrollingLeft||(this.columnDragAutoScrollingLeft=!0,this._checkAutoScrollToLeft(e,t))},_checkAutoScrollToLeft:function(e,t){if(this.columnDragAutoScrollingLeft){var i=e.getHScrollValue();if(e.dragging&&!(i<1)){var n=e.renderOverridesCache.dragger.columnIndex;e.swapColumns(n+i,n+i-1),e.scrollBy(-1,0),setTimeout(this._checkAutoScrollToLeft.bind(this,e,t),250)}}},endDragColumn:function(e){var t=e.getFixedColumnCount(),i=e.getHScrollValue(),n=e.renderOverridesCache.dragger.columnIndex;n<t&&(i=0);var r=e.renderer.visibleColumns[n-i].left,o=d,s=e.renderOverridesCache.dragger.startIndex!==e.renderOverridesCache.dragger.columnIndex;this.setCrossBrowserProperty(o,"transition",(this.isWebkit?"-webkit-":"")+"transform 150ms ease, box-shadow 150ms ease"),this.setCrossBrowserProperty(o,"transform","translate("+r+"px, "+-1+"px)"),o.style.boxShadow="0px 0px 0px #888888",setTimeout(function(){e.renderOverridesCache.dragger=null,e.repaint(),requestAnimationFrame(function(){o.style.display="none",e.endDragColumnNotification(),s&&e.fireSyntheticOnColumnsChangedEvent()})},200)}});t.exports=o},{"./Feature":74}],71:[function(e,t,i){"use strict";var n=e("./Feature").extend("ColumnResizing",{dragStart:-1,dragStartWidth:-1,getMouseValue:function(e){return e.primitiveEvent.detail.mouse.x},overAreaDivider:function(e,t){var i=e.behavior.leftMostColIndex;return t.gridCell.x!==i&&t.mousePoint.x<=3||t.mousePoint.x>=t.bounds.width-3},getCursorName:function(){return"col-resize"},handleMouseDrag:function(e,t){if(this.dragColumn){var i=this.getMouseValue(t)-this.dragStart;e.behavior.setColumnWidth(this.dragColumn,this.dragStartWidth+i)}else this.next&&this.next.handleMouseDrag(e,t)},handleMouseDown:function(e,t){if(t.isHeaderRow&&this.overAreaDivider(e,t)){if(t.mousePoint.x<=3){var i=t.gridCell.x-1;this.dragColumn=e.behavior.getActiveColumn(i);var n=e.behavior.rowColumnIndex,r=this.dragColumn;e.renderer.visibleColumns.forEachWithNeg(function(e,t){e.column.index===r.index&&(n=t)}),this.dragStartWidth=e.renderer.visibleColumns[n].width}else this.dragColumn=t.column,this.dragStartWidth=t.bounds.width;this.dragStart=this.getMouseValue(t)}else this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){this.dragColumn?(this.cursor=null,this.dragColumn=!1,t.primitiveEvent.stopPropagation(),e.behaviorShapeChanged()):this.next&&this.next.handleMouseUp(e,t)},handleMouseMove:function(e,t){this.dragColumn||(this.cursor=null,this.next&&this.next.handleMouseMove(e,t),this.cursor=t.isHeaderRow&&this.overAreaDivider(e,t)?this.getCursorName():null)},handleDoubleClick:function(e,t){if(t.isHeaderRow&&this.overAreaDivider(e,t)){var i=t.mousePoint.x<=3?e.behavior.getActiveColumn(t.gridCell.x-1):t.column;i.addProperties({columnAutosizing:!0,columnAutosized:!1}),setTimeout(function(){e.autosizeColumn(i)})}else this.next&&this.next.handleDoubleClick(e,t)}});t.exports=n},{"./Feature":74}],72:[function(e,t,i){"use strict";var n=e("./Feature").extend("ColumnSelection",{currentDrag:null,lastDragColumn:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(e,t){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(e,t)},handleDoubleClick:function(e,t){this.doubleClickTimer&&(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0),this.next&&this.next.handleDoubleClick(e,t)},handleMouseDown:function(e,t){this.doubleClickTimer||(e.properties.columnSelection&&!t.primitiveEvent.detail.isRightClick&&(e.properties.autoSelectColumns||t.isHeaderCell&&5<=t.mousePoint.y)?this.doubleClickTimer=setTimeout(function(e,t){this.doubleClickTimer=void 0,this.dragging=!0,this.extendSelection(e,t.gridCell.x,t.primitiveEvent.detail.keys)}.bind(this,e,t),function(e,t){var i;return t.isHeaderCell&&!(i=t.columnProperties).unsortable&&i.sortOnDoubleClick&&300}.call(this,e,t)):this.next&&this.next.handleMouseDown(e,t))},handleMouseDrag:function(e,t){e.properties.columnSelection&&!this.isColumnDragging(e)&&!t.primitiveEvent.detail.isRightClick&&this.dragging?(this.lastDragColumn=t.gridCell.x,this.currentDrag=t.primitiveEvent.detail.mouse,this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,this.lastDragColumn,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){var i=t.detail,n="column"===e.getLastSelectionType()&&this["handle"+i.char];n?n.call(this,e,i):this.next&&this.next.handleKeyDown(e,t)},handleMouseDragCellSelection:function(e,t,i){var n=e.getMouseDown().x;e.clearMostRecentColumnSelection(),e.selectColumn(n,t),e.setDragExtent(e.newPoint(t-n,0)),e.repaint()},checkDragScroll:function(e,t){e.properties.scrollingEnabled&&e.getDataBounds().contains(t)?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e))},scrollDrag:function(e){if(e.isScrollingNow()){var t,i=e.getDataBounds();this.currentDrag.x<i.origin.x?t=-1:this.currentDrag.x>i.origin.x+i.extent.x&&(t=1),t&&(this.lastDragColumn>=e.getFixedColumnCount()&&(this.lastDragColumn+=t),e.scrollBy(t,0)),this.handleMouseDragCellSelection(e,this.lastDragColumn,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,i){if(e.abortEditing()){var n=e.getMouseDown().x,r=0<i.indexOf("SHIFT");t<0||(r?(e.clearMostRecentColumnSelection(),e.selectColumn(t,n),e.setDragExtent(e.newPoint(t-n,0))):(e.toggleSelectColumn(t,i),e.setMouseDown(e.newPoint(t,0)),e.setDragExtent(e.newPoint(0,0))),e.repaint())}},handleDOWNSHIFT:function(e){},handleUPSHIFT:function(e){},handleLEFTSHIFT:function(e){this.moveShiftSelect(e,-1)},handleRIGHTSHIFT:function(e){this.moveShiftSelect(e,1)},handleDOWN:function(e){},handleUP:function(e){},handleLEFT:function(e){this.moveSingleSelect(e,-1)},handleRIGHT:function(e){this.moveSingleSelect(e,1)},getAutoScrollAcceleration:function(){var e=this.getAutoScrollDuration()/2e3;return Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){500<Date.now()-this.sbLastAuto&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return 500<Date.now()-this.sbLastAuto?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t){var i=e.getMouseDown(),n=e.getDragExtent().x+t,r=e.renderer.visibleColumns.length-1,o=e.getColumnCount()-1;e.properties.scrollingEnabled||(o=Math.min(o,r)),n=Math.min(o-i.x,Math.max(-i.x,n)),e.clearMostRecentColumnSelection(),e.selectColumn(i.x,i.x+n),e.setDragExtent(e.newPoint(n,0)),e.insureModelColIsVisible(n+i.x,t)&&this.pingAutoScroll(),e.repaint()},moveSingleSelect:function(e,t){var i=e.getDragExtent(),n=e.getMouseDown().plus(i).x+t,r=e.getColumnCount()-1,o=e.getVisibleColumnsCount()-1;e.properties.scrollingEnabled||(r=Math.min(r,o)),n=Math.min(r,Math.max(0,n)),e.clearSelections(),e.selectColumn(n),e.setMouseDown(e.newPoint(n,0)),e.setDragExtent(e.newPoint(0,0)),e.insureModelColIsVisible(n,t)&&this.pingAutoScroll(),e.repaint()},isColumnDragging:function(e){var t=e.lookupFeature("ColumnMoving");return t&&t.dragging&&!this.dragging}});t.exports=n},{"./Feature":74}],73:[function(e,t,i){"use strict";var n=e("./Feature").extend("ColumnSorting",{handleClick:function(e,t){r.call(this,e,t)},handleDoubleClick:function(e,t){r.call(this,e,t,!0)},handleMouseMove:function(e,t){var i;t.isRowFixed&&t.isHeaderCell&&(i=e.behavior.getColumnProperties(t.gridCell.x))&&!i.unsortable?this.cursor="pointer":this.cursor=null,this.next&&this.next.handleMouseMove(e,t)}});function r(e,t,i){var n;!t.isHeaderCell||(n=t.columnProperties).unsortable||n.sortOnDoubleClick^i||e.fireSyntheticColumnSortEvent(t.gridCell.x,t.primitiveEvent.detail.keys),this.next&&this.next[i?"handleDoubleClick":"handleClick"](e,t)}t.exports=n},{"./Feature":74}],74:[function(e,t,i){"use strict";var n=e("../Base").extend("Feature",{next:null,detached:null,cursor:null,currentHoverCell:null,setNext:function(e){this.next?this.next.setNext(e):(this.next=e,this.detached=e)},detachChain:function(){this.next=null},attachChain:function(){this.next=this.detached},handleMouseMove:function(e,t){this.next&&this.next.handleMouseMove(e,t)},handleMouseExit:function(e,t){this.next&&this.next.handleMouseExit(e,t)},handleMouseEnter:function(e,t){this.next&&this.next.handleMouseEnter(e,t)},handleMouseDown:function(e,t){this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){this.next&&this.next.handleMouseUp(e,t)},handleKeyDown:function(e,t){if(!this.next)return!0;this.next.handleKeyDown(e,t)},handleKeyUp:function(e,t){this.next&&this.next.handleKeyUp(e,t)},handleWheelMoved:function(e,t){this.next&&this.next.handleWheelMoved(e,t)},handleDoubleClick:function(e,t){this.next&&this.next.handleDoubleClick(e,t)},handleClick:function(e,t){this.next&&this.next.handleClick(e,t)},handleMouseDrag:function(e,t){this.next&&this.next.handleMouseDrag(e,t)},handleContextMenu:function(e,t){this.next&&this.next.handleContextMenu(e,t)},moveSingleSelect:function(e,t,i){this.next&&this.next.moveSingleSelect(e,t,i)},isFirstFixedRow:function(e,t){return t.gridCell.y<1},isFirstFixedColumn:function(e,t){return 0===t.gridCell.x},setCursor:function(e){this.next&&this.next.setCursor(e),this.cursor&&e.beCursor(this.cursor)},initializeOn:function(e){this.next&&this.next.initializeOn(e)}});t.exports=n},{"../Base":21}],75:[function(e,t,i){"use strict";var n=e("./Feature").extend("Filters",{handleKeyDown:function(e,t){var i,n,r=t.detail;r.editor&&(i=r.editor.event).isFilterCell&&(n=this["handle"+i.properties.mappedNavKey(r.char)]),n?n.call(this,e,r):this.next&&this.next.handleKeyDown(e,t)},handleLEFT:function(e,t){r(e,t,-1)},handleRIGHT:function(e,t){r(e,t,1)},handleUP:l,handleDOWN:l,handleDoubleClick:function(e,t){t.isFilterCell?e.onEditorActivate(t):this.next&&this.next.handleDoubleClick(e,t)},handleClick:function(e,t){t.isFilterCell?e.onEditorActivate(t):this.next&&this.next.handleClick(e,t)}});function r(e,t,i){var n=t.editor.event,r=n.visibleColumn.index,o=n.visibleRow.index,s=r,a=e.renderer.visibleColumns.length;for(n=new e.behavior.CellEvent;(r=(r+i+a)%a)!==s&&n.resetGridXY(r,o);)if(n.properties.filterable)return void e.editAt(n);l(e,n)}function l(e,t){var i=t.editor.event.visibleColumn.index;e.selectViewportCell(i,0),e.takeFocus()}t.exports=n},{"./Feature":74}],76:[function(e,t,i){"use strict";var n=e("./Feature"),r={PAGEDOWN:function(e){e.pageDown()},PAGEUP:function(e){e.pageUp()},PAGELEFT:function(e){e.pageLeft()},PAGERIGHT:function(e){e.pageRight()}},o=n.extend("KeyPaging",{handleKeyDown:function(e,t){var i=r[t.detail.char];i?i(e):this.next&&this.next.handleKeyDown(e,t)}});t.exports=o},{"./Feature":74}],77:[function(e,t,i){"use strict";var n=e("./Feature").extend("OnHover",{handleMouseMove:function(e,t){var i=e.hoverCell;t.gridCell.equals(i)?this.next&&this.next.handleMouseMove(e,t):(i&&this.handleMouseExit(e,i),this.handleMouseEnter(e,t),e.setHoverCell(t))}});t.exports=n},{"./Feature":74}],78:[function(e,t,i){"use strict";var n=e("./Feature").extend("RowSelection",{currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,dragArmed:!1,handleMouseUp:function(e,t){this.dragArmed?(this.dragArmed=!1,l(e),e.fireSyntheticRowSelectionChangedEvent()):this.dragging?(this.dragging=!1,l(e),e.fireSyntheticRowSelectionChangedEvent()):this.next&&this.next.handleMouseUp(e,t)},handleMouseDown:function(e,t){var i=!t.primitiveEvent.detail.isRightClick,n=i&&e.properties.showRowNumbers&&t.isHandleColumn&&t.mousePointInClickRect;if(!n||e.fireSyntheticRowHeaderClickedEvent(t)){var r=e.properties.rowSelection&&(i&&e.properties.autoSelectRows||n);r&&t.isHeaderHandle?e.toggleSelectAllRows():r&&t.isDataRow?(this.dragArmed=!0,this.extendSelection(e,t.dataCell.y,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDown(e,t)}},handleMouseDrag:function(e,t){this.dragArmed&&e.properties.rowSelection&&!t.primitiveEvent.detail.isRightClick?(this.lastDragRow=t.dataCell.y,this.dragging=!0,this.currentDrag=t.primitiveEvent.detail.mouse,this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,this.lastDragRow,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){var i;"row"===e.getLastSelectionType()&&(i=this["handle"+t.detail.char])?i.call(this,e,t.detail):this.next&&this.next.handleKeyDown(e,t)},handleMouseDragCellSelection:function(e,t,i){var n=e.getMouseDown().y;e.clearMostRecentRowSelection(),e.selectRow(n,t),e.setDragExtent(e.newPoint(0,t-n)),e.repaint()},checkDragScroll:function(e,t){e.properties.scrollingEnabled&&e.getDataBounds().contains(t)?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e))},scrollDrag:function(e){if(e.isScrollingNow()){var t,i=e.getDataBounds();this.currentDrag.y<i.origin.y?t=-1:this.currentDrag.y>i.origin.y+i.extent.y&&(t=1),t&&(this.lastDragRow>=e.getFixedRowCount()&&(this.lastDragRow+=t),e.scrollBy(0,t)),this.handleMouseDragCellSelection(e,this.lastDragRow,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,i){if(e.abortEditing()){var n=e.getMouseDown().y,r=-1!==i.indexOf("SHIFT");t<0||(r?(e.clearMostRecentRowSelection(),e.selectRow(t,n),e.setDragExtent(e.newPoint(0,t-n))):(e.toggleSelectRow(t,i),e.setMouseDown(e.newPoint(0,t)),e.setDragExtent(e.newPoint(0,0))),e.repaint())}},handleDOWNSHIFT:function(e){this.moveShiftSelect(e,1)},handleUPSHIFT:function(e){this.moveShiftSelect(e,-1)},handleLEFTSHIFT:function(e){},handleRIGHTSHIFT:function(e){},handleDOWN:function(e){this.moveSingleSelect(e,1)},handleUP:function(e){this.moveSingleSelect(e,-1)},handleLEFT:function(e){},handleRIGHT:function(e){var t=e.getMouseDown().plus(e.getDragExtent()),i=e.getColumnCount()-1,n=e.getHScrollValue(),r=t.y;n=Math.min(i,n),e.clearSelections(),e.select(n,r,0,0),e.setMouseDown(e.newPoint(n,r)),e.setDragExtent(e.newPoint(0,0)),e.repaint()},getAutoScrollAcceleration:function(){var e=this.getAutoScrollDuration()/2e3;return Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){500<Date.now()-this.sbLastAuto&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return 500<Date.now()-this.sbLastAuto?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t){this.moveSingleSelect(e,t,!0)},moveSingleSelect:function(e,t,i){var n=e.selectionModel.rowSelectionModel.selection,r=n[n.length-1],o=r[0],s=r[1];if(i){var a=r.offsetY=r.offsetY||t;r.offsetY<0?o+=t:s+=t}else o+=t,s+=t;o<0||s>=e.getRowCount()||(n.length-=1,n.length&&delete(r=n[n.length-1]).offsetY,e.selectRow(o,s),i&&o!==s&&((r=n[n.length-1]).offsetY=a),e.setMouseDown(e.newPoint(0,o)),e.setDragExtent(e.newPoint(0,s-o)),e.scrollToMakeVisible(e.properties.fixedColumnCount,t<0?o:s+1),l(e),e.fireSyntheticRowSelectionChangedEvent(),e.repaint())},isSingleRowSelection:function(){return!0}});function l(e){var t;if(e.properties.collapseCellSelections&&e.properties.singleRowSelectionMode&&!e.properties.multipleSelections&&(t=e.getSelectedRows()).length&&e.selectionModel.getSelections().length){var i=e.selectionModel.getLastSelection(),n=i.left,r=t[0],o=i.right-n;e.selectionModel.select(n,r,o,0,!1),e.repaint()}}t.exports=n},{"./Feature":74}],79:[function(e,t,i){"use strict";var n=e("./Feature").extend("ThumbwheelScrolling",{handleWheelMoved:function(e,t){if(e.properties.scrollingEnabled){var i=t.primitiveEvent,n=Math.sign(i.wheelDeltaX||-i.deltaX),r=Math.sign(i.wheelDeltaY||-i.deltaY);(n||r)&&e.scrollBy(-n||0,-r||0)}}});t.exports=n},{"./Feature":74}],80:[function(e,t,i){"use strict";var n=e("../lib/Registry").extend("Features",{BaseClass:e("./Feature"),initialize:function(){this.add(n.CellClick),this.add(n.CellEditing),this.add(n.CellSelection),this.add(n.ColumnMoving),this.add(n.ColumnResizing),this.add(n.ColumnSelection),this.add(n.ColumnSorting),this.add(n.Filters),this.add(n.KeyPaging),this.add(n.OnHover),this.add(n.RowSelection),this.add(n.ThumbwheelScrolling)}});n.BaseClass=e("./Feature"),n.CellClick=e("./CellClick"),n.CellEditing=e("./CellEditing"),n.CellSelection=e("./CellSelection"),n.ColumnMoving=e("./ColumnMoving"),n.ColumnResizing=e("./ColumnResizing"),n.ColumnSelection=e("./ColumnSelection"),n.ColumnSorting=e("./ColumnSorting"),n.Filters=e("./Filters"),n.KeyPaging=e("./KeyPaging"),n.OnHover=e("./OnHover"),n.RowSelection=e("./RowSelection"),n.ThumbwheelScrolling=e("./ThumbwheelScrolling"),t.exports=new n},{"../lib/Registry":85,"./CellClick":67,"./CellEditing":68,"./CellSelection":69,"./ColumnMoving":70,"./ColumnResizing":71,"./ColumnSelection":72,"./ColumnSorting":73,"./Feature":74,"./Filters":75,"./KeyPaging":76,"./OnHover":77,"./RowSelection":78,"./ThumbwheelScrolling":79}],81:[function(s,e,t){"use strict";"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i},window.CustomEvent.prototype=window.Event.prototype);var i,n,r=s("rectangular"),o=200,a=[],l=[],c=function(){for(var e=[],t=["",""],i=0;i<256;i++)e[i]=t;return e[27]=["ESC","ESCSHIFT"],e[192]=["`","~"],e[49]=["1","!"],e[50]=["2","@"],e[51]=["3","#"],e[52]=["4","$"],e[53]=["5","%"],e[54]=["6","^"],e[55]=["7","&"],e[56]=["8","*"],e[57]=["9","("],e[48]=["0",")"],e[189]=["-","_"],e[187]=["=","+"],e[8]=["BACKSPACE","BACKSPACESHIFT"],e[46]=["DELETE","DELETESHIFT"],e[9]=["TAB","TABSHIFT"],e[81]=["q","Q"],e[87]=["w","W"],e[69]=["e","E"],e[82]=["r","R"],e[84]=["t","T"],e[89]=["y","Y"],e[85]=["u","U"],e[73]=["i","I"],e[79]=["o","O"],e[80]=["p","P"],e[219]=["[","{"],e[221]=["]","}"],e[220]=["\\","|"],e[220]=["CAPSLOCK","CAPSLOCKSHIFT"],e[65]=["a","A"],e[83]=["s","S"],e[68]=["d","D"],e[70]=["f","F"],e[71]=["g","G"],e[72]=["h","H"],e[74]=["j","J"],e[75]=["k","K"],e[76]=["l","L"],e[186]=[";",":"],e[222]=["'","|"],e[13]=["RETURN","RETURNSHIFT"],e[16]=["SHIFT","SHIFT"],e[90]=["z","Z"],e[88]=["x","X"],e[67]=["c","C"],e[86]=["v","V"],e[66]=["b","B"],e[78]=["n","N"],e[77]=["m","M"],e[188]=[",","<"],e[190]=[".",">"],e[191]=["/","?"],e[16]=["SHIFT","SHIFT"],e[17]=["CTRL","CTRLSHIFT"],e[18]=["ALT","ALTSHIFT"],e[91]=["COMMANDLEFT","COMMANDLEFTSHIFT"],e[32]=["SPACE","SPACESHIFT"],e[93]=["COMMANDRIGHT","COMMANDRIGHTSHIFT"],e[18]=["ALT","ALTSHIFT"],e[38]=["UP","UPSHIFT"],e[37]=["LEFT","LEFTSHIFT"],e[40]=["DOWN","DOWNSHIFT"],e[39]=["RIGHT","RIGHTSHIFT"],e[33]=["PAGEUP","PAGEUPSHIFT"],e[34]=["PAGEDOWN","PAGEDOWNSHIFT"],e[35]=["PAGERIGHT","PAGERIGHTSHIFT"],e[36]=["PAGELEFT","PAGELEFTSHIFT"],e[112]=["F1","F1SHIFT"],e[113]=["F2","F2SHIFT"],e[114]=["F3","F3SHIFT"],e[115]=["F4","F4SHIFT"],e[116]=["F5","F5SHIFT"],e[117]=["F6","F6SHIFT"],e[118]=["F7","F7SHIFT"],e[119]=["F8","F8SHIFT"],e[120]=["F9","F9SHIFT"],e[121]=["F10","F10SHIFT"],e[122]=["F11","F11SHIFT"],e[123]=["F12","F12SHIFT"],e}();function h(e,t,i){var n=this;this.div=e,this.component=t,this.dragEndtime=Date.now(),this.infoDiv=document.createElement("div"),this.infoDiv.className="info",this.div.appendChild(this.infoDiv),this.gc=p(this.canvas=document.createElement("canvas"),i),this.bc=p(this.buffer=document.createElement("canvas"),i),this.div.appendChild(this.canvas),this.canvas.style.outline="none",this.mouseLocation=new r.Point(-1,-1),this.dragstart=new r.Point(-1,-1),this.bounds=new r.Rectangle(0,0,0,0),this.hasMouse=!1,document.addEventListener("mousemove",function(e){(n.hasMouse||n.isDragging())&&n.finmousemove(e)}),document.addEventListener("mouseup",function(e){n.finmouseup(e)}),document.addEventListener("wheel",function(e){n.finwheelmoved(e)}),document.addEventListener("keydown",function(e){n.finkeydown(e)}),document.addEventListener("keyup",function(e){n.finkeyup(e)}),this.canvas.onmouseover=function(){n.hasMouse=!0},this.addEventListener("focus",function(e){n.finfocusgained(e)}),this.addEventListener("blur",function(e){n.finfocuslost(e)}),this.addEventListener("mousedown",function(e){n.finmousedown(e)}),this.addEventListener("mouseout",function(e){n.hasMouse=!1,n.finmouseout(e)}),this.addEventListener("click",function(e){n.finclick(e)}),this.addEventListener("dblclick",function(e){n.findblclick(e)}),this.addEventListener("contextmenu",function(e){return n.fincontextmenu(e),e.preventDefault(),!1}),this.canvas.setAttribute("tabindex",0),this.resize(),this.beginResizing(),this.beginPainting()}function u(t){i&&(a.forEach(function(e){try{e.tickPainter(t)}catch(e){console.error(e)}e.component.tickNotification&&e.component.tickNotification()}),i=requestAnimationFrame(u))}function d(){i=i||requestAnimationFrame(u)}function f(e){if(n)for(var t=0;t<l.length;t++)try{l[t].tickResizer(e)}catch(e){console.error(e)}}function g(){n=n||setInterval(f,o)}function p(e,t){var i=e.getContext("2d",t),n={},r={};function o(t){t in n||/^(webkit|moz|ms|o)[A-Z]/.test(t)||"function"==typeof i[t]||Object.defineProperty(n,t,{get:function(){return r[t]=r[t]||i[t]},set:function(e){e!==r[t]&&(i[t]=r[t]=e)}})}return Object.keys(Object.getPrototypeOf(i)).forEach(o),Object.keys(i).forEach(o),i.cache=n,i.cache.save=function(){i.save(),r=Object.create(r)},i.cache.restore=function(){i.restore(),r=Object.getPrototypeOf(r)},i.conditionalsStack=[],Object.getOwnPropertyNames(h.graphicsContextAliases).forEach(function(e){i[e]=i[h.graphicsContextAliases[e]]}),Object.assign(i,s("./graphics"))}h.prototype={constructor:h.prototype.constructor,div:null,component:null,canvas:null,focuser:null,buffer:null,ctx:null,mouseLocation:null,dragstart:null,origin:null,bounds:null,dirty:!1,size:null,mousedown:!1,dragging:!1,repeatKeyCount:0,repeatKey:null,repeatKeyStartTime:0,currentKeys:[],hasMouse:!1,dragEndTime:0,lastRepaintTime:0,currentPaintCount:0,currentFPS:0,lastFPSComputeTime:0,addEventListener:function(e,t){this.canvas.addEventListener(e,t)},removeEventListener:function(e,t){this.canvas.removeEventListener(e,t)},stopPaintLoop:function(){i&&(cancelAnimationFrame(i),i=void 0)},restartPaintLoop:d,stopResizeLoop:function(){n&&(clearInterval(n),n=void 0)},restartResizeLoop:g,detached:function(){this.stopPainting(),this.stopResizing()},getCurrentFPS:function(){return this.currentFPS},tickPaint:function(e){var t=this.component.properties.enableContinuousRepaint,i=this.component.properties.repaintIntervalRate;0!==i&&(1e3/i<e-this.lastRepaintTime&&(t||this.dirty)&&(this.paintNow(),this.lastRepaintTime=e,t&&(this.currentPaintCount++,1e3<=e-this.lastFPSComputeTime&&(this.currentFPS=1e3*this.currentPaintCount/(e-this.lastFPSComputeTime),this.currentPaintCount=0,this.lastFPSComputeTime=e))))},beginPainting:function(){var t=this;this.requestRepaint(),this.tickPainter=function(e){t.tickPaint(e)},a.push(this)},stopPainting:function(){a.splice(a.indexOf(this),1)},beginResizing:function(){var e=this;this.tickResizer=function(){e.checksize()},l.push(this)},stopResizing:function(){l.splice(l.indexOf(this),1)},start:function(){this.beginPainting(),this.beginResizing()},stop:function(){this.stopPainting(),this.stopResizing()},getDivBoundingClientRect:function(){var e=this.div.getBoundingClientRect(),t=Math.floor(e.top),i=Math.floor(e.left),n=Math.ceil(e.width),r=Math.ceil(e.height);return{top:t,right:i+n,bottom:t+r,left:i,width:n,height:r,x:e.x,y:e.y}},checksize:function(){var e=this.getDivBoundingClientRect();e.width===this.size.width&&e.height===this.size.height||this.resize()},resize:function(){var e=this.size=this.getDivBoundingClientRect();this.width=e.width,this.height=e.height;var t=1,i=window.devicePixelRatio&&this.component.properties.useHiDPI;i&&(t=(window.devicePixelRatio||1)/(this.gc.webkitBackingStorePixelRatio||this.gc.mozBackingStorePixelRatio||this.gc.msBackingStorePixelRatio||this.gc.oBackingStorePixelRatio||this.gc.backingStorePixelRatio||1));this.buffer.width=this.canvas.width=this.width*t,this.buffer.height=this.canvas.height=this.height*t,this.canvas.style.width=this.buffer.style.width=this.width+"px",this.canvas.style.height=this.buffer.style.height=this.height+"px",this.bc.scale(t,t),i&&!this.component.properties.useBitBlit&&this.gc.scale(t,t),this.bounds=new r.Rectangle(0,0,this.width,this.height),this.component.setBounds(this.bounds),this.resizeNotification(),this.paintNow()},resizeNotification:function(){this.dispatchNewEvent(void 0,"fin-canvas-resized",{width:this.width,height:this.height})},getBounds:function(){return this.bounds},paintNow:function(){var e=this.component.properties.useBitBlit,t=e?this.bc:this.gc;try{t.cache.save(),this.dirty=!1,this.component.paint(t)}catch(e){console.error(e)}finally{t.cache.restore()}e&&this.flushBuffer()},flushBuffer:function(){0<this.buffer.width&&0<this.buffer.height&&this.gc.drawImage(this.buffer,0,0)},newEvent:function(e,t,i){var n={detail:i||{}};return e&&(n.detail.primitiveEvent=e),new CustomEvent(t,n)},dispatchNewEvent:function(e,t,i){return this.canvas.dispatchEvent(this.newEvent(e,t,i))},dispatchNewMouseKeysEvent:function(e,t,i){return(i=i||{}).mouse=this.mouseLocation,i.keys=this.currentKeys,this.dispatchNewEvent(e,t,i)},finmousemove:function(e){!this.isDragging()&&this.mousedown&&(this.beDragging(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-dragstart",{isRightClick:this.isRightClick(e),dragstart:this.dragstart}),this.dragstart=new r.Point(this.mouseLocation.x,this.mouseLocation.y)),this.mouseLocation=this.getLocal(e),this.isDragging()&&this.dispatchNewMouseKeysEvent(e,"fin-canvas-drag",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}),this.bounds.contains(this.mouseLocation)&&this.dispatchNewMouseKeysEvent(e,"fin-canvas-mousemove")},finmousedown:function(e){this.mouseLocation=this.mouseDownLocation=this.getLocal(e),this.mousedown=!0,this.dispatchNewMouseKeysEvent(e,"fin-canvas-mousedown",{isRightClick:this.isRightClick(e)}),this.takeFocus()},finmouseup:function(e){this.mousedown&&(this.isDragging()&&(this.dispatchNewMouseKeysEvent(e,"fin-canvas-dragend",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}),this.beNotDragging(),this.dragEndtime=Date.now()),this.mousedown=!1,this.dispatchNewMouseKeysEvent(e,"fin-canvas-mouseup",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}))},finmouseout:function(e){this.mousedown||(this.mouseLocation=new r.Point(-1,-1)),this.repaint(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-mouseout",{dragstart:this.dragstart})},finwheelmoved:function(e){!this.isDragging()&&this.hasFocus()&&(e.preventDefault(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-wheelmoved",{isRightClick:this.isRightClick(e)}))},finclick:function(e){this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-click",{isRightClick:this.isRightClick(e)})},findblclick:function(e){this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-dblclick",{isRightClick:this.isRightClick(e)})},getCharMap:function(){return c},getKeyChar:function(e){var t=e.keyCode||e.detail.key,i=e.shiftKey||e.detail.shift,n=e.key;return e.legacyKey=c[t]&&c[t][i?1:0],"string"==typeof n&&1===n.length?n:e.legacyKey||n},finkeydown:function(e){if(this.hasFocus()){9===e.keyCode&&e.preventDefault();var t=this.getKeyChar(e);e.repeat?this.repeatKey===t?this.repeatKeyCount++:(this.repeatKey=t,this.repeatKeyStartTime=Date.now()):(this.repeatKey=null,this.repeatKeyCount=0,this.repeatKeyStartTime=0),-1===this.currentKeys.indexOf(t)&&this.currentKeys.push(t),this.dispatchNewEvent(e,"fin-canvas-keydown",{alt:e.altKey,ctrl:e.ctrlKey,char:t,legacyChar:e.legacyKey,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeatCount:this.repeatKeyCount,repeatStartTime:this.repeatKeyStartTime,shift:e.shiftKey,identifier:e.key,currentKeys:this.currentKeys.slice(0)})}},finkeyup:function(e){if(this.hasFocus()){9===e.keyCode&&e.preventDefault();var t=this.getKeyChar(e);this.currentKeys.splice(this.currentKeys.indexOf(t),1),this.repeatKeyCount=0,this.repeatKey=null,this.repeatKeyStartTime=0,this.dispatchNewEvent(e,"fin-canvas-keyup",{alt:e.altKey,ctrl:e.ctrlKey,char:t,legacyChar:e.legacyKey,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeat:e.repeat,shift:e.shiftKey,identifier:e.key,currentKeys:this.currentKeys.slice(0)})}},finfocusgained:function(e){this.dispatchNewEvent(e,"fin-canvas-focus-gained")},finfocuslost:function(e){this.dispatchNewEvent(e,"fin-canvas-focus-lost")},fincontextmenu:function(e){e.ctrlKey&&-1===this.currentKeys.indexOf("CTRL")&&this.currentKeys.push("CTRL"),this.dispatchNewMouseKeysEvent(e,"fin-canvas-context-menu",{isRightClick:this.isRightClick(e)})},paintLoopRunning:function(){return!!i},requestRepaint:function(){this.dirty=!0},repaint:function(){this.requestRepaint(),i&&0!==this.component.properties.repaintIntervalRate||this.paintNow()},getMouseLocation:function(){return this.mouseLocation},getOrigin:function(){var e=this.canvas.getBoundingClientRect();return new r.Point(e.left,e.top)},getLocal:function(e){var t=this.canvas.getBoundingClientRect();return new r.Point(e.clientX-t.left,e.clientY-t.top)},hasFocus:function(){return document.activeElement===this.canvas},takeFocus:function(){var e=this;this.hasFocus()||setTimeout(function(){e.canvas.focus()},10)},beDragging:function(){this.dragging=!0,this.disableDocumentElementSelection()},beNotDragging:function(){this.dragging=!1,this.enableDocumentElementSelection()},isDragging:function(){return this.dragging},disableDocumentElementSelection:function(){var e=document.body.style;e.cssText=e.cssText+"-webkit-user-select: none"},enableDocumentElementSelection:function(){var e=document.body.style;e.cssText=e.cssText.replace("-webkit-user-select: none","")},setFocusable:function(e){this.focuser.style.display=e?"":"none"},isRightClick:function(e){var t;return"which"in(e=e||window.event)?t=3===e.which:"button"in e&&(t=2===e.button),t},dispatchEvent:function(e){return this.canvas.dispatchEvent(e)},setInfo:function(e,t){e&&(void 0!==t&&(t&&!isNaN(Number(t))&&(t+="px"),this.infoDiv.style.width=t),e.indexOf("<")?this.infoDiv.innerHTML=e:this.infoDiv.innerText=e),this.infoDiv.style.display=e?"block":"none"}},d(),g(),h.graphicsContextAliases={simpleText:"fillText"},e.exports=h},{"./graphics":95,rectangular:16}],82:[function(e,t,i){"use strict";i.shaker=function(t){var i=this,n=(t=t||{}).el||i.el,e=t.duration||"0.065s",r=window.getComputedStyle(n),o=r.transition.split(","),s=r.position,a=parseInt(r.left),l=-3,c=6;function h(e){e&&"left"!==e.propertyName||(n.style.left=a+l+"px",c--||(n.removeEventListener("transitionend",h),o.pop(),n.style.transition=o.join(","),n.style.position=s,t.callback&&t.callback.call(i,t)),l=c?-l:0)}o.push("left "+e),n.style.transition=o.join(","),n.addEventListener("transitionend",h),h()};var u={"background-color":"yellow","box-shadow":"0 0 10px red"};i.glower=function(n){var r=this,o=(n=n||{}).el||r.el,t=n.duration||"0.25s",i=n.styles||u,s=i.length,a=window.getComputedStyle(o),l={},c=a.transition,h=c.split(",");Object.keys(i).forEach(function(e){l[e]={style:a[e],undo:!0},h.push(e+" "+t)}),o.style.transition=h.join(","),o.addEventListener("transitionend",function e(t){var i=l[t.propertyName];i.undo?(o.style[t.propertyName]=i.style,i.undo=!1):--s||(o.removeEventListener("transitionend",e),o.style.transition=c,n.callback&&n.callback.call(r,n))}),Object.keys(i).forEach(function(e){o.style[e]=i[e]})}},{}],83:[function(e,t,i){"use strict";var r=e("rectangular").Rectangle;function n(e,t,i,n){r.call(this,e,t,i-1,n-1)}n.prototype=Object.create(r.prototype,{width:{get:function(){return this.extent.x+1}},height:{get:function(){return this.extent.y+1}}}),t.exports=n},{rectangular:16}],84:[function(e,t,i){"use strict";var n=e("../Base").extend({initialize:function(e,t,i){"object"==typeof t&&(i=t,t=e),this.locale=t,i&&("function"==typeof i.invalid&&(this.invalid=i.invalid),i.expectation&&(this.expectation=i.expectation))}});window.Intl||(window.Intl={NumberFormat:function(e,n){this.format=function(e){var t=e.toString();if(!n||void 0===n.useGrouping||n.useGrouping){var i=t.indexOf(".");for(i<0&&(i=t.length);0<(i-=3)&&0<="0123456789".indexOf(t[i-1]);)t=t.substr(0,i)+","+t.substr(i)}return t}},DateTimeFormat:function(e,t){this.format=function(e){return null!=e?("object"!=typeof e&&(e=new Date(e)),e=e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()):e=null,e}}});var r=n.extend("NumberFormatter",{initialize:function(e,t,i){"object"==typeof t&&(i=t),i=i||{},this.format=new Intl.NumberFormat(this.locale,i).format;var n=new Intl.NumberFormat(this.locale,{useGrouping:!1}).format;this.demapper=function(e){var t=this.map.indexOf(e)%11;return t<0?"":t<10?t:"."}.bind(this),this.map=n(10123456789.5).substr(1,11),i.acceptStandardDigits&&"0123456789."!==this.map&&(this.map+="0123456789."),this.invalids=new RegExp("[^"+this.format(11111).replace(this.map[1],"")+this.map+"]")},invalid:function(e){return this.invalids.test(e)},expectation:"Expected a number with optional commas (thousands grouping separator), optional decimal point, and an optional fractional part.\nComma separators are part of the format and will always be displayed for values >= 1000.\nEdited values are always saved in their entirety even though the formatted value is rounded to the specified number of decimal places.",parse:function(e){var t=Number(e.split("").map(this.demapper).join(""));if(isNaN(t))throw"Invalid Number";return t}});var o=n.extend("DateFormatter",{initialize:function(e,t,i){"object"==typeof t&&(i=t),i=i||{},this.format=new Intl.DateTimeFormat(this.locale,i).format;var n=new Intl.NumberFormat(this.locale,{useGrouping:!1,style:"decimal"}).format,r=this.localizedDigits=n(10123456789).substr(1,10);this.digitFormatter=function(e){return this.localizedDigits[e]}.bind(this),this.digitParser=function(e){var t=this.localizedDigits.indexOf(e);t<0&&(t="");return t}.bind(this);var o=this.transformNumber(this.digitFormatter,1987),s=this.transformNumber(this.digitFormatter,12),a=this.transformNumber(this.digitFormatter,30),l=new Date(1987,11,30),c=(0,new Intl.DateTimeFormat(this.locale).format)(l),h=new Intl.NumberFormat(this.locale).format(456),u=this.localizedNumberPattern=new RegExp("["+r+"]+","g"),d=c.match(u);this.partsMap={yy:d.indexOf(o),mm:d.indexOf(s),dd:d.indexOf(a)},i.acceptStandardDigits&&(h+="1234567890"),this.invalids=new RegExp("[^"+c.replace(/-/g,"\\-")+h+"]")},invalid:function(e){return this.invalids.test(e)},parse:function(e){var t=e.match(this.localizedNumberPattern);if(!t||3!==t.length)throw"Invalid Date";var i=this.transformNumber(this.digitParser,t[this.partsMap.yy]),n=this.transformNumber(this.digitParser,t[this.partsMap.mm])-1,r=this.transformNumber(this.digitParser,t[this.partsMap.dd]);return new Date(i,n,r)},transformNumber:function(e,t){return t.toString().split("").map(e).join("")}});function s(e,t,i){this.locale=e,this.int=this.float=this.construct("number",r,t),this.construct("date",o,i)}s.prototype={constructor:s.prototype.constructor,$$CLASS_NAME:"Localization",construct:function(e,t,i){var n=e[0].toUpperCase()+e.substr(1).toLowerCase()+"Formatter",r=t.bind(null,this.locale),o=new r(i);return this[n]=r,this.add(e,o)},add:function(e,t){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t||"function"!=typeof t.format||"function"!=typeof t.parse||t.invalid&&"function"!=typeof t.invalid||t.expectation&&"string"!=typeof t.expectation)throw"Expected localizer object to conform to interface.";return this[e=(e=e||t.name)&&e.toLowerCase()]=t},get:function(e){return this[e&&e.toLowerCase()]||this.string},chromeDate:{format:function(e){if(null!=e){"object"!=typeof e&&(e=new Date(e));var t=e.getFullYear(),i=e.getMonth()+1,n=i<10?"0"+i:i,r=e.getDate();e=t+"-"+n+"-"+(r<10?"0"+r:r)}else e=null;return e},parse:function(e){var t=e.split("-");return t&&3===t.length?new Date(t[0],t[1]-1,t[2]):null}},null:{format:function(e){return e},parse:function(e){return e}},string:{format:function(e){return e+""},parse:function(e){return e+""}}},t.exports=s},{"../Base":21}],85:[function(e,t,i){"use strict";var n=e("../Base").extend("Registry",{initialize:function(){this.items=Object.create(null)},add:function(t,i){if(1===arguments.length&&(i=t,t=void 0),i){if(!(t=t||i.getClassName&&i.getClassName()))throw new this.HypergridError("Cannot register "+this.friendlyName()+" without a name.");return this.items[t]=i,t=t.toLowerCase(),Object.keys(this.items).filter(function(e){return e.toLowerCase()===t}).forEach(function(e){this.items[e]=i},this),i}},addSynonym:function(e,t){return this.items[e]=this.items[t]},get:function(e){if(e){var t=this.items[e];if(!t){var i=e.toLowerCase(),n=Object.keys(this.items).find(function(e){return i===e.toLowerCase()});if(!(t=this.items[n]))throw new this.HypergridError('Expected "'+e+'" to be a case-insensitive match for a registered '+this.friendlyName()+".");this.addSynonym(e,n)}return t}},friendlyName:function(){if(this.BaseClass){var e=this.BaseClass.getClassName();e=e&&e.replace(/([A-Z])/g," $1").trim().toLowerCase()}else e=(t=this.getClassName(),r.find(function(e){if(e.plural.test(t))return t=t.replace(e.plural,e.singular),!0}),t).toLowerCase();var t;return(/^[aeiou]/.test(e=e||"item")?"an":"a")+" "+e}}),r=[{plural:/ies$/,singular:"y"},{plural:/s$/,singular:""}];t.exports=n},{"../Base":21}],86:[function(e,t,i){"use strict";var n=e("sparse-boolean-array"),s=e("./InclusiveRectangle");function r(e){this.grid=e,this.reset()}r.prototype={constructor:r.prototype.constructor,allRowsSelected:!1,reset:function(){this.selections=[],this.flattenedX=[],this.flattenedY=[],this.rowSelectionModel=new n,this.columnSelectionModel=new n,this.lastSelectionType=[]},getLastSelection:function(){var e=this.selections;return e[e.length-1]},getLastSelectionType:function(e){return this.lastSelectionType[e||0]||""},setLastSelectionType:function(e,t){var i=this.lastSelectionType.indexOf(e);(0!==i||t)&&(0<=i&&this.lastSelectionType.splice(i,1),t||this.lastSelectionType.unshift(e))},select:function(e,t,i,n,r){var o=new s(e,t,i+1,n+1);o.firstSelectedCell=this.grid.newPoint(e,t),o.lastSelectedCell=o.firstSelectedCell.x===o.origin.x&&o.firstSelectedCell.y===o.origin.y?o.corner:o.origin,this.grid.properties.multipleSelections?(this.selections.push(o),this.flattenedX.push(o.flattenXAt(0)),this.flattenedY.push(o.flattenYAt(0))):(this.selections[0]=o,this.flattenedX[0]=o.flattenXAt(0),this.flattenedY[0]=o.flattenYAt(0)),this.setLastSelectionType("cell"),r||this.grid.selectionChanged()},toggleSelect:function(i,n,r,o){var s;this.selections.find(function(e,t){return s=t,e.origin.x===i&&e.origin.y===n&&e.extent.x===r&&e.extent.y===o})?(this.selections.splice(s,1),this.flattenedX.splice(s,1),this.flattenedY.splice(s,1),this.setLastSelectionType("cell",!this.selections.length),this.grid.selectionChanged()):this.select(i,n,r,o)},clearMostRecentSelection:function(e){e||this.setAllRowsSelected(!1),this.selections.length&&--this.selections.length,this.flattenedX.length&&--this.flattenedX.length,this.flattenedY.length&&--this.flattenedY.length,this.setLastSelectionType("cell",!this.selections.length)},clearMostRecentColumnSelection:function(){this.columnSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("column",!this.columnSelectionModel.selection.length)},clearMostRecentRowSelection:function(){this.rowSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},clearRowSelection:function(){this.rowSelectionModel.clear(),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},getSelections:function(){return this.selections},hasSelections:function(){return 0!==this.selections.length},hasRowSelections:function(){return!this.rowSelectionModel.isEmpty()},hasColumnSelections:function(){return!this.columnSelectionModel.isEmpty()},isCellSelectedInRow:function(e){return this._isCellSelected(this.flattenedX,0,e)},isCellSelectedInColumn:function(e){return this._isCellSelected(this.flattenedY,e,0)},isSelected:function(e,t){return this.isColumnSelected(e)||this.isRowSelected(t)||this._isCellSelected(this.selections,e,t)},isCellSelected:function(e,t){return this._isCellSelected(this.selections,e,t)},_isCellSelected:function(e,t,i){var n=this;return!!e.find(function(e){return n.rectangleContains(e,t,i)})},clear:function(e){this.selections.length=0,this.flattenedX.length=0,this.flattenedY.length=0,this.columnSelectionModel.clear(),e?0<=this.lastSelectionType.indexOf("row")&&(this.lastSelectionType=["row"]):(this.lastSelectionType.length=0,this.setAllRowsSelected(!1),this.rowSelectionModel.clear())},isRectangleSelected:function(t,i,n,r){return!!this.selections.find(function(e){return e.origin.x===t&&e.origin.y===i&&e.extent.x===n&&e.extent.y===r})},isColumnSelected:function(e){return this.columnSelectionModel.isSelected(e)},isRowSelected:function(e){return this.allRowsSelected||this.rowSelectionModel.isSelected(e)},selectColumn:function(e,t){this.columnSelectionModel.select(e,t),this.setLastSelectionType("column",!this.columnSelectionModel.selection.length)},selectAllRows:function(){this.clear(),this.setAllRowsSelected(!0)},setAllRowsSelected:function(e){this.allRowsSelected=e},areAllRowsSelected:function(){return this.allRowsSelected},selectRow:function(e,t){this.rowSelectionModel.select(e,t),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},deselectColumn:function(e,t){this.columnSelectionModel.deselect(e,t),this.setLastSelectionType("column",!this.columnSelectionModel.selection.length)},deselectRow:function(e,t){this.areAllRowsSelected()&&(this.setAllRowsSelected(!1),this.rowSelectionModel.select(0,this.grid.getRowCount()-1)),this.rowSelectionModel.deselect(e,t),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},getSelectedRows:function(){if(this.areAllRowsSelected()){for(var e=this.grid.getHeaderRowCount(),t=this.grid.getRowCount()-e,i=new Array(t),n=0;n<t;n++)i[n]=n+e;return i}return this.rowSelectionModel.getSelections()},getSelectedColumns:function(){return this.columnSelectionModel.getSelections()},isColumnOrRowSelected:function(){return!this.columnSelectionModel.isEmpty()||!this.rowSelectionModel.isEmpty()},getFlattenedYs:function(){var o=[],s={};return this.selections.forEach(function(e){for(var t=e.origin.y,i=e.height,n=0;n<i;n++){var r=n+t;s[r]||(o.push(r),s[r]=!0)}}),o.sort(function(e,t){return e-t}),o},selectRowsFromCells:function(n,e){n=n||0;var r=this.rowSelectionModel;e||(this.setAllRowsSelected(!1),r.clear()),this.selections.forEach(function(e){var t=e.origin.y,i=e.extent.y;t+=n,r.select(t,t+i)})},selectColumnsFromCells:function(n){n=n||0;var r=this.columnSelectionModel;r.clear(),this.selections.forEach(function(e){var t=e.origin.x,i=e.extent.x;t+=n,r.select(t,t+i)})},isInCurrentSelectionRectangle:function(e,t){var i=this.getLastSelection();return i&&this.rectangleContains(i,e,t)},rectangleContains:function(e,t,i){var n=e.origin.x,r=e.origin.y,o=n+e.extent.x,s=r+e.extent.y;return e.extent.x<0&&(n=o,o=e.origin.x),e.extent.y<0&&(r=s,s=e.origin.y),n<=t&&r<=i&&t<=o&&i<=s}},t.exports=r},{"./InclusiveRectangle":83,"sparse-boolean-array":17}],87:[function(e,t,i){"use strict";var n=e("rectangular").Rectangle;function r(){n.apply(this,arguments)}r.prototype=Object.create(n.prototype,{width:{get:function(){return this.extent.x+1}},height:{get:function(){return this.extent.y+1}}}),t.exports=r},{rectangular:16}],88:[function(e,t,i){"use strict";t.exports=function(n,r){Object.keys(r).forEach(function(e){for(var t,i=n;i&&!(t=Object.getOwnPropertyDescriptor(i,e));i=Object.getPrototypeOf(i));void 0!==r[e]?(!t||t.writable||t.set)&&(n[e]=r[e]):t&&(!t.configurable||t.set||t.get?(t.writable||t.set)&&(n[e]=void 0):delete n[e])})}},{}],89:[function(e,t,i){"use strict";var n=Object.defineProperties({},{value:{get:function(){return this.subgrid.getValue(this.dataCell.x,this.dataCell.y)},set:function(e){this.subgrid.setValue(this.dataCell.x,this.dataCell.y,e)}},dataRow:{get:function(){return this.subgrid.getRow(this.dataCell.y)}},formattedValue:{get:function(){return this.grid.formatValue(this.properties.format,this.value)}},bounds:{get:function(){return this._bounds||(this._bounds={x:this.visibleColumn.left,y:this.visibleRow.top,width:this.visibleColumn.width,height:this.visibleRow.height})}},columnProperties:{get:function(){var e=this._columnProperties;return e||(e=this.column.properties,this.isDataColumn&&(this.isDataRow||(e=this.isFilterRow?e.filterProperties:e.columnHeader)),this._columnProperties=e),e}},cellOwnProperties:{get:function(){return void 0===this._cellOwnProperties&&(this._cellOwnProperties=this.column.getCellOwnProperties(this.dataCell.y,this.subgrid)),this._cellOwnProperties}},properties:{get:function(){return this.cellOwnProperties||this.columnProperties}},getCellProperty:{value:function(e){return this.properties[e]}},setCellProperty:{value:function(e,t){this._cellOwnProperties=this.column.setCellProperty(this.dataCell.y,e,t,this.subgrid)}},rowOwnProperties:{get:function(){return this.behavior.getRowProperties(this,void 0,this.subgrid)}},rowProperties:{get:function(){return this.behavior.getRowProperties(this,null,this.subgrid)},set:function(e){this.behavior.setRowProperties(this,e,this.subgrid)}},getRowProperty:{value:function(e){var t=this.rowOwnProperties;return t&&t[e]}},setRowProperty:{value:function(e,t){this.rowProperties[e]=t}},reset:{value:function(e,t){this._columnProperties=void 0,this._cellOwnProperties=void 0,this._bounds=void 0,this.snapshot=[],this.minWidth=void 0,this.visibleColumn=e,this.visibleRow=t,this.subgrid=t.subgrid,this.column=e.column,this.gridCell.x=e.columnIndex,this.gridCell.y=t.index,this.dataCell.x=this.column&&this.column.index,this.dataCell.y=t.rowIndex}},resetGridCY:{value:function(e,t){var i,n,r=(n=this.renderer.getVisibleColumn(e))&&(i=this.renderer.getVisibleRow(t));return r&&this.reset(n,i),r}},resetGridXY:{value:function(e,t){var i,n,r=(n=this.renderer.visibleColumns[e])&&(i=this.renderer.getVisibleRow(t));return r&&this.reset(n,i),r}},resetDataXY:{value:function(e,t,i){var n,r,o=(r=this.renderer.getVisibleDataColumn(e))&&(n=this.renderer.getVisibleDataRow(t,i));return o&&this.reset(r,n),o}},resetGridXDataY:{value:function(e,t,i,n){var r,o,s;return n?(o={column:this.behavior.getColumn(e),columnIndex:e},s={subgrid:i||this.behavior.dataModel,rowIndex:t},r=!0):r=(o=this.renderer.getVisibleColumn(e))&&(s=this.renderer.getVisibleDataRow(t,i)),r&&this.reset(o,s),r&&this}},clone:{value:function(e){var t=new this.constructor;return t.resetGridXY(this.visibleColumn.index,this.visibleRow.index),e&&Object.assign(t,this),t}},editPoint:{get:function(){throw"The `.editPoint` property is no longer available as of v1.2.10. Use the following coordinates instead:\n`.gridCell.x` - The active column index. (Adjusted for column scrolling after fixed columns.)\n`.gridCell.y` - The vertical grid coordinate. (Unaffected by row scrolling.)\n`.dataCell.x` - The data model's column index. (Unaffected by column scrolling.)\n`.dataCell.y` - The data model's row index. (Adjusted for data row scrolling after fixed rows.)\n"}},mousePointInClickRect:{get:function(){var e="clickRect"in this?this.clickRect:this.properties.clickRect;return!e||("function"==typeof e.contains?e.contains(this.mousePoint):e.x<=this.mousePoint.x&&this.mousePoint.x<e.x+e.width&&e.y<=this.mousePoint.y&&this.mousePoint.y<e.y+e.height)}},isRowVisible:{get:function(){return!!this.visibleRow}},isColumnVisible:{get:function(){return!!this.visibleColumn}},isCellVisible:{get:function(){return this.isRowVisible&&this.isColumnVisible}},isDataRow:{get:function(){return this.subgrid.isData}},isDataColumn:{get:function(){return 0<=this.gridCell.x}},isDataCell:{get:function(){return this.isDataRow&&this.isDataColumn}},isRowSelected:{get:function(){return this.isDataRow&&this.selectionModel.isRowSelected(this.dataCell.y)}},isColumnSelected:{get:function(){return this.isDataColumn&&this.selectionModel.isColumnSelected(this.gridCell.x)}},isCellSelected:{get:function(){return this.selectionModel.isCellSelected(this.gridCell.x,this.dataCell.y)}},isRowHovered:{get:function(){return this.grid.canvas.hasMouse&&this.isDataRow&&this.grid.hoverCell&&this.grid.hoverCell.y===this.gridCell.y}},isColumnHovered:{get:function(){return this.grid.canvas.hasMouse&&this.isDataColumn&&this.grid.hoverCell&&this.grid.hoverCell.x===this.gridCell.x}},isCellHovered:{get:function(){return this.isRowHovered&&this.isColumnHovered}},isRowFixed:{get:function(){return this.isDataRow&&this.dataCell.y<this.grid.properties.fixedRowCount}},isColumnFixed:{get:function(){return this.isDataColumn&&this.gridCell.x<this.grid.properties.fixedColumnCount}},isCellFixed:{get:function(){return this.isRowFixed&&this.isColumnFixed}},isHandleColumn:{get:function(){return this.gridCell.x===this.behavior.rowColumnIndex&&this.grid.properties.showRowNumbers}},isHandleCell:{get:function(){return this.isHandleColumn&&this.isDataRow}},isTreeColumn:{get:function(){return this.gridCell.x===this.behavior.treeColumnIndex}},isHeaderRow:{get:function(){return this.subgrid.isHeader}},isHeaderHandle:{get:function(){return this.isHeaderRow&&this.isHandleColumn}},isHeaderCell:{get:function(){return this.isHeaderRow&&this.isDataColumn}},isFilterRow:{get:function(){return this.subgrid.isFilter}},isFilterHandle:{get:function(){return this.isFilterRow&&this.isHandleColumn}},isFilterCell:{get:function(){return this.isFilterRow&&this.isDataColumn}},isSummaryRow:{get:function(){return this.subgrid.isSummary}},isSummaryHandle:{get:function(){return this.isSummaryRow&&this.isHandleColumn}},isSummaryCell:{get:function(){return this.isSummaryRow&&this.isDataColumn}},isTopTotalsRow:{get:function(){return this.subgrid===this.behavior.subgrids.lookup.topTotals}},isTopTotalsHandle:{get:function(){return this.isTopTotalsRow&&this.isHandleColumn}},isTopTotalsCell:{get:function(){return this.isTopTotalsRow&&this.isDataColumn}},isBottomTotalsRow:{get:function(){return this.subgrid===this.behavior.subgrids.lookup.bottomTotals}},isBottomTotalsHandle:{get:function(){return this.isBottomTotalsRow&&this.isHandleColumn}},isBottomTotalsCell:{get:function(){return this.isBottomTotalsRow&&this.isDataColumn}},$$CLASS_NAME:{value:"CellEvent"}}),r=e("rectangular").Point;function o(e,t){}o.prototype=r.prototype;var s={writable:!0},a={writable:!0,enumerable:!0};t.exports=function(e){function t(e,t){Object.defineProperties(this,{visibleColumn:s,visibleRow:s,subgrid:s,gridCell:{value:new o},dataCell:{value:new o},column:a,_columnProperties:s,_cellOwnProperties:s,_bounds:s,snapshot:s,minWidth:s,disabled:s}),arguments.length&&this.resetGridCY(e,t)}return t.prototype=Object.create(n,{constructor:{value:t},grid:{value:e},renderer:{value:e.renderer},selectionModel:{value:e.selectionModel},behavior:{value:e.behavior},dataModel:{value:e.behavior.dataModel}}),t}},{rectangular:16}],90:[function(e,t,i){"use strict";console.warn||(console.warn=function(){console.log.apply(console,["WARNING:"].concat(Array.prototype.slice.call(arguments)))});var y=/^[\w\.]+\(.*\)$/,x=function(e,t,i,n,r){"string"==typeof n&&(r=n,n=void 0);var o,s,a=t.split("."),l=this.$$DEPRECATION_WARNED=this.$$DEPRECATION_WARNED||{},c=this,h=0<=t.indexOf(" "),u=y.test(e);if(e in l||(l[e]=x.warnings),!u){if(h)return void(l[e]&&(--l[e],console.warn(t)));throw"Expected method name with parentheses in 1st parameter OR simple warning (containing one or more spaces) in 2nd parameter of deprecated() call."}if(h)throw"Expected replacement method or property in 2nd parameter of deprecated() call.";l[e]&&(--l[e],o=y.test(t)?"method":"property",s="The ."+e+" method has been deprecated as of v"+i+" in favor of the ."+a.join(".")+" "+o+". (Will be removed in a future release.)",r&&(s+=" "+r),console.warn(s));var d=S(e);function f(e){var t=d.indexOf(e);if(-1===t)throw'Actual arg "'+e+'" not found in formal arg list '+d;return n[t]}for(var g=0,p=a.length-1;g<=p;++g){var m=a[g],v=m.match(/\w+/)[0],b=y.test(m),C=b?S(m):void 0,w=[];C?(w=C.map(f),c=c[v].apply(c,w)):c=b?c[v]():c[v]}return c};function S(e){return e.match(/^\w+\((.*)\)$/)[1].match(/(\w+)/g)}x.warnings=1,t.exports=x},{}],91:[function(e,t,i){"use strict";var o=["gridCell","dataCell","mousePoint","keys","row"];t.exports=function(e,t,i,n){var r;if(this.canvas)return"boolean"!=typeof t&&(n=i,i=t,t=!1),i?i instanceof CustomEvent&&(i=Object({},i)):i={},i.type||(i.type=e),i.detail||(i={detail:i}),(r=i.detail).grid||(r.grid=this),r.time=Date.now(),n&&(r.primitiveEvent||(r.primitiveEvent=n),o.forEach(function(e){e in n&&!(e in r)&&(r[e]=n[e])}),"dataRow"in n&&Object.defineProperty(r,"row",{get:function(){return n.dataRow}})),i.cancelable=t,this.canvas.dispatchEvent(new CustomEvent(e,i))}},{}],92:[function(e,t,i){"use strict";var n,r={theme:{enumerable:!0,get:function(){return this.grid.getTheme()},set:function(e){this.grid.applyTheme(e)}},wheelHFactor:{enumerable:!0,get:function(){return this.grid.sbHScroller.deltaXFactor},set:function(e){this.grid.sbHScroller.deltaXFactor=e}},wheelVFactor:{enumerable:!0,get:function(){return this.grid.sbVScroller.deltaYFactor},set:function(e){this.grid.sbVScroller.deltaYFactor=e}},subgrids:{enumerable:!0,get:function(){return this.var.subgrids},set:function(e){this.var.subgrids=e.slice(),this.grid.behavior&&(this.grid.behavior.subgrids=e)}},features:{enumerable:!0,get:function(){return this.var.features},set:function(e){this.var.features=e.slice(),this.grid.behavior&&(this.grid.behavior.initializeFeatureChain(e),this.grid.allowEvents(this.grid.getRowCount()))}},gridRenderer:{enumerable:!0,get:function(){return this.var.gridRenderer},set:function(e){this.var.gridRenderer=e,this.grid.renderer.setGridRenderer(e)}},columnIndexes:{enumerable:!0,get:function(){return this.grid.behavior.getActiveColumns().map(function(e){return e.index})},set:function(e){this.grid.behavior.setColumnOrder(e),this.grid.behavior.changed()}},columnNames:{enumerable:!0,get:function(){return this.grid.behavior.getActiveColumns().map(function(e){return e.name})},set:function(e){this.grid.behavior.setColumnOrderByName(e),this.grid.behavior.changed()}},rows:{enumerable:!0,get:function(){var a={},l=this.grid.behavior,c=this.grid.properties.defaultRowHeight;return l.subgrids.forEach(function(e){for(var t=e.name||e.type,i=0,n=e.getRowCount();i<n;++i){var r=l.getRowProperties(i,void 0,e);if(r){var o={height:r.height};o.height===c&&(o=void 0),r=Object.assign({},r,o),Object.getOwnPropertyNames(r).find(s)&&((a[t]||(a[t]={}))[i]=r)}}function s(e){return void 0!==r[e]}}),a},set:function(e){e&&(function(t){var r=this.grid.behavior,o=this.settingState?"setRowProperties":"addRowProperties";Object.keys(t).forEach(function(e){var i=r.subgrids.lookup[e];if(i){var n=t[e];Object.keys(n).forEach(function(e){var t=n[e];r[o](e,t,i)})}})}.call(this,e),this.grid.behavior.changed())}},columns:{enumerable:!0,get:function(){var e=this.grid.behavior.getColumns(),n=this.grid.headerify;return e.reduce(function(e,i){var t=Object.keys(i.properties).reduce(function(e,t){switch(t){case"preferredWidth":break;case"header":if(n&&i.properties.header===n(i.properties.name))break;default:e[t]=i.properties[t]}return e},{});return Object.keys(t).length&&(e[i.name]=t),e},{})},set:function(e){e&&(function(e){this.grid.behavior.addAllColumnProperties(e,this.settingState)}.call(this,e),this.grid.behavior.changed())}},cells:{enumerable:!0,get:function(){var s=this.grid.behavior,i=s.getColumns(),a={};return s.subgrids.forEach(function(n){for(var r=n.name||n.type,o=0,e=n.getRowCount();o<e;++o)i.forEach(t);function t(e){var t=s.getCellOwnProperties(e.index,o,n);if(t){var i=a[r]=a[r]||{};(i[o]=i[o]={})[e.name]=Object.assign({},t)}}}),a},set:function(e){e&&(function(i){var n=this.grid.behavior.subgrids,s=this.grid.behavior.getColumns(),a=this.settingState?"setCellProperties":"addCellProperties";Object.keys(i).forEach(function(e){var o=n.lookup[e];if(o){var t=i[e];Object.keys(t).forEach(function(n){var r=t[n];Object.keys(r).forEach(function(t){var e=r[t];if(e){var i=s.find(function(e){return e.name===t});i&&i[a](n,e,o)}})})}})}.call(this,e),this.grid.behavior.changed())}},rowHeaderCheckboxes:{enumerable:!0,get:function(){return this.var.rowHeaderCheckboxes},set:function(e){this.var.rowHeaderCheckboxes=e,this.grid.renderer.resetRowHeaderColumnWidth()}},rowHeaderNumbers:{enumerable:!0,get:function(){return this.var.rowHeaderNumbers},set:function(e){this.var.rowHeaderNumbers=e,this.grid.renderer.resetRowHeaderColumnWidth()}},showRowNumbers:{enumerable:!1,get:function(){return this.rowHeaderCheckboxes||this.rowHeaderNumbers},set:function(e){this.rowHeaderCheckboxes=this.rowHeaderNumbers=e}},doubleClickDelay:{enumerable:!0,get:function(){return this.var.doubleClickDelay},set:function(e){n||(n=!0,console.warn("The doubleClickDelay property has been deprecated as of v2.1.0. Setting this property no longer has any effect. Set double-click speed in your system's mouse preferences. (This warning will be removed in a future release.)")),this.var.doubleClickDelay=e}},lineColor:{get:function(){return this.gridLinesHColor},set:function(e){this.gridLinesHColor=this.gridLinesVColor=e}},lineWidth:{get:function(){return this.gridLinesHWidth},set:function(e){this.gridLinesHWidth=this.gridLinesVWidth=e}},gridBorder:o(),gridBorderLeft:o("Left"),gridBorderRight:o("Right"),gridBorderTop:o("Top"),gridBorderBottom:o("Bottom")};function o(t){var i="gridBorder"+(t||"");return{enumerable:!0,get:function(){return this.var[i]},set:function(e){this.var[i]=e,t||(this.var.gridBorderLeft=this.var.gridBorderRight=this.var.gridBorderTop=this.var.gridBorderBottom=e),this.grid.resetGridBorder(t)}}}r.columnProperties=r.columns,t.exports=r},{}],93:[function(e,t,i){"use strict";function n(e){this.message=e}(n.prototype=Object.create(Error.prototype)).name="HypergridError",t.exports=n},{}],94:[function(e,t,i){"use strict";var n=e("synonomous"),r=/^__/,o={decorateSchema:function(e){return(new n).decorateArray(e),e},decorateColumnSchema:function(e,t){var i=new n;return i.transformations={},i.transformations[t]="header",i.decorateArray(e),e},normalizeSchema:function(i){i.forEach(function(e,t){"string"==typeof e&&(i[t]={name:e})});for(var e=i.length;e--;)r.test(i[e].name)&&i.splice(e,1);return i.forEach(function(e,t){e.index=t}),i},getFieldNames:function(e){return Object.keys(e||{}).filter(function(e){return!r.test(e)})},titleize:e("synonomous/transformers").toTitle,getSchema:function(e){var t=e&&e[0]||{},i=o.getFieldNames(t);return o.normalizeSchema(i),o.decorateSchema(i),o.decorateColumnSchema(i,"toTitle"),i}};t.exports=o},{synonomous:18,"synonomous/transformers":19}],95:[function(e,t,i){"use strict";var n;var r=/^(transparent|((RGB|HSL)A\(.*,\s*([\d\.]+)\)))$/i;function s(e){var t;return e?null===(t=e.match(r))?1:void 0===t[4]?0:Number(t[4]):0}var g={};var p="…";var a={};n={clearFill:function(e,t,i,n,r){var o=s(r);o<1&&this.clearRect(e,t,i,n),0<o&&(this.cache.fillStyle=r,this.fillRect(e,t,i,n))},alpha:s,getTextWidth:function(e){for(var t=g[this.cache.font]=g[this.cache.font]||{},i=0,n=0,r=(e+="").length;i<r;++i){var o=e[i];n+=t[o]=t[o]||this.measureText(o).width}return n},getTextWidthTruncated:function(e,t,i,n){var r,o,s,a=g[this.cache.font],l=void 0!==i;a||((a=g[this.cache.font]={})[p]=this.measureText(p).width),t+=!1===i?2:-1;for(var c=0,h=0,u=(e+="").length;c<u;++c){var d=e[c],f=a[d]=a[d]||this.measureText(d).width;if(h+=f,!r&&l&&t<h){switch(s=c,i){case!0:for(o=h-f+a[p];s&&t<o;)o-=a[e[--s]];r=t<o?"":r=e.substr(0,s)+p;break;case!1:r=e.substr(0,s);break;default:++s<e.length&&(r=e.substr(0,s))}if(n)break}}return{string:r,width:h}},getTextHeight:function(e){var t=a[e];if(!t){t={};var i=document.createElement("span");i.textContent="Hg",i.style.font=e;var n=document.createElement("div");n.style.display="inline-block",n.style.width="1px",n.style.height="0px";var r=document.createElement("div");r.appendChild(i),r.appendChild(n),r.style.position="absolute",document.body.appendChild(r);try{n.style.verticalAlign="baseline";var o=n.getBoundingClientRect(),s=i.getBoundingClientRect();t.ascent=o.top-s.top,n.style.verticalAlign="bottom",t.height=o.top-s.top,t.descent=t.height-t.ascent}finally{document.body.removeChild(r)}0!==t.height&&(a[e]=t)}return t},clipSave:function(e,t,i,n,r){this.conditionalsStack.push(e),e&&(this.cache.save(),this.beginPath(),this.rect(t,i,n,r),this.clip())},clipRestore:function(e){this.conditionalsStack.pop()&&this.cache.restore()},truncateTextWithEllipsis:!0},t.exports=n},{}],96:[function(e,t,i){"use strict";Math.sign=Math.sign=function(e){return 0===(e=+e)||isNaN(e)?e:0<e?1:-1},"function"!=typeof Array.prototype.findIndex&&(Array.prototype.findIndex=function(e){for(var t=arguments[1],i=0,n=this.length;i<n;i++)if(e.call(t,this[i],i,this))return i;return-1}),"function"!=typeof Array.prototype.fill&&(Array.prototype.fill=function(e,t,i){t=void 0===t?0:t<0?this.length+t:t,i=void 0===i?this.length:i<0?this.length+i:i;for(var n=t||0;n<i;++n)this[n]=e;return this}),"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e}),"function"!=typeof Object.getOwnPropertyDescriptors&&(Object.getOwnPropertyDescriptors=function(i){return Object.getOwnPropertyNames(i).reduce(function(e,t){return e[t]=Object.getOwnPropertyDescriptor(i,t),e},{})})},{}],97:[function(e,t,i){"use strict";var n=e("./error");t.exports=function(e){switch(typeof e){case"undefined":case"function":return e;case"string":break;default:throw new n("Expected string, function, or undefined.")}var t=e.match(/^function\s*\w*\s*\(([^]*?)\)/);if(!t)throw new n("Expected function keyword with formal parameter list.");t=t[1].split(",").map(function(e,t){if(!(e=e.match(/\s*(\w*)\s*/))&&t)throw new n("Expected formal parameter.");return e[1]});var i=e.match(/{\s*([^]*?)\s*}\s*$/);if(!i)throw new n("Expected function body.");return i=i[1],1!==t.length||t[0]?t=t.concat(i):t[0]=i,Function.apply(null,t)}},{"./error":93}],98:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n,r=this.grid.properties,o=this.visibleRows,s=o.length;if(e){n=this.cellEventPool;var a=0;this.visibleColumns.forEachWithNeg(function(e){for(i=0;i<s;i++,a++)t=o[i],n[a].reset(e,t)})}var l,c,h=[],u=r.backgroundColor;this.visibleColumns.forEachWithNeg(function(e){c=e.column.properties.backgroundColor,l&&l.backgroundColor===c?l.right=e.right:c===u?l=void 0:(l={backgroundColor:c,left:e.left,right:e.right},h.push(l))}),this.columnBundles=h}},{}],99:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n,r,o=this.grid.properties,s=this.visibleRows,a=s.length;if(e)for(r=this.cellEventPool,i=n=0;i<a;i++)t=s[i],this.visibleColumns.forEachWithNeg(function(e){r[++n].reset(e,t)});var l,c,h,u=[],d=o.backgroundColor,f=o.rowStripes,g=Array(a);for(i=0;i<a;i++)c=(t=s[i]).subgrid.isData&&f&&f[t.rowIndex%f.length],h=g[i]=c&&c.backgroundColor||d,l&&l.backgroundColor===h?l.bottom=t.bottom:h===d?l=void 0:(l={backgroundColor:h,top:t.top,bottom:t.bottom},u.push(l));this.rowBundles=u,this.rowPrefillColors=g}},{}],100:[function(e,t,i){"use strict";var f=e("./by-columns-and-rows");function n(i){var n,r,o,s,e=this.visibleColumns,t=this.visibleRows,a=e.length,l=a-1,c=t.length,h=0,u=this.cellEventPool,d=c?t[c-1].bottom:0;a&&c&&(this.gridRenderer.reset&&(this.resetAllGridRenderers(),f.call(this,i),this.gridRenderer.reset=!1),this.visibleColumns.forEachWithNeg(function(t,e){for(t=(n=u[h]).visibleColumn,s=t.column.properties.columnClip,i.clipSave(s||null===s&&e===l,0,0,t.right,d),o=r=0;r<c;r++,h++){n=u[h];try{o=Math.max(o,this._paintCell(i,u[h]))}catch(e){this.renderErrorCell(e,i,t,u[h].visibleRow)}}i.clipRestore(s),n.column.properties.preferredWidth=Math.round(o)},this),"border-box"===this.grid.properties.boxSizing&&this.paintGridlines(i))}n.key="by-cells",n.partial=!0,t.exports=n},{"./by-columns-and-rows":101}],101:[function(e,t,i){"use strict";var x=e("./bundle-columns"),S=e("./bundle-rows");function n(i){var n,r,o,e,t,s,a,l,c,h,u,d=this.grid.properties.backgroundColor,f=this.visibleColumns,g=this.visibleRows,p=f.length,m=p-1,v=g.length,b=this.cellEventPool,C=p?f[p-1].right:0,w=v?g[v-1].bottom:0;if(i.clearRect(0,0,this.bounds.width,this.bounds.height),p&&v){if(0<i.alpha(d)&&(i.cache.fillStyle=d,i.fillRect(0,0,C,w)),this.gridRenderer.reset?(this.resetAllGridRenderers(),this.gridRenderer.reset=!1,S.call(this,!1),x.call(this,!0)):this.gridRenderer.rebundle&&(this.gridRenderer.rebundle=!1,x.call(this)),(t=this.rowBundles).length)for(r=this.rowPrefillColors,c=t.length;c--;)e=t[c],i.clearFill(0,e.top,C,e.bottom-e.top,e.backgroundColor);else for(l=(a=this.columnBundles).length;l--;)s=a[l],i.clearFill(s.left,0,s.right-s.left,w,s.backgroundColor);var y=0;this.visibleColumns.forEachWithNeg(function(t,e){for(t=(o=b[y]).visibleColumn,r||(n=o.column.properties.backgroundColor),u=t.column.properties.columnClip,i.clipSave(u||null===u&&e===m,0,0,t.right,w),h=c=0;c<v;c++,y++){r&&(n=r[c]);try{h=Math.max(h,this._paintCell(i,b[y],n))}catch(e){this.renderErrorCell(e,i,t,b[y].visibleRow)}}i.clipRestore(u),o.column.properties.preferredWidth=Math.round(h)},this),this.paintGridlines(i)}}n.key="by-columns-and-rows",n.rebundle=!0,t.exports=n},{"./bundle-columns":98,"./bundle-rows":99}],102:[function(e,t,i){"use strict";var g=e("./bundle-columns");function n(i){var n,r,o,s,a,e=this.visibleColumns,t=this.visibleRows,l=e.length,c=l-1,h=t.length,u=this.cellEventPool,d=h?t[h-1].bottom:0;if(i.clearRect(0,0,this.bounds.width,this.bounds.height),l&&h){this.gridRenderer.reset&&(this.resetAllGridRenderers(["by-columns"]),this.gridRenderer.reset=!1,g.call(this,!0));var f=0;this.visibleColumns.forEachWithNeg(function(t,e){for(t=(r=u[f]).visibleColumn,n=r.column.properties.backgroundColor,i.clearFill(t.left,0,t.width,d,n),a=t.column.properties.columnClip,i.clipSave(a||null===a&&e===c,0,0,t.right,d),s=o=0;o<h;o++,f++){r=u[f];try{s=Math.max(s,this._paintCell(i,r,n))}catch(e){this.renderErrorCell(e,i,t,r.visibleRow)}}i.clipRestore(a),r.column.properties.preferredWidth=Math.round(s)},this),this.paintGridlines(i)}}n.key="by-columns-discrete",t.exports=n},{"./bundle-columns":98}],103:[function(e,t,i){"use strict";var C=e("./bundle-columns");function n(i){var n,r,e,t,o,s,a,l,c=this.grid.properties.backgroundColor,h=this.visibleColumns,u=this.visibleRows,d=h.length,f=d-1,g=u.length,p=this.cellEventPool,m=d?h[f].right:0,v=g?u[g-1].bottom:0;if(i.clearRect(0,0,this.bounds.width,this.bounds.height),d&&g){for(0<i.alpha(c)&&(i.cache.fillStyle=c,i.fillRect(0,0,m,v)),this.gridRenderer.reset?(this.resetAllGridRenderers(["by-columns-discrete"]),this.gridRenderer.reset=!1,C.call(this,!0)):this.gridRenderer.rebundle&&(this.gridRenderer.rebundle=!1,C.call(this)),o=(t=this.columnBundles).length;o--;)e=t[o],i.clearFill(e.left,0,e.right-e.left,v,e.backgroundColor);var b=0;this.visibleColumns.forEachWithNeg(function(t,e){for(t=(r=p[b]).visibleColumn,n=r.column.properties.backgroundColor,l=t.column.properties.columnClip,i.clipSave(l||null===l&&e===f,0,0,t.right,v),a=s=0;s<g;s++,b++){r=p[b];try{a=Math.max(a,this._paintCell(i,r,n))}catch(e){this.renderErrorCell(e,i,t,r.visibleRow)}}i.clipRestore(l),r.column.properties.preferredWidth=Math.round(a)},this),this.paintGridlines(i)}}n.key="by-columns",n.rebundle=!0,t.exports=n},{"./bundle-columns":98}],104:[function(e,t,i){"use strict";var S=e("./bundle-rows");function n(i){var e,t,n,r,o,s,a,l=this.grid.properties,c=l.backgroundColor,h=this.rowBundles,u=this.visibleColumns,d=this.visibleRows,f=u.length,g=f-1,p=d.length,m=this.cellEventPool,v=Array(f-0).fill(0),b=f?u[f-1].right:0,C=p?d[p-1].bottom:0,w=l.gridLinesH,y=l.gridLinesHWidth,x=l.gridLinesHColor;if(i.clearRect(0,0,this.bounds.width,this.bounds.height),f&&p){for(0<i.alpha(c)&&(i.cache.fillStyle=c,i.fillRect(0,0,b,C)),this.gridRenderer.reset&&(this.resetAllGridRenderers(),this.gridRenderer.reset=!1,S.call(this,!0)),t=this.rowPrefillColors,o=h.length;o--;)r=h[o],i.clearFill(0,r.top,b,r.bottom-r.top,r.backgroundColor);for(o=s=0;o<p;o++)e=t[o],w&&(i.cache.fillStyle=x,i.fillRect(0,m[s].visibleRow.bottom,b,y)),this.visibleColumns.forEachWithNeg(function(t){t=(n=m[++s]).visibleColumn,a=t.column.properties.columnClip,i.clipSave(a||null===a&&void 0===g,0,0,t.right,C);try{v[void 0]=Math.max(v[void 0],this._paintCell(i,n,e))}catch(e){this.renderErrorCell(e,i,t,void 0)}i.clipRestore(a)},this);this.paintGridlines(i),this.visibleColumns.forEachWithNeg(function(e,t){e.column.properties.preferredWidth=Math.round(v[t])})}}n.key="by-rows",t.exports=n},{"./bundle-rows":99}],105:[function(e,t,i){"use strict";var n=e("../Base"),s=e("../../images"),r=e("./layer-props"),fe=e("../lib/InclusiveRectangle"),o=[],a=n.extend("Renderer",{cell:{x:0,y:0,width:0,height:0},scrollHeight:0,reset:function(){this.bounds={width:0,height:0},this.visibleColumns=this.grid.decorateColumnArray(),this.visibleRows=[],this.insertionBounds=[],this.cellEventPool=[]},initialize:function(e){this.grid=e,this.gridRenderers={},o.forEach(function(e){this.registerGridRenderer(e)},this),this.setGridRenderer(this.properties.gridRenderer||"by-columns-and-rows"),this.reset()},registerGridRenderer:function(e){this.gridRenderers[e.key]={paintCells:e}},setGridRenderer:function(e){var t=this.gridRenderers[e];if(!t)throw new this.HypergridError('Unregistered grid renderer "'+e+'"');t!==this.gridRenderer&&(this.gridRenderer=t,this.gridRenderer.reset=!0)},resetAllGridRenderers:function(t){Object.keys(this.gridRenderers).forEach(function(e){this.gridRenderers[e].reset=!t||t.indexOf(e)<0},this)},rebundleGridRenderers:function(){Object.keys(this.gridRenderers).forEach(function(e){this.gridRenderers[e].paintCells.rebundle&&(this.gridRenderers[e].rebundle=!0)},this)},resetRowHeaderColumnWidth:function(){this.lastKnowRowCount=void 0},computeCellsBounds:function(){this.needsComputeCellsBounds=!0},get properties(){return this.grid.properties},paint:function(e){this.grid.canvas&&(this.renderGrid(e),this.grid.gridRenderedNotification())},tickNotification:function(){this.grid.tickNotification()},getVisibleRowsCount:function(){return this.visibleRows.length-1},getVisibleScrollHeight:function(){var e=this.grid.properties.defaultRowHeight*this.grid.behavior.getFooterRowCount();return this.getBounds().height-e-this.grid.getFixedRowsHeight()},getVisibleColumnsCount:function(){return this.visibleColumns.length-1},getBoundsOfCell:function(e,t){var i=this.visibleColumns[e],n=this.visibleRows[t];return{x:i.left,y:n.top,width:i.width,height:n.height}},getColumnFromPixelX:function(e){for(var t=this.grid.getFixedColumnCount(),i=this.grid.getHScrollValue(),n=this.visibleColumns,r=1;r<n.length-1;r++)if(e<n[r].left-(n[r].left-n[r-1].left)/2)return t<r&&(r+=i),r-1;return t<r&&(r+=i),r-1},getGridCellFromMousePoint:function(e){var t=e.x,i=e.y,n=!1,r=!1,o=this.visibleRows,s=this.visibleColumns,a=s[this.grid.behavior.leftMostColIndex],l=a&&t<a.right?a:s.findWithNeg(function(e){return t<e.right}),c=o.find(function(e){return i<e.bottom}),h={fake:!1};c?n=!1:(c=o[o.length-1],n=!0),l?r=!1:(l=s[s.length-1],r=!0);var u=new this.grid.behavior.CellEvent(l.columnIndex,c.index),d=this.findCell(u);return h.cellEvent=d?Object.create(d):u,h.cellEvent.mousePoint=this.grid.newPoint(t-l.left,i-c.top),(r||n)&&(h.fake=!0,this.grid.beCursor(null)),h},getVisibleCellMatrix:function(){for(var i=Array(this.visibleRows.length),n=this.grid.behavior.hasTreeColumn()?1:0,e=0;e<i.length;++e)i[e]=Array(this.visibleColumns.length);return this.cellEventPool.forEach(function(e){var t=e.gridCell.x+n;0<=t&&(i[e.gridCell.y][t]=e.value)}),i},isColumnVisible:function(e){return!!this.getVisibleColumn(e)},getVisibleColumn:function(t){return this.visibleColumns.findWithNeg(function(e){return e.columnIndex===t})},getMinimumLeftPositionToShowColumn:function(e){var t,i,n,r,o=this.grid.getFixedColumnCount(),s=0,a=0,l=0,c=[],h=null,u=0,d=0,f=0;for(u=0;u<=e;u++)d=f,f+=Math.ceil(this.grid.getColumnWidth(u)),c.push({left:d,right:f});for(n=c[c.length-1].right,r=c[o-1],this.properties.showRowNumbers&&(s=this.grid.getColumnWidth(this.grid.behavior.rowColumnIndex)),this.grid.hasTreeColumn()&&(a=this.grid.getColumnWidth(this.grid.behavior.treeColumnIndex)),t=r?r.right:0,i=this.getBounds().width-t-s-a,u=e;h=c[l=u],u--,h.left+i>n&&0<=u;);return l},isDataColumnVisible:function(e){return!!this.getVisibleDataColumn(e)},getVisibleDataColumn:function(t){return this.visibleColumns.findWithNeg(function(e){return e.column.index===t})},getFinalVisibleColumnBoundary:function(){var e=this.isLastColumnVisible()?2:1,t=this.visibleColumns[this.visibleColumns.length-e].right;return Math.min(t,this.getBounds().width)},isRowVisible:function(e){return!!this.visibleRows[e]},getVisibleRow:function(e){return this.visibleRows[e]},isDataRowVisible:function(e,t){return!!this.getVisibleDataRow(e,t)},getVisibleDataRow:function(t,i){return i=i||this.grid.behavior.dataModel,this.visibleRows.find(function(e){return e.subgrid===i&&e.rowIndex===t})},isSelected:function(e,t){return this.grid.isSelected(e,t)},renderGrid:function(e){var t=this.grid;t.deferredBehaviorChange();var i=t.getRowCount();if(i!==this.lastKnowRowCount){var n=function(e,t){var i=this.grid.behavior.getColumnProperties(this.grid.behavior.rowColumnIndex),n=this.grid.properties,r=2*i.cellPadding;n.rowHeaderCheckboxes&&s.checked&&(r+=s.checked.width);if(n.rowHeaderNumbers){var o=i.rowHeader;e.cache.font=0<=o.foregroundSelectionFont.indexOf("bold ")?o.foregroundSelectionFont:o.font,r+=e.getTextWidth(t)}i.preferredWidth=i.width=r}.call(this,e,i);n!==this.handleColumnWidth&&(this.needsComputeCellsBounds=!0,this.handleColumnWidth=n),this.lastKnowRowCount=i}this.needsComputeCellsBounds&&(function(){var e,t,i,n,r,o,s,a,l,c,h,u,d,f,g,p,m,v,b,C,w,y,x,S,R,E,A,M,D,k,P,O,T,H,F,I,L,B,N,j,V=this.getScrollTop(),z=this.getScrollLeft(),W=this.getBounds(),G=this.grid,U=G.behavior,_=U.hasTreeColumn(),K=U.treeColumnIndex,Y=G.cellEditor&&G.cellEditor.event,Q=0,Z=0,J=G.properties,X="border-box"===J.boxSizing,q=J.gridLinesVWidth,$=X?0:q,ee=J.gridLinesHWidth,te=X?0:ee,ie=this.grid.getFixedColumnCount(),ne=this.grid.getFixedRowCount(),re=U.leftMostColIndex,oe=0,se=-3,ae=-1,le=U.subgrids;Y&&(t=Y.gridCell.x,n=Y.dataCell.y,r=Y.subgrid);J.showRowNumbers&&(se=_?K:0,oe+=1);_&&(se=0,oe+=1);ie&&(se=ie);ne&&(ae=ne);void 0===J.fixedLinesVWidth?se=-3:(b=Math.max(J.fixedLinesVWidth||q,q),w=(C=X?b-q:b)-b);void 0===J.fixedLinesHWidth?ae=-1:(y=Math.max(J.fixedLinesHWidth||ee,ee),S=(x=X?y-ee:y)-y);for(this.scrollHeight=0,this.visibleColumns.length=0,this.visibleColumns.gap=this.visibleColumns[-1]=this.visibleColumns[-2]=void 0,this.visibleRows.length=0,this.visibleRows.gap=void 0,this.visibleColumnsByIndex=[],this.visibleRowsByDataRowIndex={},this.insertionBounds=[],s=0,h=re,u=G.getColumnCount(),a=W.width||G.canvas.width;h<u&&s<=a;h++)if(_||h!==K){if((j=h===se)?(this.visibleColumns.gap={left:O.right+w,right:void 0},s+=C):s&&(s+=$),ie<=(D=h)&&(I=D+=z,void 0===F&&(F=I)),u<=D)break;T=Math.ceil(U.getColumnWidth(D)),this.visibleColumns[h]=this.visibleColumnsByIndex[D]=O={index:h,columnIndex:D,column:U.getActiveColumn(D),left:s,width:T,right:s+T},j&&(this.visibleColumns.gap.right=O.left),t===D&&(e=O),s+=T,Q+=Math.round(T/2)+Z,this.insertionBounds.push(Q),Z=Math.round(T/2)}else this.visibleColumns[h]=void 0;for(M=J.defaultRowHeight*U.getFooterRowCount(),v=g=d=l=0,f=le.length,c=W.height-M;d<f;d++,v+=m){for(R=le[d],m=R.getRowCount(),A=R.isData,o=r===R,p=(N=g)+m;g<p&&l<c&&((j=A&&g===ae)?(this.visibleRows.gap={top:P.bottom+S,bottom:void 0},l+=x):l&&(l+=te),k=g,!(A&&ne<=g&&(B=(k+=V)-v,void 0===L&&(L=B),p<=k)));g++)E=k-v,H=U.getRowHeight(E,R),this.visibleRows[g]=P={index:g,subgrid:R,rowIndex:E,top:l,height:H,bottom:l+H},j&&(this.visibleRows.gap.bottom=P.top),A&&(this.visibleRowsByDataRowIndex[k-v]=P),o&&n===E&&(i=P),l+=H;A&&(m=g-N)}Y&&(Y.visibleColumn=e,Y.visibleRow=i,Y.gridCell.y=i&&i.index,Y._bounds=null);this.dataWindow=new fe(F,L,Math.min(I-F+1,this.visibleColumns.length),Math.min(B-L+1,this.visibleRows.length));var ce=this.cellEventPool,he=ce.length,ue=(this.visibleColumns.length+oe)*this.visibleRows.length;he<ue&&(ce.length=ue);for(var de=he;de<ue;de++)ce[de]=new U.CellEvent;this.resetAllGridRenderers()}.call(this),this.needsComputeCellsBounds=!1,t.behavior.dataModel.fetchData)?t.behavior.dataModel.fetchData(function(){var e=this.dataWindow;if(!this.grid.properties.fetchSubregions){var t=this.grid.newRectangle(e.left,e.top,e.width,e.height);return[t]}var i=this.visibleColumns.map(function(e){return e.column.index}).sort(l),n=i[0],r=i[i.length-1]-n+1;return[this.grid.newRectangle(n,e.top,r,e.height)]}.call(this),function(e,t){t||(this.gridRenderer.paintCells.call(this,e),this.grid.repaint())}.bind(this,e)):(this.gridRenderer.paintCells.call(this,e),this.renderOverrides(e),this.renderLastSelection(e))},renderLastSelection:function(e){var t,i,n,r,o,s=this.grid,a=s.properties,l=s.selectionModel;switch(l.getLastSelectionType()){case"column":var c=l.columnSelectionModel.selection,h=c[c.length-1];i=h[0],n=0,r=h[1]-i+1,o=s.getRowCount(),t=new fe(i,n,r,o);break;case"row":if(!a.collapseCellSelections||"cell"!==l.getLastSelectionType(1)){var u=l.rowSelectionModel.selection,d=u[u.length-1];n=d[i=0],r=s.behavior.getActiveColumns().length,o=d[1]-n+1,t=new fe(i,n,r,o);break}case"cell":t=l.getLastSelection()}if(t&&-1!==t.origin.x){var f=this.visibleColumnsByIndex,g=this.visibleRowsByDataRowIndex,p=this.visibleColumns[this.visibleColumns.length-1],m=this.visibleRows[this.visibleRows.length-1],v=f[this.dataWindow.origin.x],b=g[this.dataWindow.origin.y],C=a.fixedColumnCount,w=a.fixedRowCount,y=s.getHeaderRowCount();if(!(t.corner.x<this.visibleColumns[0].columnIndex||C&&t.origin.x>this.visibleColumns[C-1].columnIndex&&t.corner.x<v.columnIndex||t.origin.x>p.columnIndex||t.corner.y<this.visibleRows[y].rowIndex||w&&t.origin.y>this.visibleRows[y+w-1].rowIndex&&t.corner.y<b.rowIndex||t.origin.y>m.rowIndex)){var x=f[t.origin.x]||v,S=g[t.origin.y]||b,R=f[t.corner.x]||(t.corner.x>p.columnIndex?p:f[C-1]),E=g[t.corner.y]||(t.corner.y>m.rowIndex?m:g[w-1]),A={bounds:{x:x.left,y:S.top,width:R.right-x.left,height:E.bottom-S.top},selectionRegionOverlayColor:this.gridRenderer.paintCells.partial?"transparent":a.selectionRegionOverlayColor,selectionRegionOutlineColor:a.selectionRegionOutlineColor};s.cellRenderers.get("lastselection").paint(e,A),"by-cells"===this.gridRenderer.paintCells.key&&(this.gridRenderer.reset=!0)}}},renderOverrides:function(e){var t=this.grid.renderOverridesCache;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n&&this.renderOverride(e,n)}},renderOverride:function(e,t){var i=t.hdpiratio,n=t.startX,r=t.width+1,o=t.height,s=t.ctx,a=e.getImageData(n,0,Math.round(r*i),Math.round(o*i));s.putImageData(a,0,0),e.cache.fillStyle=this.properties.backgroundColor2,e.fillRect(Math.round(n/i),0,r,o)},getScrollTop:function(){return this.grid.getVScrollValue()},getScrollLeft:function(){return this.grid.getHScrollValue()},isLastColumnVisible:function(){var t=this.grid.getColumnCount()-1;return!!this.visibleColumns.findWithNeg(function(e){return e.columnIndex===t})},getRenderedWidth:function(e){var t=this.visibleColumns;return e>=t.length?t[t.length-1].right:t[e].left},getRenderedHeight:function(e){var t,i=this.visibleRows;e>=i.length?t=i[i.length-1].bottom:t=i[e].top;return t},isDraggingColumn:function(){return this.grid.isDraggingColumn()},getPageUpRow:function(){for(var e=this.grid,t=this.getVisibleScrollHeight(),i=this.dataWindow.origin.y-this.properties.fixedRowCount-1,n=0;n<t&&0<=i;)n+=e.getRowHeight(i),i--;return i+1},getPageDownRow:function(){return this.dataWindow.corner.y-this.properties.fixedRowCount},renderErrorCell:function(e,t,i,n){var r=e&&(e.message||e)||"Unknown error.",o={x:i.left,y:n.top,width:i.width,height:n.height},s={bounds:o};console.error(r),t.cache.save(),t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip(),this.grid.cellRenderers.get("errorcell").paint(t,s,r),t.cache.restore()},paintGridlines:function(o){var e=this.visibleColumns,t=e.length,i=this.visibleRows,n=i.length;if(t&&n){var r,s,a,l=this.properties,c=t-1,h=n-1,u=e[c].right,d=i[h].bottom,f=l.gridLinesVColor,g=l.gridLinesHColor,p="border-box"===l.boxSizing;if(l.gridLinesV&&(l.gridLinesUserDataArea||l.gridLinesColumnHeader)){var m=l.gridLinesVWidth,v=this.grid.getHeaderRowCount(),b=i[v-1],C=i[v],w=C&&C.top,y=l.gridLinesColumnHeader?0:w,x=l.gridLinesUserDataArea?d:b&&b.bottom;void 0!==y&&void 0!==x&&(o.cache.fillStyle=f,e.forEachWithNeg(function(e,t){if(e&&t<c){var i=e.right,n=Math.max(y,e.top||0),r=Math.min(x,e.bottom||1/0)-n;p&&(i-=m),o.fillRect(i,n,m,r),l.gridLinesUserDataArea&&e.bottom<w&&o.fillRect(i,w,m,x-w)}}))}if(l.gridLinesH&&(l.gridLinesUserDataArea||(r=l.gridLinesRowHeader&&(e[-1]||e[-2])))){var S=l.gridLinesHWidth,R=l.gridLinesRowHeader?0:e[0].left,E=l.gridLinesUserDataArea?u:r.right;o.cache.fillStyle=g,i.forEach(function(e,t){if(t<h){var i=e.bottom;p&&(i-=S),o.fillRect(R,i,E-R,S)}})}void 0!==l.fixedLinesHWidth&&(a=i.gap)&&(o.cache.fillStyle=l.fixedLinesHColor||g,(s=l.fixedLinesHEdge)?(o.fillRect(0,a.top,u,s),o.fillRect(0,a.bottom-s,u,s)):o.fillRect(0,a.top,u,a.bottom-a.top)),void 0!==l.fixedLinesVWidth&&(a=e.gap)&&(o.cache.fillStyle=l.fixedLinesVColor||f,(s=l.fixedLinesVEdge)?(o.fillRect(a.left,0,s,d),o.fillRect(a.right-s,0,s,d)):o.fillRect(a.left,0,a.right-a.left,d))}},_paintCell:function(t,e,i){var n,r,o=this.grid,s=o.selectionModel,a=e.isHandleColumn,l=e.isTreeColumn,c=e.isColumnSelected,h=e.isDataRow,u=e.isRowSelected,d=e.isCellSelected,f=e.isHeaderRow,g=e.isFilterRow,p=a||l,m=!p&&h,v=this.assignProps(e),b=(v.gridCell=e.gridCell).x,C=(v.dataCell=e.dataCell).y;a?(r=u||s.isCellSelectedInRow(C),v.halign="right"):l?(r=u||s.isCellSelectedInRow(C),v.halign="left"):r=h?d||u||c:!g&&(!!c||s.isCellSelectedInColumn(b)),a?h?v.rowHeaderNumbers&&(n=C+1):f&&(v.allRowsSelected=s.areAllRowsSelected()):(v.dataRow=e.dataRow,n=e.value),v.isSelected=r,v.isDataColumn=!p,v.isHandleColumn=a,v.isTreeColumn=l,v.isDataRow=h,v.isHeaderRow=f,v.isFilterRow=g,v.isUserDataArea=m,v.isColumnHovered=e.isColumnHovered,v.isRowHovered=e.isRowHovered,v.isCellHovered=e.isCellHovered,v.bounds=e.bounds,v.isCellSelected=d,v.isRowSelected=u,v.isColumnSelected=c,v.isInCurrentSelectionRectangle=s.isInCurrentSelectionRectangle(b,C),v.prefillColor=i,o.mouseDownState&&(v.mouseDown=o.mouseDownState.gridCell.equals(e.gridCell)),v.subrow=0;var w=m&&n&&n.constructor===Array,y=w&&n.subrows&&n.length;if(y){var x=v.bounds=Object.assign({},v.bounds);x.height/=y,v.subrows=y,v.value=v.exec(n[0])}else y=1,v.value=!w&&m?v.exec(n):n;for(;;){var S=e.subgrid.getCell(v,v.renderer);if(v.formatValue=o.getFormatter(v.format),v.snapshot=e.snapshot[v.subrow],v.minWidth=e.minWidth,S.forEach?S.forEach(function(e){e.paint(t,v)}):S.paint(t,v),e.snapshot[v.subrow]=v.snapshot,(void 0===e.minWidth||v.minWidth>e.minWidth)&&(e.minWidth=v.minWidth),++v.subrow===y)break;x.y+=x.height,v.value=v.exec(n[v.subrow])}return e.clickRect=v.clickRect,e.cellRenderer=S,v.minWidth},assignProps:r,findCell:function(e,t,i){var n,r,o=this.cellEventPool;"object"==typeof e?(i=e.subgrid,t=e.dataCell.y,n=e.dataCell.x):n=e,i=i||this.grid.behavior.dataModel;var s=this.visibleColumns.length;this.grid.properties.showRowNumbers&&s++,this.grid.behavior.hasTreeColumn()&&s++,s*=this.visibleRows.length;for(var a=0;a<s;++a)if((r=o[a]).subgrid===i&&r.dataCell.x===n&&r.dataCell.y===t)return r},resetCellPropertiesCache:function(e,t,i){var n=this.findCell.apply(this,arguments);return n&&(n._cellOwnProperties=void 0),n},resetAllCellPropertiesCaches:function(){this.cellEventPool.forEach(function(e){e._cellOwnProperties=void 0})},getBounds:function(){return this.bounds},setBounds:function(e){return this.bounds=e},setInfo:function(e){var t;this.visibleColumns.length&&(t=this.visibleColumns[this.visibleColumns.length-1].right),this.grid.canvas.setInfo(e,t)}});function l(e,t){return e-t}function c(e){o.indexOf(e)<0&&o.push(e)}c(e("./by-cells")),c(e("./by-columns")),c(e("./by-columns-discrete")),c(e("./by-columns-and-rows")),c(e("./by-rows")),a.registerGridRenderer=c,t.exports=a},{"../../images":5,"../Base":21,"../lib/InclusiveRectangle":83,"./by-cells":100,"./by-columns":103,"./by-columns-and-rows":101,"./by-columns-discrete":102,"./by-rows":104,"./layer-props":106}],106:[function(e,t,i){"use strict";var n=e("../defaults"),o=n.propClassEnum.COLUMNS,s=n.propClassEnum.CELLS,a=n.propClassEnum.ROWS,l=n.propClassEnum.STRIPES,c=[];c[o]=function(e){return e.columnProperties},c[s]=function(e){return e.cellOwnProperties},c[l]=function(e){var t=e.isDataRow&&e.columnProperties.rowStripes;return t&&t[e.dataCell.y%t.length]},c[a]=function(e){return e.rowOwnProperties},t.exports=function(e){var t,i,n,r=e.properties.propClassLayers;switch(r[0]){case a:t=1,i=e.rowOwnProperties||this.grid.properties;break;case o:r[1]===s?(t=2,i=e.properties):(t=1,i=e.columnProperties);break;case s:r[1]===o?(i=e.cellOwnProperties)?t=1:(t=2,i=e.columnProperties):r[2]===o||r[3]===o?(t=1,i=e.properties):(t=0,i=this.grid.properties);break;case l:t=0,i=this.grid.properties}for(n=[Object.create(i)];t<r.length;++t)n.push(c[r[t]](e));return Object.assign.apply(Object,n)}},{"../defaults":66}],107:[function(e,t,i){arguments[4][8][0].apply(i,arguments)},{dup:8,"extend-me":109}],108:[function(e,t,i){"use strict";var n=e("datasaur-base").extend("DatasaurLocal",{initialize:function(e,t){this.schema=[],this.data=[]},setData:function(e,t){this.data=e||[],t?this.setSchema(t):this.data.length&&!this.schema.length&&this.setSchema([]),this.dispatchEvent("fin-hypergrid-data-loaded")},getSchema:function(){return this.schema},setSchema:function(e){if(!e.length){var t=this.data.find(function(e){return e});t&&(e=Object.keys(t))}this.schema=e,this.dispatchEvent("fin-hypergrid-schema-loaded")},getRow:function(e){return this.data[e]},setRow:function(e,t){this.data[e]=t||void 0},getRowMetadata:function(e,t){var i=this.data[e];return i&&(i.__META||void 0!==t&&(i.__META=Object.create(t)))},setRowMetadata:function(e,t){var i=this.data[e];return i&&(t?i.__META=t:delete i.__META),!!i},addRow:function(e,t){1===arguments.length&&(t=e,e=void 0),void 0===e||e>=this.getRowCount()?this.data.push(t):this.data.splice(e,0,t),this.dispatchEvent("fin-hypergrid-data-shape-changed")},delRow:function(e,t){var i=this.data.splice(e,void 0===t?1:t);return i.length&&this.dispatchEvent("fin-hypergrid-data-shape-changed"),i},getValue:function(e,t){var i=this.data[t];return i?i[this.schema[e].name]:null},setValue:function(e,t,i){this.data[t][this.schema[e].name]=i},getRowCount:function(){return this.data.length},getColumnCount:function(){return this.schema.length}});t.exports=n},{"datasaur-base":107}],109:[function(e,t,i){arguments[4][10][0].apply(i,arguments)},{dup:10}]},{},[1]);